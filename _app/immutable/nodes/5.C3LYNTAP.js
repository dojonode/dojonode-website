import{s as pt,x as Re,n as Ye,r as kt}from"../chunks/scheduler.Cu_nLO_j.js";import{S as mt,i as gt,e as D,s as fe,t as De,c as j,a as Q,k as Ue,f as de,d as L,b as je,l as A,g as ge,h as P,j as Me,v as Ve,z as _t,w as ze,x as We,C as Ze,B as Be,D as It,q as ke,o as Ne,p as wt,y as $e,n as et,r as bt,E as At}from"../chunks/index.BqxeUPIv.js";import{T as Pt,c as xt,g as Nt,H as Rt}from"../chunks/ThemeSwitcher.Ccd5X2BC.js";import{K as Lt,M as qt,T as Ut}from"../chunks/Map.Uu4rPlGa.js";function tt(b){return(b==null?void 0:b.length)!==void 0?b:Array.from(b)}class Ce extends Error{constructor(e){var t,s,n,f;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,Ce.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof Ce||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(f=(n=(s=this.originalError)==null?void 0:s.cause)==null?void 0:n.message)!=null&&f.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const Fe=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Dt(b,e){const t={};if(typeof b!="string")return t;const s=Object.assign({},e||{}).decode||jt;let n=0;for(;n<b.length;){const f=b.indexOf("=",n);if(f===-1)break;let d=b.indexOf(";",n);if(d===-1)d=b.length;else if(d<f){n=b.lastIndexOf(";",f-1)+1;continue}const y=b.slice(n,f).trim();if(t[y]===void 0){let E=b.slice(f+1,d).trim();E.charCodeAt(0)===34&&(E=E.slice(1,-1));try{t[y]=s(E)}catch{t[y]=E}}n=d+1}return t}function st(b,e,t){const s=Object.assign({},t||{}),n=s.encode||Bt;if(!Fe.test(b))throw new TypeError("argument name is invalid");const f=n(e);if(f&&!Fe.test(f))throw new TypeError("argument val is invalid");let d=b+"="+f;if(s.maxAge!=null){const y=s.maxAge-0;if(isNaN(y)||!isFinite(y))throw new TypeError("option maxAge is invalid");d+="; Max-Age="+Math.floor(y)}if(s.domain){if(!Fe.test(s.domain))throw new TypeError("option domain is invalid");d+="; Domain="+s.domain}if(s.path){if(!Fe.test(s.path))throw new TypeError("option path is invalid");d+="; Path="+s.path}if(s.expires){if(!function(E){return Object.prototype.toString.call(E)==="[object Date]"||E instanceof Date}(s.expires)||isNaN(s.expires.valueOf()))throw new TypeError("option expires is invalid");d+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(d+="; HttpOnly"),s.secure&&(d+="; Secure"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():s.priority){case"low":d+="; Priority=Low";break;case"medium":d+="; Priority=Medium";break;case"high":d+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return d}function jt(b){return b.indexOf("%")!==-1?decodeURIComponent(b):b}function Bt(b){return encodeURIComponent(b)}let yt;function Ke(b){if(b)try{const e=decodeURIComponent(yt(b.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function vt(b,e=0){let t=Ke(b);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}yt=typeof atob=="function"?atob:b=>{let e=String(b).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,s,n=0,f=0,d="";s=e.charAt(f++);~s&&(t=n%4?64*t+s:s,n++%4)?d+=String.fromCharCode(255&t>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return d};const it="pb_auth";class Mt{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!vt(this.token)}get isAdmin(){return Ke(this.token).type==="admin"}get isAuthRecord(){return Ke(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=it){const s=Dt(e||"")[t]||"";let n={};try{n=JSON.parse(s),(typeof n===null||typeof n!="object"||Array.isArray(n))&&(n={})}catch{}this.save(n.token||"",n.model||null)}exportToCookie(e,t=it){var E,k;const s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},n=Ke(this.token);s.expires=n!=null&&n.exp?new Date(1e3*n.exp):new Date("1970-01-01"),e=Object.assign({},s,e);const f={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let d=st(t,JSON.stringify(f),e);const y=typeof Blob<"u"?new Blob([d]).size:d.length;if(f.model&&y>4096){f.model={id:(E=f==null?void 0:f.model)==null?void 0:E.id,email:(k=f==null?void 0:f.model)==null?void 0:k.email};const O=["collectionId","username","verified"];for(const J in this.model)O.includes(J)&&(f.model[J]=this.model[J]);d=st(t,JSON.stringify(f),e)}return d}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let s=this._onChangeCallbacks.length-1;s>=0;s--)if(this._onChangeCallbacks[s]==e)return delete this._onChangeCallbacks[s],void this._onChangeCallbacks.splice(s,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Ft extends Mt{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let s=t;typeof t!="string"&&(s=JSON.stringify(t)),window.localStorage.setItem(e,s)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class Le{constructor(e){this.client=e}}class Gt extends Le{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,s){return s=Object.assign({method:"POST",body:{email:e,template:t}},s),this.client.send("/api/settings/test/email",s).then(()=>!0)}async generateAppleClientSecret(e,t,s,n,f,d){return d=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:s,privateKey:n,duration:f}},d),this.client.send("/api/settings/apple/generate-client-secret",d)}}class Xe extends Le{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let s=500;return(t=Object.assign({},e,t)).batch&&(s=t.batch,delete t.batch),this._getFullList(s,t)}async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(this.baseCrudPath,s).then(n=>{var f;return n.items=((f=n.items)==null?void 0:f.map(d=>this.decode(d)))||[],n})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(s=>{var n;if(!((n=s==null?void 0:s.items)!=null&&n.length))throw new Ce({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return s.items[0]})}async getOne(e,t){if(!e)throw new Ce({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(s=>this.decode(s))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(s=>this.decode(s))}async update(e,t,s){return s=Object.assign({method:"PATCH",body:t},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),s).then(n=>this.decode(n))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let s=[],n=async f=>this.getList(f,e||500,t).then(d=>{const y=d.items;return s=s.concat(y),y.length==d.perPage?n(f+1):s});return n(1)}}function Se(b,e,t,s){const n=s!==void 0;return n||t!==void 0?n?(console.warn(b),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,s),e):Object.assign(e,t):e}function He(b){var e;(e=b._resetAutoRefresh)==null||e.call(b)}class Kt extends Xe{get baseCrudPath(){return"/api/admins"}async update(e,t,s){return super.update(e,t,s).then(n=>{var f,d;return((f=this.client.authStore.model)==null?void 0:f.id)===n.id&&((d=this.client.authStore.model)==null?void 0:d.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,n),n})}async delete(e,t){return super.delete(e,t).then(s=>{var n,f;return s&&((n=this.client.authStore.model)==null?void 0:n.id)===e&&((f=this.client.authStore.model)==null?void 0:f.collectionId)===void 0&&this.client.authStore.clear(),s})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,s,n){let f={method:"POST",body:{identity:e,password:t}};f=Se("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",f,s,n);const d=f.autoRefreshThreshold;delete f.autoRefreshThreshold,f.autoRefresh||He(this.client);let y=await this.client.send(this.baseCrudPath+"/auth-with-password",f);return y=this.authResponse(y),d&&function(k,O,J,re){He(k);const ee=k.beforeSend,x=k.authStore.model,oe=k.authStore.onChange((R,I)=>{(!R||(I==null?void 0:I.id)!=(x==null?void 0:x.id)||(I!=null&&I.collectionId||x!=null&&x.collectionId)&&(I==null?void 0:I.collectionId)!=(x==null?void 0:x.collectionId))&&He(k)});k._resetAutoRefresh=function(){oe(),k.beforeSend=ee,delete k._resetAutoRefresh},k.beforeSend=async(R,I)=>{var W;const ie=k.authStore.token;if((W=I.query)!=null&&W.autoRefresh)return ee?ee(R,I):{url:R,sendOptions:I};let q=k.authStore.isValid;if(q&&vt(k.authStore.token,O))try{await J()}catch{q=!1}q||await re();const F=I.headers||{};for(let V in F)if(V.toLowerCase()=="authorization"&&ie==F[V]&&k.authStore.token){F[V]=k.authStore.token;break}return I.headers=F,ee?ee(R,I):{url:R,sendOptions:I}}}(this.client,d,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},f))),y}async authRefresh(e,t){let s={method:"POST"};return s=Se("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",s).then(this.authResponse.bind(this))}async requestPasswordReset(e,t,s){let n={method:"POST",body:{email:e}};return n=Se("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",n,t,s),this.client.send(this.baseCrudPath+"/request-password-reset",n).then(()=>!0)}async confirmPasswordReset(e,t,s,n,f){let d={method:"POST",body:{token:e,password:t,passwordConfirm:s}};return d=Se("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",d,n,f),this.client.send(this.baseCrudPath+"/confirm-password-reset",d).then(()=>!0)}}const Ht=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function St(b){if(b){b.query=b.query||{};for(let e in b)Ht.includes(e)||(b.query[e]=b[e],delete b[e])}}class Ct extends Le{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,s){var d;if(!e)throw new Error("topic must be set.");let n=e;if(s){St(s);const y="options="+encodeURIComponent(JSON.stringify({query:s.query,headers:s.headers}));n+=(n.includes("?")?"&":"?")+y}const f=function(y){const E=y;let k;try{k=JSON.parse(E==null?void 0:E.data)}catch{}t(k||{})};return this.subscriptions[n]||(this.subscriptions[n]=[]),this.subscriptions[n].push(f),this.isConnected?this.subscriptions[n].length===1?await this.submitSubscriptions():(d=this.eventSource)==null||d.addEventListener(n,f):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,f)}async unsubscribe(e){var s;let t=!1;if(e){const n=this.getSubscriptionsByTopic(e);for(let f in n)if(this.hasSubscriptionListeners(f)){for(let d of this.subscriptions[f])(s=this.eventSource)==null||s.removeEventListener(f,d);delete this.subscriptions[f],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var s;let t=!1;for(let n in this.subscriptions)if((n+"?").startsWith(e)){t=!0;for(let f of this.subscriptions[n])(s=this.eventSource)==null||s.removeEventListener(n,f);delete this.subscriptions[n]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var f;let s=!1;const n=this.getSubscriptionsByTopic(e);for(let d in n){if(!Array.isArray(this.subscriptions[d])||!this.subscriptions[d].length)continue;let y=!1;for(let E=this.subscriptions[d].length-1;E>=0;E--)this.subscriptions[d][E]===t&&(y=!0,delete this.subscriptions[d][E],this.subscriptions[d].splice(E,1),(f=this.eventSource)==null||f.removeEventListener(d,t));y&&(this.subscriptions[d].length||delete this.subscriptions[d],s||this.hasSubscriptionListeners(d)||(s=!0))}this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,s;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let n in this.subscriptions)if((s=this.subscriptions[n])!=null&&s.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let s in this.subscriptions)(s+"?").startsWith(e)&&(t[s]=this.subscriptions[s]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let s=3;for(;this.hasUnsentSubscriptions()&&s>0;)s--,await this.submitSubscriptions()}).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const s=this.getSubscriptionsByTopic("PB_CONNECT");for(let n in s)for(let f of s[n])f(e)}).catch(s=>{this.clientId="",this.connectErrorHandler(s)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let s of this.pendingConnects)s.reject(new Ce(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[]}}}class Vt extends Xe{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(e,t,s){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,s)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const s=Object.assign({},e,t);return super.getFullList(s)}async getList(e=1,t=30,s){return super.getList(e,t,s)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,s){return super.update(e,t,s).then(n=>{var f,d,y;return((f=this.client.authStore.model)==null?void 0:f.id)!==(n==null?void 0:n.id)||((d=this.client.authStore.model)==null?void 0:d.collectionId)!==this.collectionIdOrName&&((y=this.client.authStore.model)==null?void 0:y.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,n),n})}async delete(e,t){return super.delete(e,t).then(s=>{var n,f,d;return!s||((n=this.client.authStore.model)==null?void 0:n.id)!==e||((f=this.client.authStore.model)==null?void 0:f.collectionId)!==this.collectionIdOrName&&((d=this.client.authStore.model)==null?void 0:d.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),s})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}async authWithPassword(e,t,s,n){let f={method:"POST",body:{identity:e,password:t}};return f=Se("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",f,s,n),this.client.send(this.baseCollectionPath+"/auth-with-password",f).then(d=>this.authResponse(d))}async authWithOAuth2Code(e,t,s,n,f,d,y){let E={method:"POST",body:{provider:e,code:t,codeVerifier:s,redirectUrl:n,createData:f}};return E=Se("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",E,d,y),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",E).then(k=>this.authResponse(k))}async authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},s=(await this.listAuthMethods()).authProviders.find(E=>E.name===t.provider);if(!s)throw new Ce(new Error(`Missing or invalid provider "${t.provider}".`));const n=this.client.buildUrl("/api/oauth2-redirect"),f=new Ct(this.client);let d=null;function y(){d==null||d.close(),f.unsubscribe()}return t.urlCallback||(d=nt(void 0)),new Promise(async(E,k)=>{var O;try{await f.subscribe("@oauth2",async x=>{const oe=f.clientId;try{if(!x.state||oe!==x.state)throw new Error("State parameters don't match.");const R=Object.assign({},t);delete R.provider,delete R.scopes,delete R.createData,delete R.urlCallback;const I=await this.authWithOAuth2Code(s.name,x.code,s.codeVerifier,n,t.createData,R);E(I)}catch(R){k(new Ce(R))}y()});const J={state:f.clientId};(O=t.scopes)!=null&&O.length&&(J.scope=t.scopes.join(" "));const re=this._replaceQueryParams(s.authUrl+n,J);await(t.urlCallback||function(x){d?d.location.href=x:d=nt(x)})(re)}catch(J){y(),k(new Ce(J))}})}async authRefresh(e,t){let s={method:"POST"};return s=Se("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",s).then(n=>this.authResponse(n))}async requestPasswordReset(e,t,s){let n={method:"POST",body:{email:e}};return n=Se("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/request-password-reset",n).then(()=>!0)}async confirmPasswordReset(e,t,s,n,f){let d={method:"POST",body:{token:e,password:t,passwordConfirm:s}};return d=Se("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",d,n,f),this.client.send(this.baseCollectionPath+"/confirm-password-reset",d).then(()=>!0)}async requestVerification(e,t,s){let n={method:"POST",body:{email:e}};return n=Se("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/request-verification",n).then(()=>!0)}async confirmVerification(e,t,s){let n={method:"POST",body:{token:e}};return n=Se("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/confirm-verification",n).then(()=>!0)}async requestEmailChange(e,t,s){let n={method:"POST",body:{newEmail:e}};return n=Se("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/request-email-change",n).then(()=>!0)}async confirmEmailChange(e,t,s,n){let f={method:"POST",body:{token:e,password:t}};return f=Se("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",f,s,n),this.client.send(this.baseCollectionPath+"/confirm-email-change",f).then(()=>!0)}async listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}async unlinkExternalAuth(e,t,s){return s=Object.assign({method:"DELETE"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),s).then(()=>!0)}_replaceQueryParams(e,t={}){let s=e,n="";e.indexOf("?")>=0&&(s=e.substring(0,e.indexOf("?")),n=e.substring(e.indexOf("?")+1));const f={},d=n.split("&");for(const y of d){if(y=="")continue;const E=y.split("=");f[decodeURIComponent(E[0].replace(/\+/g," "))]=decodeURIComponent((E[1]||"").replace(/\+/g," "))}for(let y in t)t.hasOwnProperty(y)&&(t[y]==null?delete f[y]:f[y]=t[y]);n="";for(let y in f)f.hasOwnProperty(y)&&(n!=""&&(n+="&"),n+=encodeURIComponent(y.replace(/%20/g,"+"))+"="+encodeURIComponent(f[y].replace(/%20/g,"+")));return n!=""?s+"?"+n:s}}function nt(b){if(typeof window>"u"||!(window!=null&&window.open))throw new Ce(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,s=window.innerWidth,n=window.innerHeight;e=e>s?s:e,t=t>n?n:t;let f=s/2-e/2,d=n/2-t/2;return window.open(b,"popup_window","width="+e+",height="+t+",top="+d+",left="+f+",resizable,menubar=no")}class zt extends Xe{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,s){return s=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},s),this.client.send(this.baseCrudPath+"/import",s).then(()=>!0)}}class Wt extends Le{async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send("/api/logs",s)}async getOne(e,t){if(!e)throw new Ce({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class $t extends Le{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Jt extends Le{getUrl(e,t,s={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const n=[];n.push("api"),n.push("files"),n.push(encodeURIComponent(e.collectionId||e.collectionName)),n.push(encodeURIComponent(e.id)),n.push(encodeURIComponent(t));let f=this.client.buildUrl(n.join("/"));if(Object.keys(s).length){s.download===!1&&delete s.download;const d=new URLSearchParams(s);f+=(f.includes("?")?"&":"?")+d}return f}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Xt extends Le{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class Qt{constructor(e="/",t,s="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=s,this.authStore=t||new Ft,this.admins=new Kt(this),this.collections=new zt(this),this.files=new Jt(this),this.logs=new Wt(this),this.settings=new Gt(this),this.realtime=new Ct(this),this.health=new $t(this),this.backups=new Xt(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Vt(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let s in t){let n=t[s];switch(typeof n){case"boolean":case"number":n=""+n;break;case"string":n="'"+n.replace(/'/g,"\\'")+"'";break;default:n=n===null?"null":n instanceof Date?"'"+n.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(n).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+s+"}",n)}return e}getFileUrl(e,t,s={}){return this.files.getUrl(e,t,s)}buildUrl(e){var s;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(s=window.location.origin)!=null&&s.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let s=this.buildUrl(e);if(this.beforeSend){const n=Object.assign({},await this.beforeSend(s,t));n.url!==void 0||n.options!==void 0?(s=n.url||s,t=n.options||t):Object.keys(n).length&&(t=n,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const n=this.serializeQueryParams(t.query);n&&(s+=(s.includes("?")?"&":"?")+n),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(s,t).then(async n=>{let f={};try{f=await n.json()}catch{}if(this.afterSend&&(f=await this.afterSend(n,f)),n.status>=400)throw new Ce({url:n.url,status:n.status,data:f});return f}).catch(n=>{throw new Ce(n)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=this.convertToFormDataIfNeeded(t.body),St(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const s=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(s);const n=new AbortController;this.cancelControllers[s]=n,t.signal=n.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let s in e){const n=this.normalizeFormDataValue(e[s]),f=Array.isArray(n)?n:[n];if(f.length)for(const d of f)t.append(s,d);else t.append(s,"")}return t}normalizeFormDataValue(e){return e===null||typeof e!="object"||e instanceof Date||this.hasBlobField({data:e})||Array.isArray(e)&&!e.filter(t=>typeof t!="string").length?e:JSON.stringify(e)}hasBlobField(e){for(let t in e){const s=Array.isArray(e[t])?e[t]:[e[t]];for(let n of s)if(typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let s in e)if(s.toLowerCase()==t)return e[s];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const s in e){if(e[s]===null)continue;const n=e[s],f=encodeURIComponent(s);if(Array.isArray(n))for(const d of n)t.push(f+"="+encodeURIComponent(d));else n instanceof Date?t.push(f+"="+encodeURIComponent(n.toISOString())):typeof n!==null&&typeof n=="object"?t.push(f+"="+encodeURIComponent(JSON.stringify(n))):t.push(f+"="+encodeURIComponent(n))}return t.join("&")}}const rt="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20288%20288'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20%239a989e;%20stroke-width:%200px;%20}%20%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='m4.57,226.06C38.27,158.63,71.93,91.29,105.74,23.66c15.76-31.54,60.75-31.54,76.52,0l101.17,202.41c14.22,28.46-6.46,61.94-38.26,61.94H42.83c-31.8,0-52.48-33.48-38.26-61.94Z'/%3e%3c/svg%3e",ot="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20288%20288'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20%23f2a99d;%20stroke-width:%200px;%20}%20%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='m4.57,226.06C38.27,158.63,71.93,91.29,105.74,23.66c15.76-31.54,60.75-31.54,76.52,0l101.17,202.41c14.22,28.46-6.46,61.94-38.26,61.94H42.83c-31.8,0-52.48-33.48-38.26-61.94Z'/%3e%3c/svg%3e",Yt=""+new URL("../assets/KarateBlue.CqdpdrOE.avif",import.meta.url).href,Zt=""+new URL("../assets/KaratePink.DPKpILLM.avif",import.meta.url).href,es=""+new URL("../assets/KarateGreen.CpfLj3yD.avif",import.meta.url).href,ts=""+new URL("../assets/KarateYellow.DGpzy_ao.avif",import.meta.url).href,Ot=""+new URL("../assets/Ticket.CFqHXuZx.avif",import.meta.url).href;var ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function is(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var Et={exports:{}};(function(b){(function(e){var t,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",f=Math.ceil,d=Math.floor,y="[BigNumber Error] ",E=y+"Number primitive has more than 15 significant digits: ",k=1e14,O=14,J=9007199254740991,re=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ee=1e7,x=1e9;function oe(N){var T,B,U,S=v.prototype={constructor:v,toString:null,valueOf:null},K=new v(1),z=20,$=4,Y=-7,ae=21,we=-1e7,ce=1e7,pe=!1,ye=1,Oe=0,Pe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},ue="0123456789abcdefghijklmnopqrstuvwxyz";function v(i,r){var o,g,l,c,p,a,h,m,u=this;if(!(u instanceof v))return new v(i,r);if(r==null){if(i&&i._isBigNumber===!0){u.s=i.s,!i.c||i.e>ce?u.c=u.e=null:i.e<we?u.c=[u.e=0]:(u.e=i.e,u.c=i.c.slice());return}if((a=typeof i=="number")&&i*0==0){if(u.s=1/i<0?(i=-i,-1):1,i===~~i){for(c=0,p=i;p>=10;p/=10,c++);c>ce?u.c=u.e=null:(u.e=c,u.c=[i]);return}m=String(i)}else{if(!s.test(m=String(i)))return U(u,m,a);u.s=m.charCodeAt(0)==45?(m=m.slice(1),-1):1}(c=m.indexOf("."))>-1&&(m=m.replace(".","")),(p=m.search(/e/i))>0?(c<0&&(c=p),c+=+m.slice(p+1),m=m.substring(0,p)):c<0&&(c=m.length)}else{if(q(r,2,ue.length,"Base"),r==10)return u=new v(i),se(u,z+u.e+1,$);if(m=String(i),a=typeof i=="number"){if(i*0!=0)return U(u,m,a,r);if(u.s=1/i<0?(m=m.slice(1),-1):1,v.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(E+i)}else u.s=m.charCodeAt(0)===45?(m=m.slice(1),-1):1;for(o=ue.slice(0,r),c=p=0,h=m.length;p<h;p++)if(o.indexOf(g=m.charAt(p))<0){if(g=="."){if(p>c){c=h;continue}}else if(!l&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){l=!0,p=-1,c=0;continue}return U(u,String(i),a,r)}a=!1,m=B(m,r,10,u.s),(c=m.indexOf("."))>-1?m=m.replace(".",""):c=m.length}for(p=0;m.charCodeAt(p)===48;p++);for(h=m.length;m.charCodeAt(--h)===48;);if(m=m.slice(p,++h)){if(h-=p,a&&v.DEBUG&&h>15&&(i>J||i!==d(i)))throw Error(E+u.s*i);if((c=c-p-1)>ce)u.c=u.e=null;else if(c<we)u.c=[u.e=0];else{if(u.e=c,u.c=[],p=(c+1)%O,c<0&&(p+=O),p<h){for(p&&u.c.push(+m.slice(0,p)),h-=O;p<h;)u.c.push(+m.slice(p,p+=O));p=O-(m=m.slice(p)).length}else p-=h;for(;p--;m+="0");u.c.push(+m)}}else u.c=[u.e=0]}v.clone=oe,v.ROUND_UP=0,v.ROUND_DOWN=1,v.ROUND_CEIL=2,v.ROUND_FLOOR=3,v.ROUND_HALF_UP=4,v.ROUND_HALF_DOWN=5,v.ROUND_HALF_EVEN=6,v.ROUND_HALF_CEIL=7,v.ROUND_HALF_FLOOR=8,v.EUCLID=9,v.config=v.set=function(i){var r,o;if(i!=null)if(typeof i=="object"){if(i.hasOwnProperty(r="DECIMAL_PLACES")&&(o=i[r],q(o,0,x,r),z=o),i.hasOwnProperty(r="ROUNDING_MODE")&&(o=i[r],q(o,0,8,r),$=o),i.hasOwnProperty(r="EXPONENTIAL_AT")&&(o=i[r],o&&o.pop?(q(o[0],-x,0,r),q(o[1],0,x,r),Y=o[0],ae=o[1]):(q(o,-x,x,r),Y=-(ae=o<0?-o:o))),i.hasOwnProperty(r="RANGE"))if(o=i[r],o&&o.pop)q(o[0],-x,-1,r),q(o[1],1,x,r),we=o[0],ce=o[1];else if(q(o,-x,x,r),o)we=-(ce=o<0?-o:o);else throw Error(y+r+" cannot be zero: "+o);if(i.hasOwnProperty(r="CRYPTO"))if(o=i[r],o===!!o)if(o)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))pe=o;else throw pe=!o,Error(y+"crypto unavailable");else pe=o;else throw Error(y+r+" not true or false: "+o);if(i.hasOwnProperty(r="MODULO_MODE")&&(o=i[r],q(o,0,9,r),ye=o),i.hasOwnProperty(r="POW_PRECISION")&&(o=i[r],q(o,0,x,r),Oe=o),i.hasOwnProperty(r="FORMAT"))if(o=i[r],typeof o=="object")Pe=o;else throw Error(y+r+" not an object: "+o);if(i.hasOwnProperty(r="ALPHABET"))if(o=i[r],typeof o=="string"&&!/^.$|[+-.\s]|(.).*\1/.test(o))ue=o;else throw Error(y+r+" invalid: "+o)}else throw Error(y+"Object expected: "+i);return{DECIMAL_PLACES:z,ROUNDING_MODE:$,EXPONENTIAL_AT:[Y,ae],RANGE:[we,ce],CRYPTO:pe,MODULO_MODE:ye,POW_PRECISION:Oe,FORMAT:Pe,ALPHABET:ue}},v.isBigNumber=function(i){if(!i||i._isBigNumber!==!0)return!1;if(!v.DEBUG)return!0;var r,o,g=i.c,l=i.e,c=i.s;e:if({}.toString.call(g)=="[object Array]"){if((c===1||c===-1)&&l>=-x&&l<=x&&l===d(l)){if(g[0]===0){if(l===0&&g.length===1)return!0;break e}if(r=(l+1)%O,r<1&&(r+=O),String(g[0]).length==r){for(r=0;r<g.length;r++)if(o=g[r],o<0||o>=k||o!==d(o))break e;if(o!==0)return!0}}}else if(g===null&&l===null&&(c===null||c===1||c===-1))return!0;throw Error(y+"Invalid BigNumber: "+i)},v.maximum=v.max=function(){return xe(arguments,S.lt)},v.minimum=v.min=function(){return xe(arguments,S.gt)},v.random=function(){var i=9007199254740992,r=Math.random()*i&2097151?function(){return d(Math.random()*i)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(o){var g,l,c,p,a,h=0,m=[],u=new v(K);if(o==null?o=z:q(o,0,x),p=f(o/O),pe)if(crypto.getRandomValues){for(g=crypto.getRandomValues(new Uint32Array(p*=2));h<p;)a=g[h]*131072+(g[h+1]>>>11),a>=9e15?(l=crypto.getRandomValues(new Uint32Array(2)),g[h]=l[0],g[h+1]=l[1]):(m.push(a%1e14),h+=2);h=p/2}else if(crypto.randomBytes){for(g=crypto.randomBytes(p*=7);h<p;)a=(g[h]&31)*281474976710656+g[h+1]*1099511627776+g[h+2]*4294967296+g[h+3]*16777216+(g[h+4]<<16)+(g[h+5]<<8)+g[h+6],a>=9e15?crypto.randomBytes(7).copy(g,h):(m.push(a%1e14),h+=7);h=p/7}else throw pe=!1,Error(y+"crypto unavailable");if(!pe)for(;h<p;)a=r(),a<9e15&&(m[h++]=a%1e14);for(p=m[--h],o%=O,p&&o&&(a=re[O-o],m[h]=d(p/a)*a);m[h]===0;m.pop(),h--);if(h<0)m=[c=0];else{for(c=-1;m[0]===0;m.splice(0,1),c-=O);for(h=1,a=m[0];a>=10;a/=10,h++);h<O&&(c-=O-h)}return u.e=c,u.c=m,u}}(),v.sum=function(){for(var i=1,r=arguments,o=new v(r[0]);i<r.length;)o=o.plus(r[i++]);return o},B=function(){var i="0123456789";function r(o,g,l,c){for(var p,a=[0],h,m=0,u=o.length;m<u;){for(h=a.length;h--;a[h]*=g);for(a[0]+=c.indexOf(o.charAt(m++)),p=0;p<a.length;p++)a[p]>l-1&&(a[p+1]==null&&(a[p+1]=0),a[p+1]+=a[p]/l|0,a[p]%=l)}return a.reverse()}return function(o,g,l,c,p){var a,h,m,u,w,C,_,G,Z=o.indexOf("."),ne=z,M=$;for(Z>=0&&(u=Oe,Oe=0,o=o.replace(".",""),G=new v(g),C=G.pow(o.length-Z),Oe=u,G.c=r(V(I(C.c),C.e,"0"),10,l,i),G.e=G.c.length),_=r(o,g,l,p?(a=ue,i):(a=i,ue)),m=u=_.length;_[--u]==0;_.pop());if(!_[0])return a.charAt(0);if(Z<0?--m:(C.c=_,C.e=m,C.s=c,C=T(C,G,ne,M,l),_=C.c,w=C.r,m=C.e),h=m+ne+1,Z=_[h],u=l/2,w=w||h<0||_[h+1]!=null,w=M<4?(Z!=null||w)&&(M==0||M==(C.s<0?3:2)):Z>u||Z==u&&(M==4||w||M==6&&_[h-1]&1||M==(C.s<0?8:7)),h<1||!_[0])o=w?V(a.charAt(1),-ne,a.charAt(0)):a.charAt(0);else{if(_.length=h,w)for(--l;++_[--h]>l;)_[h]=0,h||(++m,_=[1].concat(_));for(u=_.length;!_[--u];);for(Z=0,o="";Z<=u;o+=a.charAt(_[Z++]));o=V(o,m,a.charAt(0))}return o}}(),T=function(){function i(g,l,c){var p,a,h,m,u=0,w=g.length,C=l%ee,_=l/ee|0;for(g=g.slice();w--;)h=g[w]%ee,m=g[w]/ee|0,p=_*h+m*C,a=C*h+p%ee*ee+u,u=(a/c|0)+(p/ee|0)+_*m,g[w]=a%c;return u&&(g=[u].concat(g)),g}function r(g,l,c,p){var a,h;if(c!=p)h=c>p?1:-1;else for(a=h=0;a<c;a++)if(g[a]!=l[a]){h=g[a]>l[a]?1:-1;break}return h}function o(g,l,c,p){for(var a=0;c--;)g[c]-=a,a=g[c]<l[c]?1:0,g[c]=a*p+g[c]-l[c];for(;!g[0]&&g.length>1;g.splice(0,1));}return function(g,l,c,p,a){var h,m,u,w,C,_,G,Z,ne,M,H,le,Te,qe,Ie,ve,Ae,me=g.s==l.s?1:-1,he=g.c,X=l.c;if(!he||!he[0]||!X||!X[0])return new v(!g.s||!l.s||(he?X&&he[0]==X[0]:!X)?NaN:he&&he[0]==0||!X?me*0:me/0);for(Z=new v(me),ne=Z.c=[],m=g.e-l.e,me=c+m+1,a||(a=k,m=R(g.e/O)-R(l.e/O),me=me/O|0),u=0;X[u]==(he[u]||0);u++);if(X[u]>(he[u]||0)&&m--,me<0)ne.push(1),w=!0;else{for(qe=he.length,ve=X.length,u=0,me+=2,C=d(a/(X[0]+1)),C>1&&(X=i(X,C,a),he=i(he,C,a),ve=X.length,qe=he.length),Te=ve,M=he.slice(0,ve),H=M.length;H<ve;M[H++]=0);Ae=X.slice(),Ae=[0].concat(Ae),Ie=X[0],X[1]>=a/2&&Ie++;do{if(C=0,h=r(X,M,ve,H),h<0){if(le=M[0],ve!=H&&(le=le*a+(M[1]||0)),C=d(le/Ie),C>1)for(C>=a&&(C=a-1),_=i(X,C,a),G=_.length,H=M.length;r(_,M,G,H)==1;)C--,o(_,ve<G?Ae:X,G,a),G=_.length,h=1;else C==0&&(h=C=1),_=X.slice(),G=_.length;if(G<H&&(_=[0].concat(_)),o(M,_,H,a),H=M.length,h==-1)for(;r(X,M,ve,H)<1;)C++,o(M,ve<H?Ae:X,H,a),H=M.length}else h===0&&(C++,M=[0]);ne[u++]=C,M[0]?M[H++]=he[Te]||0:(M=[he[Te]],H=1)}while((Te++<qe||M[0]!=null)&&me--);w=M[0]!=null,ne[0]||ne.splice(0,1)}if(a==k){for(u=1,me=ne[0];me>=10;me/=10,u++);se(Z,c+(Z.e=u+m*O-1)+1,p,w)}else Z.e=m,Z.r=+w;return Z}}();function _e(i,r,o,g){var l,c,p,a,h;if(o==null?o=$:q(o,0,8),!i.c)return i.toString();if(l=i.c[0],p=i.e,r==null)h=I(i.c),h=g==1||g==2&&(p<=Y||p>=ae)?W(h,p):V(h,p,"0");else if(i=se(new v(i),r,o),c=i.e,h=I(i.c),a=h.length,g==1||g==2&&(r<=c||c<=Y)){for(;a<r;h+="0",a++);h=W(h,c)}else if(r-=p,h=V(h,c,"0"),c+1>a){if(--r>0)for(h+=".";r--;h+="0");}else if(r+=c-a,r>0)for(c+1==a&&(h+=".");r--;h+="0");return i.s<0&&l?"-"+h:h}function xe(i,r){for(var o,g=1,l=new v(i[0]);g<i.length;g++)if(o=new v(i[g]),o.s)r.call(l,o)&&(l=o);else{l=o;break}return l}function Ee(i,r,o){for(var g=1,l=r.length;!r[--l];r.pop());for(l=r[0];l>=10;l/=10,g++);return(o=g+o*O-1)>ce?i.c=i.e=null:o<we?i.c=[i.e=0]:(i.e=o,i.c=r),i}U=function(){var i=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,o=/^\.([^.]+)$/,g=/^-?(Infinity|NaN)$/,l=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(c,p,a,h){var m,u=a?p:p.replace(l,"");if(g.test(u))c.s=isNaN(u)?null:u<0?-1:1;else{if(!a&&(u=u.replace(i,function(w,C,_){return m=(_=_.toLowerCase())=="x"?16:_=="b"?2:8,!h||h==m?C:w}),h&&(m=h,u=u.replace(r,"$1").replace(o,"0.$1")),p!=u))return new v(u,m);if(v.DEBUG)throw Error(y+"Not a"+(h?" base "+h:"")+" number: "+p);c.s=null}c.c=c.e=null}}();function se(i,r,o,g){var l,c,p,a,h,m,u,w=i.c,C=re;if(w){e:{for(l=1,a=w[0];a>=10;a/=10,l++);if(c=r-l,c<0)c+=O,p=r,h=w[m=0],u=h/C[l-p-1]%10|0;else if(m=f((c+1)/O),m>=w.length)if(g){for(;w.length<=m;w.push(0));h=u=0,l=1,c%=O,p=c-O+1}else break e;else{for(h=a=w[m],l=1;a>=10;a/=10,l++);c%=O,p=c-O+l,u=p<0?0:h/C[l-p-1]%10|0}if(g=g||r<0||w[m+1]!=null||(p<0?h:h%C[l-p-1]),g=o<4?(u||g)&&(o==0||o==(i.s<0?3:2)):u>5||u==5&&(o==4||g||o==6&&(c>0?p>0?h/C[l-p]:0:w[m-1])%10&1||o==(i.s<0?8:7)),r<1||!w[0])return w.length=0,g?(r-=i.e+1,w[0]=C[(O-r%O)%O],i.e=-r||0):w[0]=i.e=0,i;if(c==0?(w.length=m,a=1,m--):(w.length=m+1,a=C[O-c],w[m]=p>0?d(h/C[l-p]%C[p])*a:0),g)for(;;)if(m==0){for(c=1,p=w[0];p>=10;p/=10,c++);for(p=w[0]+=a,a=1;p>=10;p/=10,a++);c!=a&&(i.e++,w[0]==k&&(w[0]=1));break}else{if(w[m]+=a,w[m]!=k)break;w[m--]=0,a=1}for(c=w.length;w[--c]===0;w.pop());}i.e>ce?i.c=i.e=null:i.e<we&&(i.c=[i.e=0])}return i}function be(i){var r,o=i.e;return o===null?i.toString():(r=I(i.c),r=o<=Y||o>=ae?W(r,o):V(r,o,"0"),i.s<0?"-"+r:r)}return S.absoluteValue=S.abs=function(){var i=new v(this);return i.s<0&&(i.s=1),i},S.comparedTo=function(i,r){return ie(this,new v(i,r))},S.decimalPlaces=S.dp=function(i,r){var o,g,l,c=this;if(i!=null)return q(i,0,x),r==null?r=$:q(r,0,8),se(new v(c),i+c.e+1,r);if(!(o=c.c))return null;if(g=((l=o.length-1)-R(this.e/O))*O,l=o[l])for(;l%10==0;l/=10,g--);return g<0&&(g=0),g},S.dividedBy=S.div=function(i,r){return T(this,new v(i,r),z,$)},S.dividedToIntegerBy=S.idiv=function(i,r){return T(this,new v(i,r),0,1)},S.exponentiatedBy=S.pow=function(i,r){var o,g,l,c,p,a,h,m,u,w=this;if(i=new v(i),i.c&&!i.isInteger())throw Error(y+"Exponent not an integer: "+be(i));if(r!=null&&(r=new v(r)),a=i.e>14,!w.c||!w.c[0]||w.c[0]==1&&!w.e&&w.c.length==1||!i.c||!i.c[0])return u=new v(Math.pow(+be(w),a?2-F(i):+be(i))),r?u.mod(r):u;if(h=i.s<0,r){if(r.c?!r.c[0]:!r.s)return new v(NaN);g=!h&&w.isInteger()&&r.isInteger(),g&&(w=w.mod(r))}else{if(i.e>9&&(w.e>0||w.e<-1||(w.e==0?w.c[0]>1||a&&w.c[1]>=24e7:w.c[0]<8e13||a&&w.c[0]<=9999975e7)))return c=w.s<0&&F(i)?-0:0,w.e>-1&&(c=1/c),new v(h?1/c:c);Oe&&(c=f(Oe/O+2))}for(a?(o=new v(.5),h&&(i.s=1),m=F(i)):(l=Math.abs(+be(i)),m=l%2),u=new v(K);;){if(m){if(u=u.times(w),!u.c)break;c?u.c.length>c&&(u.c.length=c):g&&(u=u.mod(r))}if(l){if(l=d(l/2),l===0)break;m=l%2}else if(i=i.times(o),se(i,i.e+1,1),i.e>14)m=F(i);else{if(l=+be(i),l===0)break;m=l%2}w=w.times(w),c?w.c&&w.c.length>c&&(w.c.length=c):g&&(w=w.mod(r))}return g?u:(h&&(u=K.div(u)),r?u.mod(r):c?se(u,Oe,$,p):u)},S.integerValue=function(i){var r=new v(this);return i==null?i=$:q(i,0,8),se(r,r.e+1,i)},S.isEqualTo=S.eq=function(i,r){return ie(this,new v(i,r))===0},S.isFinite=function(){return!!this.c},S.isGreaterThan=S.gt=function(i,r){return ie(this,new v(i,r))>0},S.isGreaterThanOrEqualTo=S.gte=function(i,r){return(r=ie(this,new v(i,r)))===1||r===0},S.isInteger=function(){return!!this.c&&R(this.e/O)>this.c.length-2},S.isLessThan=S.lt=function(i,r){return ie(this,new v(i,r))<0},S.isLessThanOrEqualTo=S.lte=function(i,r){return(r=ie(this,new v(i,r)))===-1||r===0},S.isNaN=function(){return!this.s},S.isNegative=function(){return this.s<0},S.isPositive=function(){return this.s>0},S.isZero=function(){return!!this.c&&this.c[0]==0},S.minus=function(i,r){var o,g,l,c,p=this,a=p.s;if(i=new v(i,r),r=i.s,!a||!r)return new v(NaN);if(a!=r)return i.s=-r,p.plus(i);var h=p.e/O,m=i.e/O,u=p.c,w=i.c;if(!h||!m){if(!u||!w)return u?(i.s=-r,i):new v(w?p:NaN);if(!u[0]||!w[0])return w[0]?(i.s=-r,i):new v(u[0]?p:$==3?-0:0)}if(h=R(h),m=R(m),u=u.slice(),a=h-m){for((c=a<0)?(a=-a,l=u):(m=h,l=w),l.reverse(),r=a;r--;l.push(0));l.reverse()}else for(g=(c=(a=u.length)<(r=w.length))?a:r,a=r=0;r<g;r++)if(u[r]!=w[r]){c=u[r]<w[r];break}if(c&&(l=u,u=w,w=l,i.s=-i.s),r=(g=w.length)-(o=u.length),r>0)for(;r--;u[o++]=0);for(r=k-1;g>a;){if(u[--g]<w[g]){for(o=g;o&&!u[--o];u[o]=r);--u[o],u[g]+=k}u[g]-=w[g]}for(;u[0]==0;u.splice(0,1),--m);return u[0]?Ee(i,u,m):(i.s=$==3?-1:1,i.c=[i.e=0],i)},S.modulo=S.mod=function(i,r){var o,g,l=this;return i=new v(i,r),!l.c||!i.s||i.c&&!i.c[0]?new v(NaN):!i.c||l.c&&!l.c[0]?new v(l):(ye==9?(g=i.s,i.s=1,o=T(l,i,0,3),i.s=g,o.s*=g):o=T(l,i,0,ye),i=l.minus(o.times(i)),!i.c[0]&&ye==1&&(i.s=l.s),i)},S.multipliedBy=S.times=function(i,r){var o,g,l,c,p,a,h,m,u,w,C,_,G,Z,ne,M=this,H=M.c,le=(i=new v(i,r)).c;if(!H||!le||!H[0]||!le[0])return!M.s||!i.s||H&&!H[0]&&!le||le&&!le[0]&&!H?i.c=i.e=i.s=null:(i.s*=M.s,!H||!le?i.c=i.e=null:(i.c=[0],i.e=0)),i;for(g=R(M.e/O)+R(i.e/O),i.s*=M.s,h=H.length,w=le.length,h<w&&(G=H,H=le,le=G,l=h,h=w,w=l),l=h+w,G=[];l--;G.push(0));for(Z=k,ne=ee,l=w;--l>=0;){for(o=0,C=le[l]%ne,_=le[l]/ne|0,p=h,c=l+p;c>l;)m=H[--p]%ne,u=H[p]/ne|0,a=_*m+u*C,m=C*m+a%ne*ne+G[c]+o,o=(m/Z|0)+(a/ne|0)+_*u,G[c--]=m%Z;G[c]=o}return o?++g:G.splice(0,1),Ee(i,G,g)},S.negated=function(){var i=new v(this);return i.s=-i.s||null,i},S.plus=function(i,r){var o,g=this,l=g.s;if(i=new v(i,r),r=i.s,!l||!r)return new v(NaN);if(l!=r)return i.s=-r,g.minus(i);var c=g.e/O,p=i.e/O,a=g.c,h=i.c;if(!c||!p){if(!a||!h)return new v(l/0);if(!a[0]||!h[0])return h[0]?i:new v(a[0]?g:l*0)}if(c=R(c),p=R(p),a=a.slice(),l=c-p){for(l>0?(p=c,o=h):(l=-l,o=a),o.reverse();l--;o.push(0));o.reverse()}for(l=a.length,r=h.length,l-r<0&&(o=h,h=a,a=o,r=l),l=0;r;)l=(a[--r]=a[r]+h[r]+l)/k|0,a[r]=k===a[r]?0:a[r]%k;return l&&(a=[l].concat(a),++p),Ee(i,a,p)},S.precision=S.sd=function(i,r){var o,g,l,c=this;if(i!=null&&i!==!!i)return q(i,1,x),r==null?r=$:q(r,0,8),se(new v(c),i,r);if(!(o=c.c))return null;if(l=o.length-1,g=l*O+1,l=o[l]){for(;l%10==0;l/=10,g--);for(l=o[0];l>=10;l/=10,g++);}return i&&c.e+1>g&&(g=c.e+1),g},S.shiftedBy=function(i){return q(i,-J,J),this.times("1e"+i)},S.squareRoot=S.sqrt=function(){var i,r,o,g,l,c=this,p=c.c,a=c.s,h=c.e,m=z+4,u=new v("0.5");if(a!==1||!p||!p[0])return new v(!a||a<0&&(!p||p[0])?NaN:p?c:1/0);if(a=Math.sqrt(+be(c)),a==0||a==1/0?(r=I(p),(r.length+h)%2==0&&(r+="0"),a=Math.sqrt(+r),h=R((h+1)/2)-(h<0||h%2),a==1/0?r="1e"+h:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+h),o=new v(r)):o=new v(a+""),o.c[0]){for(h=o.e,a=h+m,a<3&&(a=0);;)if(l=o,o=u.times(l.plus(T(c,l,m,1))),I(l.c).slice(0,a)===(r=I(o.c)).slice(0,a))if(o.e<h&&--a,r=r.slice(a-3,a+1),r=="9999"||!g&&r=="4999"){if(!g&&(se(l,l.e+z+2,0),l.times(l).eq(c))){o=l;break}m+=4,a+=4,g=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(se(o,o.e+z+2,1),i=!o.times(o).eq(c));break}}return se(o,o.e+z+1,$,i)},S.toExponential=function(i,r){return i!=null&&(q(i,0,x),i++),_e(this,i,r,1)},S.toFixed=function(i,r){return i!=null&&(q(i,0,x),i=i+this.e+1),_e(this,i,r)},S.toFormat=function(i,r,o){var g,l=this;if(o==null)i!=null&&r&&typeof r=="object"?(o=r,r=null):i&&typeof i=="object"?(o=i,i=r=null):o=Pe;else if(typeof o!="object")throw Error(y+"Argument not an object: "+o);if(g=l.toFixed(i,r),l.c){var c,p=g.split("."),a=+o.groupSize,h=+o.secondaryGroupSize,m=o.groupSeparator||"",u=p[0],w=p[1],C=l.s<0,_=C?u.slice(1):u,G=_.length;if(h&&(c=a,a=h,h=c,G-=c),a>0&&G>0){for(c=G%a||a,u=_.substr(0,c);c<G;c+=a)u+=m+_.substr(c,a);h>0&&(u+=m+_.slice(c)),C&&(u="-"+u)}g=w?u+(o.decimalSeparator||"")+((h=+o.fractionGroupSize)?w.replace(new RegExp("\\d{"+h+"}\\B","g"),"$&"+(o.fractionGroupSeparator||"")):w):u}return(o.prefix||"")+g+(o.suffix||"")},S.toFraction=function(i){var r,o,g,l,c,p,a,h,m,u,w,C,_=this,G=_.c;if(i!=null&&(a=new v(i),!a.isInteger()&&(a.c||a.s!==1)||a.lt(K)))throw Error(y+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+be(a));if(!G)return new v(_);for(r=new v(K),m=o=new v(K),g=h=new v(K),C=I(G),c=r.e=C.length-_.e-1,r.c[0]=re[(p=c%O)<0?O+p:p],i=!i||a.comparedTo(r)>0?c>0?r:m:a,p=ce,ce=1/0,a=new v(C),h.c[0]=0;u=T(a,r,0,1),l=o.plus(u.times(g)),l.comparedTo(i)!=1;)o=g,g=l,m=h.plus(u.times(l=m)),h=l,r=a.minus(u.times(l=r)),a=l;return l=T(i.minus(o),g,0,1),h=h.plus(l.times(m)),o=o.plus(l.times(g)),h.s=m.s=_.s,c=c*2,w=T(m,g,c,$).minus(_).abs().comparedTo(T(h,o,c,$).minus(_).abs())<1?[m,g]:[h,o],ce=p,w},S.toNumber=function(){return+be(this)},S.toPrecision=function(i,r){return i!=null&&q(i,1,x),_e(this,i,r,2)},S.toString=function(i){var r,o=this,g=o.s,l=o.e;return l===null?g?(r="Infinity",g<0&&(r="-"+r)):r="NaN":(i==null?r=l<=Y||l>=ae?W(I(o.c),l):V(I(o.c),l,"0"):i===10?(o=se(new v(o),z+l+1,$),r=V(I(o.c),o.e,"0")):(q(i,2,ue.length,"Base"),r=B(V(I(o.c),l,"0"),10,i,g,!0)),g<0&&o.c[0]&&(r="-"+r)),r},S.valueOf=S.toJSON=function(){return be(this)},S._isBigNumber=!0,n&&(S[Symbol.toStringTag]="BigNumber",S[Symbol.for("nodejs.util.inspect.custom")]=S.valueOf),N!=null&&v.set(N),v}function R(N){var T=N|0;return N>0||N===T?T:T-1}function I(N){for(var T,B,U=1,S=N.length,K=N[0]+"";U<S;){for(T=N[U++]+"",B=O-T.length;B--;T="0"+T);K+=T}for(S=K.length;K.charCodeAt(--S)===48;);return K.slice(0,S+1||1)}function ie(N,T){var B,U,S=N.c,K=T.c,z=N.s,$=T.s,Y=N.e,ae=T.e;if(!z||!$)return null;if(B=S&&!S[0],U=K&&!K[0],B||U)return B?U?0:-$:z;if(z!=$)return z;if(B=z<0,U=Y==ae,!S||!K)return U?0:!S^B?1:-1;if(!U)return Y>ae^B?1:-1;for($=(Y=S.length)<(ae=K.length)?Y:ae,z=0;z<$;z++)if(S[z]!=K[z])return S[z]>K[z]^B?1:-1;return Y==ae?0:Y>ae^B?1:-1}function q(N,T,B,U){if(N<T||N>B||N!==d(N))throw Error(y+(U||"Argument")+(typeof N=="number"?N<T||N>B?" out of range: ":" not an integer: ":" not a primitive number: ")+String(N))}function F(N){var T=N.c.length-1;return R(N.e/O)==T&&N.c[T]%2!=0}function W(N,T){return(N.length>1?N.charAt(0)+"."+N.slice(1):N)+(T<0?"e":"e+")+T}function V(N,T,B){var U,S;if(T<0){for(S=B+".";++T;S+=B);N=S+N}else if(U=N.length,++T>U){for(S=B,T-=U;--T;S+=B);N+=S}else T<U&&(N=N.slice(0,T)+"."+N.slice(T));return N}t=oe(),t.default=t.BigNumber=t,b.exports?b.exports=t:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=t)})(ss)})(Et);var ns=Et.exports,te=ns;function Je(b){var e={"-18":"wei","-15":"kwei","-12":"mwei","-9":"gwei","-6":"szabo","-3":"finney",1:"ether",3:"kether",6:"mether",9:"gether",12:"tether"};return typeof b=="string"&&(b=b.trim().toLowerCase()),b!==void 0&&!isNaN(b)&&(b=e[b]),b}function rs(b,e){if(b===void 0)throw TypeError("value is required");if(e=Je(e),e===void 0)throw TypeError("unit is required");var t=new te(b);if(e==="eth"&&(e="ether"),e==="wei")return t.times(new te(1e-18));if(e==="kwei")return t.times(new te(1e-15));if(e==="mwei")return t.times(new te(1e-12));if(e==="gwei")return t.times(new te(1e-9));if(e==="szabo")return t.times(new te(1e-6));if(e==="finney")return t.times(new te(.001));if(e==="ether")return t.times(new te(1));if(e==="kether")return t.times(new te(1e3));if(e==="mether")return t.times(new te(1e6));if(e==="gether")return t.times(new te(1e9));if(e==="tether")return t.times(new te(1e12));throw TypeError("Invalid unit")}function os(b,e,t){e=Je(e),t=Je(t);var s=rs(b,e);e==="eth"&&(e="ether"),t==="eth"&&(t="ether");var n={wei:null,kwei:null,mwei:null,gwei:null,szabo:null,finney:null,ether:null,kether:null,mether:null,gether:null,tether:null};if(n[e]=new te(b).toString(10),e!=="wei"&&(n.wei=s.times(new te(1e18)).toString(10)),e!=="kwei"&&(n.kwei=s.times(new te(1e15)).toString(10)),e!=="mwei"&&(n.mwei=s.times(new te(1e12)).toString(10)),e!=="gwei"&&(n.gwei=s.times(new te(1e9)).toString(10)),e!=="szabo"&&(n.szabo=s.times(new te(1e6)).toString(10)),e!=="finney"&&(n.finney=s.times(new te(1e3)).toString(10)),e!=="ether"&&(n.ether=s.times(new te(1)).toString(10)),e!=="kether"&&(n.kether=s.times(new te(.001)).toString(10)),e!=="mether"&&(n.mether=s.times(new te(1e-6)).toString(10)),e!=="gether"&&(n.gether=s.times(new te(1e-9)).toString(10)),e!=="tether"&&(n.tether=s.times(new te(1e-12)).toString(10)),t){if(n[t]===void 0)throw TypeError("Invalid unit");return n[t]}return n}var as=os;const at=is(as);function lt(b){let e,t=at(b[0].minimumGas,"wei","gwei")+"",s,n;return{c(){e=D("p"),s=De(t),n=De(" gwei"),this.h()},l(f){e=j(f,"P",{class:!0});var d=Q(e);s=je(d,t),n=je(d," gwei"),d.forEach(L),this.h()},h(){A(e,"class","truncate text-[hsl(var(--twc-cardSubBodyColor))]")},m(f,d){ge(f,e,d),P(e,s),P(e,n)},p(f,d){d&1&&t!==(t=at(f[0].minimumGas,"wei","gwei")+"")&&Me(s,t)},d(f){f&&L(e)}}}function ls(b){let e,t,s,n="prover",f,d,y,E,k,O,J,re=`<img src="${Ot}" class="icon-small w-8 mr-2" alt="red karate uniform icon"/> <p class="">min proof fee</p>`,ee,x,oe,R,I,ie=`<img src="${qt}" class="icon-small w-8 mr-2" alt="red karate uniform icon"/> <p class="">address</p>`,q,F,W,V=b[0].url+"",N,T=b[0].minimumGas!==void 0&&lt(b);return{c(){e=D("div"),t=D("div"),s=D("h3"),s.textContent=n,f=fe(),d=D("img"),E=fe(),k=D("div"),O=D("div"),J=D("div"),J.innerHTML=re,ee=fe(),x=D("div"),T&&T.c(),oe=fe(),R=D("div"),I=D("div"),I.innerHTML=ie,q=fe(),F=D("div"),W=D("p"),N=De(V),this.h()},l(B){e=j(B,"DIV",{class:!0});var U=Q(e);t=j(U,"DIV",{class:!0});var S=Q(t);s=j(S,"H3",{class:!0,"data-svelte-h":!0}),Ue(s)!=="svelte-1cfb05m"&&(s.textContent=n),f=de(S),d=j(S,"IMG",{src:!0,alt:!0}),S.forEach(L),E=de(U),k=j(U,"DIV",{class:!0});var K=Q(k);O=j(K,"DIV",{class:!0});var z=Q(O);J=j(z,"DIV",{class:!0,"data-svelte-h":!0}),Ue(J)!=="svelte-1n8nnor"&&(J.innerHTML=re),ee=de(z),x=j(z,"DIV",{class:!0});var $=Q(x);T&&T.l($),$.forEach(L),z.forEach(L),oe=de(K),R=j(K,"DIV",{class:!0});var Y=Q(R);I=j(Y,"DIV",{class:!0,"data-svelte-h":!0}),Ue(I)!=="svelte-3g24rn"&&(I.innerHTML=ie),q=de(Y),F=j(Y,"DIV",{class:!0});var ae=Q(F);W=j(ae,"P",{class:!0});var we=Q(W);N=je(we,V),we.forEach(L),ae.forEach(L),Y.forEach(L),K.forEach(L),U.forEach(L),this.h()},h(){A(s,"class","modal-title font-bold text-xl text-[#E53325]"),Re(d.src,y=b[1])||A(d,"src",y),A(d,"alt","icon"),A(t,"class","w-[85px]"),A(J,"class","flex flex-col items-start"),A(x,"class","flex flex-col text-left"),A(O,"class","flex flex-col items-start"),A(I,"class","flex flex-col items-start"),A(W,"class","truncate text-[hsl(var(--twc-cardSubBodyColor))]"),A(F,"class","flex flex-col text-left"),A(R,"class","flex flex-col items-start"),A(k,"class","flex flex-col items-start mt-4 w-[225px] ml-auto card-subbody overflow-clip gap-2"),A(e,"class","modal shadow-md flex content-between items-center justify-around flex-row svelte-1vrmzm5")},m(B,U){ge(B,e,U),P(e,t),P(t,s),P(t,f),P(t,d),P(e,E),P(e,k),P(k,O),P(O,J),P(O,ee),P(O,x),T&&T.m(x,null),P(k,oe),P(k,R),P(R,I),P(R,q),P(R,F),P(F,W),P(W,N)},p(B,[U]){U&2&&!Re(d.src,y=B[1])&&A(d,"src",y),B[0].minimumGas!==void 0?T?T.p(B,U):(T=lt(B),T.c(),T.m(x,null)):T&&(T.d(1),T=null),U&1&&V!==(V=B[0].url+"")&&Me(N,V)},i:Ye,o:Ye,d(B){B&&L(e),T&&T.d()}}}function cs(b,e,t){let{endpoint:s}=e,n;b.$$set=f=>{"endpoint"in f&&t(0,s=f.endpoint)};{const f=Math.floor(Math.random()*10);f===0?t(1,n=Lt):f>=1&&f<=2?t(1,n=es):f>=3&&f<=4?t(1,n=ts):f>=5&&f<=7?t(1,n=Yt):t(1,n=Zt)}return[s,n]}class Tt extends mt{constructor(e){super(),gt(this,e,cs,ls,pt,{endpoint:0})}}const us=""+new URL("../assets/CheckMark.CZlts7nq.avif",import.meta.url).href,hs=""+new URL("../assets/Copy.ApILFNa4.avif",import.meta.url).href,fs=""+new URL("../assets/Submit.CeHygA8T.avif",import.meta.url).href,{document:Ge}=Nt;function ct(b,e,t){const s=b.slice();return s[18]=e[t],s}function ut(b){let e,t;return{c(){e=D("span"),t=De(b[2]),this.h()},l(s){e=j(s,"SPAN",{class:!0});var n=Q(e);t=je(n,b[2]),n.forEach(L),this.h()},h(){A(e,"class","text-[#E53325] text-sm mb-3 md:mt-2 -mt-2")},m(s,n){ge(s,e,n),P(e,t)},p(s,n){n&4&&Me(t,s[2])},d(s){s&&L(e)}}}function ht(b){let e,t;return{c(){e=D("span"),t=De(b[3]),this.h()},l(s){e=j(s,"SPAN",{class:!0});var n=Q(e);t=je(n,b[3]),n.forEach(L),this.h()},h(){A(e,"class","text-[#5CAA80] text-sm mb-3 md:mt-2 -mt-2")},m(s,n){ge(s,e,n),P(e,t)},p(s,n){n&8&&Me(t,s[3])},d(s){s&&L(e)}}}function ds(b){let e,t;return{c(){e=D("img"),this.h()},l(s){e=j(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Re(e.src,t=hs)||A(e,"src",t),A(e,"class","w-8 md:mb-2"),A(e,"alt","red karate uniform icon")},m(s,n){ge(s,e,n)},d(s){s&&L(e)}}}function ps(b){let e,t;return{c(){e=D("img"),this.h()},l(s){e=j(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Re(e.src,t=us)||A(e,"src",t),A(e,"class","w-8 md:mb-2"),A(e,"alt","check mark icon")},m(s,n){ge(s,e,n)},d(s){s&&L(e)}}}function ft(b){let e,t,s=tt(b[0]),n=[];for(let d=0;d<s.length;d+=1)n[d]=dt(ct(b,s,d));const f=d=>Ne(n[d],1,1,()=>{n[d]=null});return{c(){for(let d=0;d<n.length;d+=1)n[d].c();e=et()},l(d){for(let y=0;y<n.length;y+=1)n[y].l(d);e=et()},m(d,y){for(let E=0;E<n.length;E+=1)n[E]&&n[E].m(d,y);ge(d,e,y),t=!0},p(d,y){if(y&1){s=tt(d[0]);let E;for(E=0;E<s.length;E+=1){const k=ct(d,s,E);n[E]?(n[E].p(k,y),ke(n[E],1)):(n[E]=dt(k),n[E].c(),ke(n[E],1),n[E].m(e.parentNode,e))}for(bt(),E=s.length;E<n.length;E+=1)f(E);wt()}},i(d){if(!t){for(let y=0;y<s.length;y+=1)ke(n[y]);t=!0}},o(d){n=n.filter(Boolean);for(let y=0;y<n.length;y+=1)Ne(n[y]);t=!1},d(d){d&&L(e),At(n,d)}}}function dt(b){let e,t;return e=new Tt({props:{endpoint:b[18]}}),{c(){Ve(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,n){We(e,s,n),t=!0},p(s,n){const f={};n&1&&(f.endpoint=s[18]),e.$set(f)},i(s){t||(ke(e.$$.fragment,s),t=!0)},o(s){Ne(e.$$.fragment,s),t=!1},d(s){$e(e,s)}}}function ms(b){let e,t,s,n,f,d,y=`<img src="${Rt}" class="max-w-full max-h-[20vh] w-auto h-auto mt-2" alt="dojo node header with trees and the logo"/>`,E,k,O,J,re,ee=`<div class="mx-auto relative"><span><span class="text-[#5CAA80] font-bold">tatami</span> <img src="${Ut}" class="icon-big m-auto svelte-z3ie61" alt="tatami flag"/></span> <div class="card md:absolute md:top-0 md:left-36 w-max text-balance md:text-left mt-8 mb-2 max-w-[20rem] svelte-z3ie61"><h1 class="font-bold">taiko prover market</h1> <h2 class="-mt-2">specialized competition</h2></div></div>`,x,oe,R,I,ie,q,F=`<img src="${fs}" class="w-8 mb-2" alt="submit postal icon"/> <span class="hidden md:block">submit endpoint</span>`,W,V,N,T,B,U,S,K,z,$,Y=b[6]?"copied!":"copy All",ae,we,ce,pe,ye,Oe,Pe,ue,v,_e,xe,Ee,se,be,i,r,o,g,l;O=new Pt({});let c=b[2]!=""&&ut(b),p=b[3]!=""&&ht(b);function a(w,C){return w[6]?ps:ds}let h=a(b),m=h(b),u=b[0].length>0&&ft(b);return r=new Tt({props:{endpoint:b[10]}}),{c(){e=D("meta"),t=D("meta"),s=fe(),n=D("header"),f=D("span"),d=D("a"),d.innerHTML=y,E=fe(),k=D("div"),Ve(O.$$.fragment),J=fe(),re=D("section"),re.innerHTML=ee,x=fe(),oe=D("section"),R=D("div"),I=D("div"),ie=D("div"),q=D("button"),q.innerHTML=F,W=fe(),V=D("input"),N=fe(),c&&c.c(),T=fe(),p&&p.c(),B=fe(),U=D("div"),S=D("div"),K=D("button"),m.c(),z=fe(),$=D("span"),ae=De(Y),we=fe(),ce=D("div"),pe=D("button"),ye=D("img"),Pe=fe(),ue=D("img"),xe=fe(),Ee=D("section"),se=D("div"),u&&u.c(),be=fe(),i=D("div"),Ve(r.$$.fragment),this.h()},l(w){const C=_t("svelte-p8s6bz",Ge.head);e=j(C,"META",{name:!0,content:!0}),t=j(C,"META",{property:!0,content:!0}),C.forEach(L),s=de(w),n=j(w,"HEADER",{class:!0});var _=Q(n);f=j(_,"SPAN",{});var G=Q(f);d=j(G,"A",{href:!0,"data-svelte-h":!0}),Ue(d)!=="svelte-1agkrsh"&&(d.innerHTML=y),E=de(G),k=j(G,"DIV",{class:!0});var Z=Q(k);ze(O.$$.fragment,Z),Z.forEach(L),G.forEach(L),_.forEach(L),J=de(w),re=j(w,"SECTION",{class:!0,"data-svelte-h":!0}),Ue(re)!=="svelte-pdul06"&&(re.innerHTML=ee),x=de(w),oe=j(w,"SECTION",{class:!0});var ne=Q(oe);R=j(ne,"DIV",{class:!0});var M=Q(R);I=j(M,"DIV",{class:!0});var H=Q(I);ie=j(H,"DIV",{class:!0});var le=Q(ie);q=j(le,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(q)!=="svelte-qmi3f5"&&(q.innerHTML=F),W=de(le),V=j(le,"INPUT",{class:!0,type:!0}),le.forEach(L),N=de(H),c&&c.l(H),T=de(H),p&&p.l(H),H.forEach(L),B=de(M),U=j(M,"DIV",{class:!0});var Te=Q(U);S=j(Te,"DIV",{});var qe=Q(S);K=j(qe,"BUTTON",{class:!0});var Ie=Q(K);m.l(Ie),z=de(Ie),$=j(Ie,"SPAN",{class:!0});var ve=Q($);ae=je(ve,Y),ve.forEach(L),Ie.forEach(L),qe.forEach(L),we=de(Te),ce=j(Te,"DIV",{class:!0});var Ae=Q(ce);pe=j(Ae,"BUTTON",{class:!0});var me=Q(pe);ye=j(me,"IMG",{src:!0,class:!0,alt:!0}),Pe=de(me),ue=j(me,"IMG",{src:!0,class:!0,alt:!0}),me.forEach(L),Ae.forEach(L),Te.forEach(L),M.forEach(L),ne.forEach(L),xe=de(w),Ee=j(w,"SECTION",{class:!0});var he=Q(Ee);se=j(he,"DIV",{id:!0,class:!0});var X=Q(se);u&&u.l(X),be=de(X),i=j(X,"DIV",{class:!0});var Qe=Q(i);ze(r.$$.fragment,Qe),Qe.forEach(L),X.forEach(L),he.forEach(L),this.h()},h(){Ge.title="prover market page",A(e,"name","description"),A(e,"content","A prover marketplace of taiko provers where anyone can permissionless add their own prover."),A(t,"property","og:description"),A(t,"content","A prover marketplace of taiko provers where anyone can permissionless add their own prover."),A(d,"href","/shomen"),A(k,"class","w-[60px] ml-auto mr-8 lg:mb-6 md:mb-4 mb-2"),A(n,"class","flex justify-center w-[90%] m-auto"),A(re,"class","svelte-z3ie61"),A(q,"class","flex flex-col items-center md:mb-6"),A(V,"class","shadow appearance-none rounded-full text-[hsl(var(--twc-cardSubBodyColor))] bg-[hsl(var(--twc-inputAccentColor))] w-full px-3 focus:outline-none focus:shadow-outline leading-none"),A(V,"type","text"),A(ie,"class","flex md:flex-col w-full md:w-auto flex-row-reverse md:items-center items-start"),A(I,"class","flex flex-col"),A($,"class","hidden md:block"),A(K,"class","flex flex-col items-center md:mb-6"),Re(ye.src,Oe=Ot)||A(ye,"src",Oe),A(ye,"class","w-6 mr-2"),A(ye,"alt","ticket icon"),Re(ue.src,v=b[5]==="minimumGas"?ot:rt)||A(ue,"src",v),A(ue,"class",_e="w-4 mr-2 sorting-arrow "+(b[4]&&b[5]==="minimumGas"?"rotate-180":"")+" svelte-z3ie61"),A(ue,"alt","sorting arrow icon"),A(pe,"class","flex w-[65px] items-center bg-[hsl(var(--twc-inputAccentColor))] rounded-full p-2"),A(ce,"class","flex gap-2"),A(U,"class","flex md:flex-col items-center w-full md:w-auto justify-between"),A(R,"class","flex md:flex-row flex-col max-w-[820px] w-full justify-around items-center"),A(oe,"class","svelte-z3ie61"),A(i,"class","invisible h-5"),A(se,"id","cards"),A(se,"class","max-w-[920px] mt-4 flex flex-wrap justify-center overflow-y-clip"),A(Ee,"class","svelte-z3ie61")},m(w,C){P(Ge.head,e),P(Ge.head,t),ge(w,s,C),ge(w,n,C),P(n,f),P(f,d),P(f,E),P(f,k),We(O,k,null),ge(w,J,C),ge(w,re,C),ge(w,x,C),ge(w,oe,C),P(oe,R),P(R,I),P(I,ie),P(ie,q),P(ie,W),P(ie,V),Ze(V,b[1]),P(I,N),c&&c.m(I,null),P(I,T),p&&p.m(I,null),P(R,B),P(R,U),P(U,S),P(S,K),m.m(K,null),P(K,z),P(K,$),P($,ae),P(U,we),P(U,ce),P(ce,pe),P(pe,ye),P(pe,Pe),P(pe,ue),ge(w,xe,C),ge(w,Ee,C),P(Ee,se),u&&u.m(se,null),P(se,be),P(se,i),We(r,i,null),o=!0,g||(l=[Be(q,"click",b[7]),Be(V,"submit",It(b[7])),Be(V,"input",b[11]),Be(K,"click",b[8]),Be(pe,"click",b[12])],g=!0)},p(w,[C]){C&2&&V.value!==w[1]&&Ze(V,w[1]),w[2]!=""?c?c.p(w,C):(c=ut(w),c.c(),c.m(I,T)):c&&(c.d(1),c=null),w[3]!=""?p?p.p(w,C):(p=ht(w),p.c(),p.m(I,null)):p&&(p.d(1),p=null),h!==(h=a(w))&&(m.d(1),m=h(w),m&&(m.c(),m.m(K,z))),(!o||C&64)&&Y!==(Y=w[6]?"copied!":"copy All")&&Me(ae,Y),(!o||C&32&&!Re(ue.src,v=w[5]==="minimumGas"?ot:rt))&&A(ue,"src",v),(!o||C&48&&_e!==(_e="w-4 mr-2 sorting-arrow "+(w[4]&&w[5]==="minimumGas"?"rotate-180":"")+" svelte-z3ie61"))&&A(ue,"class",_e),w[0].length>0?u?(u.p(w,C),C&1&&ke(u,1)):(u=ft(w),u.c(),ke(u,1),u.m(se,be)):u&&(bt(),Ne(u,1,1,()=>{u=null}),wt())},i(w){o||(ke(O.$$.fragment,w),ke(u),ke(r.$$.fragment,w),o=!0)},o(w){Ne(O.$$.fragment,w),Ne(u),Ne(r.$$.fragment,w),o=!1},d(w){w&&(L(s),L(n),L(J),L(re),L(x),L(oe),L(xe),L(Ee)),L(e),L(t),$e(O),c&&c.d(),p&&p.d(),m.d(),u&&u.d(),$e(r),g=!1,kt(l)}}}function gs(b,e,t){let s=[],n="",f="",d="",y=!1,E="minimumGas",k=!1;const O=new Qt("https://provers.dojonode.xyz");async function J(){t(0,s=await O.send("/validProvers",{})),s.sort((F,W)=>F.minimumGas-W.minimumGas)}J();async function re(){try{if(n==="")return;if(t(2,f=""),t(1,n=n.replace(/\/+$/,"")),ee(n)){t(2,f="endpoint already exists!");return}await O.collection("prover_endpoints").create({url:n}),J(),t(1,n=""),t(3,d="endpoint successfully added!")}catch(F){console.error(F),t(2,f="endpoint is not valid or reachable!")}}function ee(F){return s.find(W=>W.url===F)!==void 0}function x(){let F=s.map(W=>W.url).join(",");if(navigator.clipboard)navigator.clipboard.writeText(F).then(()=>oe()).catch(function(){console.error("could not copy to clipboard!")});else{const W=document.createElement("textarea");W.value=F,document.body.appendChild(W),W.select(),document.execCommand("copy"),document.body.removeChild(W),oe()}}function oe(){t(6,k=!0),setTimeout(()=>{t(6,k=!1)},3e3)}function R(F){E===F?t(4,y=!y):(t(5,E=F),t(4,y=!0)),t(0,s=[...s].sort((W,V)=>y?V[F]-W[F]:W[F]-V[F]))}xt.subscribe(F=>{document.body.setAttribute("data-theme",F)});let I={url:"https://example.com/api",minimumProofFee:10};function ie(){n=this.value,t(1,n)}return[s,n,f,d,y,E,k,re,x,R,I,ie,()=>R("minimumGas")]}class Ss extends mt{constructor(e){super(),gt(this,e,gs,ms,pt,{})}}export{Ss as component};
