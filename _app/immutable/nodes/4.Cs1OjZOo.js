import{s as lt,x as re,n as Je,r as vt}from"../chunks/scheduler.Cu_nLO_j.js";import{S as ht,i as dt,e as m,s as I,t as fe,c as f,a as S,k as be,f as P,d as p,b as ge,l,g as N,h,j as we,v as je,B as Ct,w as Le,x as Ue,C as Qe,A as ye,D as St,q as ie,o as de,p as ut,y as De,n as Ze,r as pt,E as Ot}from"../chunks/index.BaQeyhHX.js";import{M as kt,K as Tt,T as Et,c as _t,g as It,H as Pt,a as xt}from"../chunks/ThemeSwitcher.2FMZ4oOK.js";function Ye(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}class B extends Error{constructor(e){var t,s,n,i;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,B.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof B||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(i=(n=(s=this.originalError)==null?void 0:s.cause)==null?void 0:n.message)!=null&&i.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const Pe=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function At(o,e){const t={};if(typeof o!="string")return t;const s=Object.assign({},{}).decode||Rt;let n=0;for(;n<o.length;){const i=o.indexOf("=",n);if(i===-1)break;let r=o.indexOf(";",n);if(r===-1)r=o.length;else if(r<i){n=o.lastIndexOf(";",i-1)+1;continue}const a=o.slice(n,i).trim();if(t[a]===void 0){let c=o.slice(i+1,r).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[a]=s(c)}catch{t[a]=c}}n=r+1}return t}function Xe(o,e,t){const s=Object.assign({},t||{}),n=s.encode||qt;if(!Pe.test(o))throw new TypeError("argument name is invalid");const i=n(e);if(i&&!Pe.test(i))throw new TypeError("argument val is invalid");let r=o+"="+i;if(s.maxAge!=null){const a=s.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(a)}if(s.domain){if(!Pe.test(s.domain))throw new TypeError("option domain is invalid");r+="; Domain="+s.domain}if(s.path){if(!Pe.test(s.path))throw new TypeError("option path is invalid");r+="; Path="+s.path}if(s.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(s.expires)||isNaN(s.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():s.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function Rt(o){return o.indexOf("%")!==-1?decodeURIComponent(o):o}function qt(o){return encodeURIComponent(o)}let mt;function xe(o){if(o)try{const e=decodeURIComponent(mt(o.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function ft(o,e=0){let t=xe(o);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}mt=typeof atob=="function"?atob:o=>{let e=String(o).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,s,n=0,i=0,r="";s=e.charAt(i++);~s&&(t=n%4?64*t+s:s,n++%4)?r+=String.fromCharCode(255&t>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return r};const et="pb_auth";class jt{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!ft(this.token)}get isAdmin(){return xe(this.token).type==="admin"}get isAuthRecord(){return xe(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=et){const s=At(e||"")[t]||"";let n={};try{n=JSON.parse(s),(typeof n===null||typeof n!="object"||Array.isArray(n))&&(n={})}catch{}this.save(n.token||"",n.model||null)}exportToCookie(e,t=et){var c,d;const s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},n=xe(this.token);s.expires=n!=null&&n.exp?new Date(1e3*n.exp):new Date("1970-01-01"),e=Object.assign({},s,e);const i={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let r=Xe(t,JSON.stringify(i),e);const a=typeof Blob<"u"?new Blob([r]).size:r.length;if(i.model&&a>4096){i.model={id:(c=i==null?void 0:i.model)==null?void 0:c.id,email:(d=i==null?void 0:i.model)==null?void 0:d.email};const O=["collectionId","username","verified"];for(const C in this.model)O.includes(C)&&(i.model[C]=this.model[C]);r=Xe(t,JSON.stringify(i),e)}return r}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let s=this._onChangeCallbacks.length-1;s>=0;s--)if(this._onChangeCallbacks[s]==e)return delete this._onChangeCallbacks[s],void this._onChangeCallbacks.splice(s,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Lt extends jt{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let s=t;typeof t!="string"&&(s=JSON.stringify(t)),window.localStorage.setItem(e,s)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class ue{constructor(e){this.client=e}}class Ut extends ue{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,s){return s=Object.assign({method:"POST",body:{email:e,template:t}},s),this.client.send("/api/settings/test/email",s).then(()=>!0)}async generateAppleClientSecret(e,t,s,n,i,r){return r=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:s,privateKey:n,duration:i}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}class Ne extends ue{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let s=500;return(t=Object.assign({},e,t)).batch&&(s=t.batch,delete t.batch),this._getFullList(s,t)}async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(this.baseCrudPath,s).then(n=>{var i;return n.items=((i=n.items)==null?void 0:i.map(r=>this.decode(r)))||[],n})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(s=>{var n;if(!((n=s==null?void 0:s.items)!=null&&n.length))throw new B({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return s.items[0]})}async getOne(e,t){if(!e)throw new B({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(s=>this.decode(s))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(s=>this.decode(s))}async update(e,t,s){return s=Object.assign({method:"PATCH",body:t},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),s).then(n=>this.decode(n))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let s=[],n=async i=>this.getList(i,e||500,t).then(r=>{const a=r.items;return s=s.concat(a),a.length==r.perPage?n(i+1):s});return n(1)}}function G(o,e,t,s){const n=s!==void 0;return n||t!==void 0?n?(console.warn(o),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,s),e):Object.assign(e,t):e}function Re(o){var e;(e=o._resetAutoRefresh)==null||e.call(o)}class Dt extends Ne{get baseCrudPath(){return"/api/admins"}async update(e,t,s){return super.update(e,t,s).then(n=>{var i,r;return((i=this.client.authStore.model)==null?void 0:i.id)===n.id&&((r=this.client.authStore.model)==null?void 0:r.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,n),n})}async delete(e,t){return super.delete(e,t).then(s=>{var n,i;return s&&((n=this.client.authStore.model)==null?void 0:n.id)===e&&((i=this.client.authStore.model)==null?void 0:i.collectionId)===void 0&&this.client.authStore.clear(),s})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,s,n){let i={method:"POST",body:{identity:e,password:t}};i=G("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",i,s,n);const r=i.autoRefreshThreshold;delete i.autoRefreshThreshold,i.autoRefresh||Re(this.client);let a=await this.client.send(this.baseCrudPath+"/auth-with-password",i);return a=this.authResponse(a),r&&function(d,O,C,W){Re(d);const q=d.beforeSend,b=d.authStore.model,k=d.authStore.onChange((y,g)=>{(!y||(g==null?void 0:g.id)!=(b==null?void 0:b.id)||(g!=null&&g.collectionId||b!=null&&b.collectionId)&&(g==null?void 0:g.collectionId)!=(b==null?void 0:b.collectionId))&&Re(d)});d._resetAutoRefresh=function(){k(),d.beforeSend=q,delete d._resetAutoRefresh},d.beforeSend=async(y,g)=>{var v;const E=d.authStore.token;if((v=g.query)!=null&&v.autoRefresh)return q?q(y,g):{url:y,sendOptions:g};let F=d.authStore.isValid;if(F&&ft(d.authStore.token,O))try{await C()}catch{F=!1}F||await W();const w=g.headers||{};for(let U in w)if(U.toLowerCase()=="authorization"&&E==w[U]&&d.authStore.token){w[U]=d.authStore.token;break}return g.headers=w,q?q(y,g):{url:y,sendOptions:g}}}(this.client,r,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i))),a}async authRefresh(e,t){let s={method:"POST"};return s=G("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",s).then(this.authResponse.bind(this))}async requestPasswordReset(e,t,s){let n={method:"POST",body:{email:e}};return n=G("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",n,t,s),this.client.send(this.baseCrudPath+"/request-password-reset",n).then(()=>!0)}async confirmPasswordReset(e,t,s,n,i){let r={method:"POST",body:{token:e,password:t,passwordConfirm:s}};return r=G("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",r,n,i),this.client.send(this.baseCrudPath+"/confirm-password-reset",r).then(()=>!0)}}const Nt=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function bt(o){if(o){o.query=o.query||{};for(let e in o)Nt.includes(e)||(o.query[e]=o[e],delete o[e])}}class gt extends ue{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,s){var r;if(!e)throw new Error("topic must be set.");let n=e;if(s){bt(s);const a="options="+encodeURIComponent(JSON.stringify({query:s.query,headers:s.headers}));n+=(n.includes("?")?"&":"?")+a}const i=function(a){const c=a;let d;try{d=JSON.parse(c==null?void 0:c.data)}catch{}t(d||{})};return this.subscriptions[n]||(this.subscriptions[n]=[]),this.subscriptions[n].push(i),this.isConnected?this.subscriptions[n].length===1?await this.submitSubscriptions():(r=this.eventSource)==null||r.addEventListener(n,i):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,i)}async unsubscribe(e){var s;let t=!1;if(e){const n=this.getSubscriptionsByTopic(e);for(let i in n)if(this.hasSubscriptionListeners(i)){for(let r of this.subscriptions[i])(s=this.eventSource)==null||s.removeEventListener(i,r);delete this.subscriptions[i],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var s;let t=!1;for(let n in this.subscriptions)if((n+"?").startsWith(e)){t=!0;for(let i of this.subscriptions[n])(s=this.eventSource)==null||s.removeEventListener(n,i);delete this.subscriptions[n]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var i;let s=!1;const n=this.getSubscriptionsByTopic(e);for(let r in n){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let a=!1;for(let c=this.subscriptions[r].length-1;c>=0;c--)this.subscriptions[r][c]===t&&(a=!0,delete this.subscriptions[r][c],this.subscriptions[r].splice(c,1),(i=this.eventSource)==null||i.removeEventListener(r,t));a&&(this.subscriptions[r].length||delete this.subscriptions[r],s||this.hasSubscriptionListeners(r)||(s=!0))}this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,s;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let n in this.subscriptions)if((s=this.subscriptions[n])!=null&&s.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let s in this.subscriptions)(s+"?").startsWith(e)&&(t[s]=this.subscriptions[s]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let s=3;for(;this.hasUnsentSubscriptions()&&s>0;)s--,await this.submitSubscriptions()}).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const s=this.getSubscriptionsByTopic("PB_CONNECT");for(let n in s)for(let i of s[n])i(e)}).catch(s=>{this.clientId="",this.connectErrorHandler(s)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let s of this.pendingConnects)s.reject(new B(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[]}}}class Ft extends Ne{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(e,t,s){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,s)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const s=Object.assign({},e,t);return super.getFullList(s)}async getList(e=1,t=30,s){return super.getList(e,t,s)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,s){return super.update(e,t,s).then(n=>{var i,r,a;return((i=this.client.authStore.model)==null?void 0:i.id)!==(n==null?void 0:n.id)||((r=this.client.authStore.model)==null?void 0:r.collectionId)!==this.collectionIdOrName&&((a=this.client.authStore.model)==null?void 0:a.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,n),n})}async delete(e,t){return super.delete(e,t).then(s=>{var n,i,r;return!s||((n=this.client.authStore.model)==null?void 0:n.id)!==e||((i=this.client.authStore.model)==null?void 0:i.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.model)==null?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),s})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}async authWithPassword(e,t,s,n){let i={method:"POST",body:{identity:e,password:t}};return i=G("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",i,s,n),this.client.send(this.baseCollectionPath+"/auth-with-password",i).then(r=>this.authResponse(r))}async authWithOAuth2Code(e,t,s,n,i,r,a){let c={method:"POST",body:{provider:e,code:t,codeVerifier:s,redirectUrl:n,createData:i}};return c=G("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",c,r,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(d=>this.authResponse(d))}async authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},s=(await this.listAuthMethods()).authProviders.find(c=>c.name===t.provider);if(!s)throw new B(new Error(`Missing or invalid provider "${t.provider}".`));const n=this.client.buildUrl("/api/oauth2-redirect"),i=new gt(this.client);let r=null;function a(){r==null||r.close(),i.unsubscribe()}return t.urlCallback||(r=tt(void 0)),new Promise(async(c,d)=>{var O;try{await i.subscribe("@oauth2",async b=>{const k=i.clientId;try{if(!b.state||k!==b.state)throw new Error("State parameters don't match.");const y=Object.assign({},t);delete y.provider,delete y.scopes,delete y.createData,delete y.urlCallback;const g=await this.authWithOAuth2Code(s.name,b.code,s.codeVerifier,n,t.createData,y);c(g)}catch(y){d(new B(y))}a()});const C={state:i.clientId};(O=t.scopes)!=null&&O.length&&(C.scope=t.scopes.join(" "));const W=this._replaceQueryParams(s.authUrl+n,C);await(t.urlCallback||function(b){r?r.location.href=b:r=tt(b)})(W)}catch(C){a(),d(new B(C))}})}async authRefresh(e,t){let s={method:"POST"};return s=G("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",s).then(n=>this.authResponse(n))}async requestPasswordReset(e,t,s){let n={method:"POST",body:{email:e}};return n=G("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/request-password-reset",n).then(()=>!0)}async confirmPasswordReset(e,t,s,n,i){let r={method:"POST",body:{token:e,password:t,passwordConfirm:s}};return r=G("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}async requestVerification(e,t,s){let n={method:"POST",body:{email:e}};return n=G("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/request-verification",n).then(()=>!0)}async confirmVerification(e,t,s){let n={method:"POST",body:{token:e}};return n=G("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/confirm-verification",n).then(()=>!0)}async requestEmailChange(e,t,s){let n={method:"POST",body:{newEmail:e}};return n=G("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",n,t,s),this.client.send(this.baseCollectionPath+"/request-email-change",n).then(()=>!0)}async confirmEmailChange(e,t,s,n){let i={method:"POST",body:{token:e,password:t}};return i=G("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",i,s,n),this.client.send(this.baseCollectionPath+"/confirm-email-change",i).then(()=>!0)}async listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}async unlinkExternalAuth(e,t,s){return s=Object.assign({method:"DELETE"},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),s).then(()=>!0)}_replaceQueryParams(e,t={}){let s=e,n="";e.indexOf("?")>=0&&(s=e.substring(0,e.indexOf("?")),n=e.substring(e.indexOf("?")+1));const i={},r=n.split("&");for(const a of r){if(a=="")continue;const c=a.split("=");i[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let a in t)t.hasOwnProperty(a)&&(t[a]==null?delete i[a]:i[a]=t[a]);n="";for(let a in i)i.hasOwnProperty(a)&&(n!=""&&(n+="&"),n+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(i[a].replace(/%20/g,"+")));return n!=""?s+"?"+n:s}}function tt(o){if(typeof window>"u"||!(window!=null&&window.open))throw new B(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,s=window.innerWidth,n=window.innerHeight;e=e>s?s:e,t=t>n?n:t;let i=s/2-e/2,r=n/2-t/2;return window.open(o,"popup_window","width="+e+",height="+t+",top="+r+",left="+i+",resizable,menubar=no")}class Kt extends Ne{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,s){return s=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},s),this.client.send(this.baseCrudPath+"/import",s).then(()=>!0)}}class Mt extends ue{async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send("/api/logs",s)}async getOne(e,t){if(!e)throw new B({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class Gt extends ue{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Bt extends ue{getUrl(e,t,s={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const n=[];n.push("api"),n.push("files"),n.push(encodeURIComponent(e.collectionId||e.collectionName)),n.push(encodeURIComponent(e.id)),n.push(encodeURIComponent(t));let i=this.client.buildUrl(n.join("/"));if(Object.keys(s).length){s.download===!1&&delete s.download;const r=new URLSearchParams(s);i+=(i.includes("?")?"&":"?")+r}return i}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Vt extends ue{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class Ht{constructor(e="/",t,s="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=s,this.authStore=t||new Lt,this.admins=new Dt(this),this.collections=new Kt(this),this.files=new Bt(this),this.logs=new Mt(this),this.settings=new Ut(this),this.realtime=new gt(this),this.health=new Gt(this),this.backups=new Vt(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Ft(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let s in t){let n=t[s];switch(typeof n){case"boolean":case"number":n=""+n;break;case"string":n="'"+n.replace(/'/g,"\\'")+"'";break;default:n=n===null?"null":n instanceof Date?"'"+n.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(n).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+s+"}",n)}return e}getFileUrl(e,t,s={}){return this.files.getUrl(e,t,s)}buildUrl(e){var s;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(s=window.location.origin)!=null&&s.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let s=this.buildUrl(e);if(this.beforeSend){const n=Object.assign({},await this.beforeSend(s,t));n.url!==void 0||n.options!==void 0?(s=n.url||s,t=n.options||t):Object.keys(n).length&&(t=n,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const n=this.serializeQueryParams(t.query);n&&(s+=(s.includes("?")?"&":"?")+n),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(s,t).then(async n=>{let i={};try{i=await n.json()}catch{}if(this.afterSend&&(i=await this.afterSend(n,i)),n.status>=400)throw new B({url:n.url,status:n.status,data:i});return i}).catch(n=>{throw new B(n)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=this.convertToFormDataIfNeeded(t.body),bt(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const s=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(s);const n=new AbortController;this.cancelControllers[s]=n,t.signal=n.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let s in e){const n=this.normalizeFormDataValue(e[s]),i=Array.isArray(n)?n:[n];if(i.length)for(const r of i)t.append(s,r);else t.append(s,"")}return t}normalizeFormDataValue(e){return e===null||typeof e!="object"||e instanceof Date||this.hasBlobField({data:e})||Array.isArray(e)&&!e.filter(t=>typeof t!="string").length?e:JSON.stringify(e)}hasBlobField(e){for(let t in e){const s=Array.isArray(e[t])?e[t]:[e[t]];for(let n of s)if(typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let s in e)if(s.toLowerCase()==t)return e[s];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const s in e){if(e[s]===null)continue;const n=e[s],i=encodeURIComponent(s);if(Array.isArray(n))for(const r of n)t.push(i+"="+encodeURIComponent(r));else n instanceof Date?t.push(i+"="+encodeURIComponent(n.toISOString())):typeof n!==null&&typeof n=="object"?t.push(i+"="+encodeURIComponent(JSON.stringify(n))):t.push(i+"="+encodeURIComponent(n))}return t.join("&")}}const st="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20288%20288'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20%239a989e;%20stroke-width:%200px;%20}%20%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='m4.57,226.06C38.27,158.63,71.93,91.29,105.74,23.66c15.76-31.54,60.75-31.54,76.52,0l101.17,202.41c14.22,28.46-6.46,61.94-38.26,61.94H42.83c-31.8,0-52.48-33.48-38.26-61.94Z'/%3e%3c/svg%3e",nt="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20288%20288'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20%23f2a99d;%20stroke-width:%200px;%20}%20%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='m4.57,226.06C38.27,158.63,71.93,91.29,105.74,23.66c15.76-31.54,60.75-31.54,76.52,0l101.17,202.41c14.22,28.46-6.46,61.94-38.26,61.94H42.83c-31.8,0-52.48-33.48-38.26-61.94Z'/%3e%3c/svg%3e",Wt=""+new URL("../assets/KarateBlue.CqdpdrOE.avif",import.meta.url).href,zt=""+new URL("../assets/KaratePink.DPKpILLM.avif",import.meta.url).href,$t=""+new URL("../assets/KarateGreen.CpfLj3yD.avif",import.meta.url).href,Jt=""+new URL("../assets/KarateYellow.DGpzy_ao.avif",import.meta.url).href,yt=""+new URL("../assets/Ticket.CFqHXuZx.avif",import.meta.url).href;function Qt(o){let e,t,s,n="prover",i,r,a,c,d,O,C,W,q,b,k,y="min proof fee",g,E,F=o[0].minimumGas+"",w,v,U,K,z,$,Z,x,V,Y="address",X,J,ee=o[0].url+"",Q;return{c(){e=m("div"),t=m("div"),s=m("h3"),s.textContent=n,i=I(),r=m("img"),c=I(),d=m("div"),O=m("div"),C=m("img"),q=I(),b=m("div"),k=m("p"),k.textContent=y,g=I(),E=m("p"),w=fe(F),v=fe(" wei"),U=I(),K=m("div"),z=m("img"),Z=I(),x=m("div"),V=m("p"),V.textContent=Y,X=I(),J=m("p"),Q=fe(ee),this.h()},l(A){e=f(A,"DIV",{class:!0});var R=S(e);t=f(R,"DIV",{class:!0});var ce=S(t);s=f(ce,"H3",{class:!0,"data-svelte-h":!0}),be(s)!=="svelte-1cfb05m"&&(s.textContent=n),i=P(ce),r=f(ce,"IMG",{src:!0,alt:!0}),ce.forEach(p),c=P(R),d=f(R,"DIV",{class:!0});var oe=S(d);O=f(oe,"DIV",{class:!0});var D=S(O);C=f(D,"IMG",{src:!0,class:!0,alt:!0}),q=P(D),b=f(D,"DIV",{class:!0});var te=S(b);k=f(te,"P",{class:!0,"data-svelte-h":!0}),be(k)!=="svelte-1nwsy8z"&&(k.textContent=y),g=P(te),E=f(te,"P",{class:!0});var ae=S(E);w=ge(ae,F),v=ge(ae," wei"),ae.forEach(p),te.forEach(p),D.forEach(p),U=P(oe),K=f(oe,"DIV",{class:!0});var se=S(K);z=f(se,"IMG",{src:!0,class:!0,alt:!0}),Z=P(se),x=f(se,"DIV",{class:!0});var H=S(x);V=f(H,"P",{class:!0,"data-svelte-h":!0}),be(V)!=="svelte-hrpp7l"&&(V.textContent=Y),X=P(H),J=f(H,"P",{class:!0});var M=S(J);Q=ge(M,ee),M.forEach(p),H.forEach(p),se.forEach(p),oe.forEach(p),R.forEach(p),this.h()},h(){l(s,"class","modal-title font-bold text-xl text-[#E53325]"),re(r.src,a=o[1])||l(r,"src",a),l(r,"alt","icon"),l(t,"class","w-[85px]"),re(C.src,W=yt)||l(C,"src",W),l(C,"class","icon-small w-8 mr-2"),l(C,"alt","red karate uniform icon"),l(k,"class",""),l(E,"class","text-[hsl(var(--twc-cardSubBodyColor))]"),l(b,"class","flex flex-col text-left"),l(O,"class","flex flex-row items-center"),re(z.src,$=kt)||l(z,"src",$),l(z,"class","icon-small w-8 mr-2"),l(z,"alt","red karate uniform icon"),l(V,"class",""),l(J,"class","truncate text-[hsl(var(--twc-cardSubBodyColor))]"),l(x,"class","flex flex-col text-left"),l(K,"class","flex flex-row items-center"),l(d,"class","flex flex-col items-start mt-4 w-[150px] ml-auto card-subbody overflow-clip gap-2"),l(e,"class","modal shadow-md flex content-between items-center justify-around flex-row svelte-1023zh")},m(A,R){N(A,e,R),h(e,t),h(t,s),h(t,i),h(t,r),h(e,c),h(e,d),h(d,O),h(O,C),h(O,q),h(O,b),h(b,k),h(b,g),h(b,E),h(E,w),h(E,v),h(d,U),h(d,K),h(K,z),h(K,Z),h(K,x),h(x,V),h(x,X),h(x,J),h(J,Q)},p(A,[R]){R&2&&!re(r.src,a=A[1])&&l(r,"src",a),R&1&&F!==(F=A[0].minimumGas+"")&&we(w,F),R&1&&ee!==(ee=A[0].url+"")&&we(Q,ee)},i:Je,o:Je,d(A){A&&p(e)}}}function Zt(o,e,t){let{endpoint:s}=e,n;o.$$set=i=>{"endpoint"in i&&t(0,s=i.endpoint)};{const i=Math.floor(Math.random()*10);i===0?t(1,n=Tt):i>=1&&i<=2?t(1,n=$t):i>=3&&i<=4?t(1,n=Jt):i>=5&&i<=6?t(1,n=Wt):t(1,n=zt)}return[s,n]}class wt extends ht{constructor(e){super(),dt(this,e,Zt,Qt,lt,{endpoint:0})}}const Yt=""+new URL("../assets/CheckMark.CZlts7nq.avif",import.meta.url).href,Xt=""+new URL("../assets/Copy.ApILFNa4.avif",import.meta.url).href,es=""+new URL("../assets/Submit.CeHygA8T.avif",import.meta.url).href,{document:qe}=It;function it(o,e,t){const s=o.slice();return s[18]=e[t],s}function rt(o){let e,t;return{c(){e=m("span"),t=fe(o[2]),this.h()},l(s){e=f(s,"SPAN",{class:!0});var n=S(e);t=ge(n,o[2]),n.forEach(p),this.h()},h(){l(e,"class","text-[#E53325] text-sm mb-3 md:mt-2 -mt-2")},m(s,n){N(s,e,n),h(e,t)},p(s,n){n&4&&we(t,s[2])},d(s){s&&p(e)}}}function ot(o){let e,t;return{c(){e=m("span"),t=fe(o[3]),this.h()},l(s){e=f(s,"SPAN",{class:!0});var n=S(e);t=ge(n,o[3]),n.forEach(p),this.h()},h(){l(e,"class","text-[#5CAA80] text-sm mb-3 md:mt-2 -mt-2")},m(s,n){N(s,e,n),h(e,t)},p(s,n){n&8&&we(t,s[3])},d(s){s&&p(e)}}}function ts(o){let e,t;return{c(){e=m("img"),this.h()},l(s){e=f(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){re(e.src,t=Xt)||l(e,"src",t),l(e,"class","w-8 md:mb-2"),l(e,"alt","red karate uniform icon")},m(s,n){N(s,e,n)},d(s){s&&p(e)}}}function ss(o){let e,t;return{c(){e=m("img"),this.h()},l(s){e=f(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){re(e.src,t=Yt)||l(e,"src",t),l(e,"class","w-8 md:mb-2"),l(e,"alt","check mark icon")},m(s,n){N(s,e,n)},d(s){s&&p(e)}}}function at(o){let e,t,s=Ye(o[0]),n=[];for(let r=0;r<s.length;r+=1)n[r]=ct(it(o,s,r));const i=r=>de(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ze()},l(r){for(let a=0;a<n.length;a+=1)n[a].l(r);e=Ze()},m(r,a){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(r,a);N(r,e,a),t=!0},p(r,a){if(a&1){s=Ye(r[0]);let c;for(c=0;c<s.length;c+=1){const d=it(r,s,c);n[c]?(n[c].p(d,a),ie(n[c],1)):(n[c]=ct(d),n[c].c(),ie(n[c],1),n[c].m(e.parentNode,e))}for(pt(),c=s.length;c<n.length;c+=1)i(c);ut()}},i(r){if(!t){for(let a=0;a<s.length;a+=1)ie(n[a]);t=!0}},o(r){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)de(n[a]);t=!1},d(r){r&&p(e),Ot(n,r)}}}function ct(o){let e,t;return e=new wt({props:{endpoint:o[18]}}),{c(){je(e.$$.fragment)},l(s){Le(e.$$.fragment,s)},m(s,n){Ue(e,s,n),t=!0},p(s,n){const i={};n&1&&(i.endpoint=s[18]),e.$set(i)},i(s){t||(ie(e.$$.fragment,s),t=!0)},o(s){de(e.$$.fragment,s),t=!1},d(s){De(e,s)}}}function ns(o){let e,t,s,n,i,r=`<img src="${Pt}" class="max-w-full max-h-[20vh] w-auto h-auto mt-2" alt="dojo node header with trees and the logo"/>`,a,c,d,O,C,W=`<div class="mx-auto relative"><span><span class="text-[#5CAA80] font-bold">tatami</span> <img src="${xt}" class="icon-big m-auto svelte-z3ie61" alt="tatami flag"/></span> <div class="card md:absolute md:top-0 md:left-36 w-max text-balance md:text-left mt-8 mb-2 max-w-[20rem] svelte-z3ie61"><h1 class="font-bold">taiko prover market</h1> <h2 class="-mt-2">specialized competition</h2></div></div>`,q,b,k,y,g,E,F=`<img src="${es}" class="w-8 mb-2" alt="submit postal icon"/> <span class="hidden md:block">submit endpoint</span>`,w,v,U,K,z,$,Z,x,V,Y,X=o[6]?"copied!":"copy All",J,ee,Q,A,R,ce,oe,D,te,ae,se,H,M,ve,pe,le,he,Ae,Fe;d=new Et({});let j=o[2]!=""&&rt(o),L=o[3]!=""&&ot(o);function Ke(u,T){return u[6]?ss:ts}let Ce=Ke(o),ne=Ce(o),_=o[0].length>0&&at(o);return le=new wt({props:{endpoint:o[10]}}),{c(){e=m("meta"),t=I(),s=m("header"),n=m("span"),i=m("a"),i.innerHTML=r,a=I(),c=m("div"),je(d.$$.fragment),O=I(),C=m("section"),C.innerHTML=W,q=I(),b=m("section"),k=m("div"),y=m("div"),g=m("div"),E=m("button"),E.innerHTML=F,w=I(),v=m("input"),U=I(),j&&j.c(),K=I(),L&&L.c(),z=I(),$=m("div"),Z=m("div"),x=m("button"),ne.c(),V=I(),Y=m("span"),J=fe(X),ee=I(),Q=m("div"),A=m("button"),R=m("img"),oe=I(),D=m("img"),se=I(),H=m("section"),M=m("div"),_&&_.c(),ve=I(),pe=m("div"),je(le.$$.fragment),this.h()},l(u){const T=Ct("svelte-100kyiq",qe.head);e=f(T,"META",{name:!0,content:!0}),T.forEach(p),t=P(u),s=f(u,"HEADER",{class:!0});var Me=S(s);n=f(Me,"SPAN",{});var Se=S(n);i=f(Se,"A",{href:!0,"data-svelte-h":!0}),be(i)!=="svelte-1agkrsh"&&(i.innerHTML=r),a=P(Se),c=f(Se,"DIV",{class:!0});var Ge=S(c);Le(d.$$.fragment,Ge),Ge.forEach(p),Se.forEach(p),Me.forEach(p),O=P(u),C=f(u,"SECTION",{class:!0,"data-svelte-h":!0}),be(C)!=="svelte-pdul06"&&(C.innerHTML=W),q=P(u),b=f(u,"SECTION",{class:!0});var Be=S(b);k=f(Be,"DIV",{class:!0});var Oe=S(k);y=f(Oe,"DIV",{class:!0});var me=S(y);g=f(me,"DIV",{class:!0});var ke=S(g);E=f(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),be(E)!=="svelte-qmi3f5"&&(E.innerHTML=F),w=P(ke),v=f(ke,"INPUT",{class:!0,type:!0}),ke.forEach(p),U=P(me),j&&j.l(me),K=P(me),L&&L.l(me),me.forEach(p),z=P(Oe),$=f(Oe,"DIV",{class:!0});var Te=S($);Z=f(Te,"DIV",{});var Ve=S(Z);x=f(Ve,"BUTTON",{class:!0});var Ee=S(x);ne.l(Ee),V=P(Ee),Y=f(Ee,"SPAN",{class:!0});var He=S(Y);J=ge(He,X),He.forEach(p),Ee.forEach(p),Ve.forEach(p),ee=P(Te),Q=f(Te,"DIV",{class:!0});var We=S(Q);A=f(We,"BUTTON",{class:!0});var _e=S(A);R=f(_e,"IMG",{src:!0,class:!0,alt:!0}),oe=P(_e),D=f(_e,"IMG",{src:!0,class:!0,alt:!0}),_e.forEach(p),We.forEach(p),Te.forEach(p),Oe.forEach(p),Be.forEach(p),se=P(u),H=f(u,"SECTION",{class:!0});var ze=S(H);M=f(ze,"DIV",{id:!0,class:!0});var Ie=S(M);_&&_.l(Ie),ve=P(Ie),pe=f(Ie,"DIV",{class:!0});var $e=S(pe);Le(le.$$.fragment,$e),$e.forEach(p),Ie.forEach(p),ze.forEach(p),this.h()},h(){qe.title="prover market page",l(e,"name","description"),l(e,"content","TODO:"),l(i,"href","/shomen"),l(c,"class","w-[60px] ml-auto mr-8 lg:mb-6 md:mb-4 mb-2"),l(s,"class","flex justify-center w-[90%] m-auto"),l(C,"class","svelte-z3ie61"),l(E,"class","flex flex-col items-center md:mb-6"),l(v,"class","shadow appearance-none rounded-full text-[hsl(var(--twc-cardSubBodyColor))] bg-[hsl(var(--twc-inputAccentColor))] w-full px-3 focus:outline-none focus:shadow-outline leading-none"),l(v,"type","text"),l(g,"class","flex md:flex-col w-full md:w-auto flex-row-reverse md:items-center items-start"),l(y,"class","flex flex-col"),l(Y,"class","hidden md:block"),l(x,"class","flex flex-col items-center md:mb-6"),re(R.src,ce=yt)||l(R,"src",ce),l(R,"class","w-6 mr-2"),l(R,"alt","ticket icon"),re(D.src,te=o[5]==="minimumGas"?nt:st)||l(D,"src",te),l(D,"class",ae="w-4 mr-2 sorting-arrow "+(o[4]&&o[5]==="minimumGas"?"rotate-180":"")+" svelte-z3ie61"),l(D,"alt","sorting arrow icon"),l(A,"class","flex w-[65px] items-center bg-[hsl(var(--twc-inputAccentColor))] rounded-full p-2"),l(Q,"class","flex gap-2"),l($,"class","flex md:flex-col items-center w-full md:w-auto justify-between"),l(k,"class","flex md:flex-row flex-col max-w-[820px] w-full justify-around items-center"),l(b,"class","svelte-z3ie61"),l(pe,"class","invisible h-5"),l(M,"id","cards"),l(M,"class","max-w-[920px] mt-4 flex flex-wrap justify-center overflow-y-clip"),l(H,"class","svelte-z3ie61")},m(u,T){h(qe.head,e),N(u,t,T),N(u,s,T),h(s,n),h(n,i),h(n,a),h(n,c),Ue(d,c,null),N(u,O,T),N(u,C,T),N(u,q,T),N(u,b,T),h(b,k),h(k,y),h(y,g),h(g,E),h(g,w),h(g,v),Qe(v,o[1]),h(y,U),j&&j.m(y,null),h(y,K),L&&L.m(y,null),h(k,z),h(k,$),h($,Z),h(Z,x),ne.m(x,null),h(x,V),h(x,Y),h(Y,J),h($,ee),h($,Q),h(Q,A),h(A,R),h(A,oe),h(A,D),N(u,se,T),N(u,H,T),h(H,M),_&&_.m(M,null),h(M,ve),h(M,pe),Ue(le,pe,null),he=!0,Ae||(Fe=[ye(E,"click",o[7]),ye(v,"submit",St(o[7])),ye(v,"input",o[11]),ye(x,"click",o[8]),ye(A,"click",o[12])],Ae=!0)},p(u,[T]){T&2&&v.value!==u[1]&&Qe(v,u[1]),u[2]!=""?j?j.p(u,T):(j=rt(u),j.c(),j.m(y,K)):j&&(j.d(1),j=null),u[3]!=""?L?L.p(u,T):(L=ot(u),L.c(),L.m(y,null)):L&&(L.d(1),L=null),Ce!==(Ce=Ke(u))&&(ne.d(1),ne=Ce(u),ne&&(ne.c(),ne.m(x,V))),(!he||T&64)&&X!==(X=u[6]?"copied!":"copy All")&&we(J,X),(!he||T&32&&!re(D.src,te=u[5]==="minimumGas"?nt:st))&&l(D,"src",te),(!he||T&48&&ae!==(ae="w-4 mr-2 sorting-arrow "+(u[4]&&u[5]==="minimumGas"?"rotate-180":"")+" svelte-z3ie61"))&&l(D,"class",ae),u[0].length>0?_?(_.p(u,T),T&1&&ie(_,1)):(_=at(u),_.c(),ie(_,1),_.m(M,ve)):_&&(pt(),de(_,1,1,()=>{_=null}),ut())},i(u){he||(ie(d.$$.fragment,u),ie(_),ie(le.$$.fragment,u),he=!0)},o(u){de(d.$$.fragment,u),de(_),de(le.$$.fragment,u),he=!1},d(u){u&&(p(t),p(s),p(O),p(C),p(q),p(b),p(se),p(H)),p(e),De(d),j&&j.d(),L&&L.d(),ne.d(),_&&_.d(),De(le),Ae=!1,vt(Fe)}}}function is(o,e,t){let s=[],n="",i="",r="",a=!0,c="minimumGas",d=!1;const O=new Ht("https://provers.dojonode.xyz");async function C(){t(0,s=await O.send("/validProvers",{})),s.sort((w,v)=>v.minimumGas-w.minimumGas)}C();async function W(){try{if(n==="")return;if(t(2,i=""),t(1,n=n.replace(/\/+$/,"")),q(n)){t(2,i="endpoint already exists!");return}await O.collection("prover_endpoints").create({url:n}),C(),t(1,n=""),t(3,r="endpoint successfully added!")}catch(w){console.error(w),t(2,i="endpoint is not valid or reachable!")}}function q(w){return s.find(v=>v.url===w)!==void 0}function b(){let w=s.map(v=>v.url).join(",");if(navigator.clipboard)navigator.clipboard.writeText(w).then(()=>k()).catch(function(){console.error("could not copy to clipboard!")});else{const v=document.createElement("textarea");v.value=w,document.body.appendChild(v),v.select(),document.execCommand("copy"),document.body.removeChild(v),k()}}function k(){t(6,d=!0),setTimeout(()=>{t(6,d=!1)},3e3)}function y(w){c===w?t(4,a=!a):(t(5,c=w),t(4,a=!0)),t(0,s=[...s].sort((v,U)=>a?U[w]-v[w]:v[w]-U[w]))}_t.subscribe(w=>{document.body.setAttribute("data-theme",w)});let g={url:"https://example.com/api",minimumProofFee:10};function E(){n=this.value,t(1,n)}return[s,n,i,r,a,c,d,W,b,y,g,E,()=>y("minimumGas")]}class cs extends ht{constructor(e){super(),dt(this,e,is,ns,lt,{})}}export{cs as component};
