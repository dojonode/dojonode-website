var jt=Object.defineProperty;var qt=(s,e,t)=>e in s?jt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ke=(s,e,t)=>(qt(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function w(){}const mt=s=>s;function ye(s,e){for(const t in e)s[t]=e[t];return s}function Lt(s){return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"}function bt(s){return s()}function Fe(){return Object.create(null)}function B(s){s.forEach(bt)}function ce(s){return typeof s=="function"}function K(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let de;function Nt(s,e){return s===e?!0:(de||(de=document.createElement("a")),de.href=e,s===de.href)}function $t(s){return Object.keys(s).length===0}function gt(s,...e){if(s==null){for(const n of e)n(void 0);return w}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function oe(s,e,t){s.$$.on_destroy.push(gt(e,t))}function je(s,e,t,n){if(s){const i=yt(s,e,t,n);return s[0](i)}}function yt(s,e,t,n){return s[1]&&n?ye(t.ctx.slice(),s[1](n(e))):t.ctx}function qe(s,e,t,n){if(s[2]&&n){const i=s[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)r[a]=e.dirty[a]|i[a];return r}return e.dirty|i}return e.dirty}function Le(s,e,t,n,i,r){if(i){const o=yt(e,t,n,r);s.p(o,i)}}function Ne(s){if(s.ctx.length>32){const e=[],t=s.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Be(s){const e={};for(const t in s)t[0]!=="$"&&(e[t]=s[t]);return e}const wt=typeof window<"u";let _t=wt?()=>window.performance.now():()=>Date.now(),$e=wt?s=>requestAnimationFrame(s):w;const X=new Set;function vt(s){X.forEach(e=>{e.c(s)||(X.delete(e),e.f())}),X.size!==0&&$e(vt)}function kt(s){let e;return X.size===0&&$e(vt),{promise:new Promise(t=>{X.add(e={c:s,f:t})}),abort(){X.delete(e)}}}function _(s,e){s.appendChild(e)}function St(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function Ut(s){const e=C("style");return e.textContent="/* empty */",Dt(St(s),e),e.sheet}function Dt(s,e){return _(s.head||s,e),e.sheet}function P(s,e,t){s.insertBefore(e,t||null)}function k(s){s.parentNode&&s.parentNode.removeChild(s)}function Ft(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function C(s){return document.createElement(s)}function L(s){return document.createTextNode(s)}function q(){return L(" ")}function W(){return L("")}function Me(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function Bt(s){return function(e){return e.preventDefault(),s.call(this,e)}}function E(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Mt(s){return Array.from(s.childNodes)}function me(s,e){e=""+e,s.data!==e&&(s.data=e)}function ze(s,e){s.value=e??""}function zt(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}function Ke(s,e){return new s(e)}const we=new Map;let _e=0;function Kt(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function Wt(s,e){const t={stylesheet:Ut(e),rules:{}};return we.set(s,t),t}function Ct(s,e,t,n,i,r,o,a=0){const c=16.666/n;let l=`{
`;for(let m=0;m<=1;m+=c){const g=e+(t-e)*r(m);l+=m*100+`%{${o(g,1-g)}}
`}const h=l+`100% {${o(t,1-t)}}
}`,u=`__svelte_${Kt(h)}_${a}`,f=St(s),{stylesheet:b,rules:d}=we.get(f)||Wt(f,s);d[u]||(d[u]=!0,b.insertRule(`@keyframes ${u} ${h}`,b.cssRules.length));const y=s.style.animation||"";return s.style.animation=`${y?`${y}, `:""}${u} ${n}ms linear ${i}ms 1 both`,_e+=1,u}function Ee(s,e){const t=(s.style.animation||"").split(", "),n=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-n.length;i&&(s.style.animation=n.join(", "),_e-=i,_e||Ht())}function Ht(){$e(()=>{_e||(we.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&k(e)}),we.clear())})}let ae;function U(s){ae=s}function le(){if(!ae)throw new Error("Function called outside component initialization");return ae}function Gt(s){le().$$.on_mount.push(s)}function Vt(s){le().$$.on_destroy.push(s)}function Se(s,e){return le().$$.context.set(s,e),e}function Re(s){return le().$$.context.get(s)}const Q=[],We=[];let Z=[];const He=[],Jt=Promise.resolve();let Ie=!1;function Qt(){Ie||(Ie=!0,Jt.then(Ue))}function ee(s){Z.push(s)}const Ce=new Set;let V=0;function Ue(){if(V!==0)return;const s=ae;do{try{for(;V<Q.length;){const e=Q[V];V++,U(e),Yt(e.$$)}}catch(e){throw Q.length=0,V=0,e}for(U(null),Q.length=0,V=0;We.length;)We.pop()();for(let e=0;e<Z.length;e+=1){const t=Z[e];Ce.has(t)||(Ce.add(t),t())}Z.length=0}while(Q.length);for(;He.length;)He.pop()();Ie=!1,Ce.clear(),U(s)}function Yt(s){if(s.fragment!==null){s.update(),B(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(ee)}}function Xt(s){const e=[],t=[];Z.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Z=e}let re;function Ot(){return re||(re=Promise.resolve(),re.then(()=>{re=null})),re}function ve(s,e,t){s.dispatchEvent(zt(`${e?"intro":"outro"}${t}`))}const be=new Set;let F;function ne(){F={r:0,c:[],p:F}}function se(){F.r||B(F.c),F=F.p}function S(s,e){s&&s.i&&(be.delete(s),s.i(e))}function T(s,e,t,n){if(s&&s.o){if(be.has(s))return;be.add(s),F.c.push(()=>{be.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}const Pt={duration:0};function Zt(s,e,t){const n={direction:"in"};let i=e(s,t,n),r=!1,o,a,c=0;function l(){o&&Ee(s,o)}function h(){const{delay:f=0,duration:b=300,easing:d=mt,tick:y=w,css:m}=i||Pt;m&&(o=Ct(s,0,1,b,f,d,m,c++)),y(0,1);const g=_t()+f,R=g+b;a&&a.abort(),r=!0,ee(()=>ve(s,!0,"start")),a=kt(O=>{if(r){if(O>=R)return y(1,0),ve(s,!0,"end"),l(),r=!1;if(O>=g){const I=d((O-g)/b);y(I,1-I)}}return r})}let u=!1;return{start(){u||(u=!0,Ee(s),ce(i)?(i=i(n),Ot().then(h)):h())},invalidate(){u=!1},end(){r&&(l(),r=!1)}}}function en(s,e,t){const n={direction:"out"};let i=e(s,t,n),r=!0,o;const a=F;a.r+=1;let c;function l(){const{delay:h=0,duration:u=300,easing:f=mt,tick:b=w,css:d}=i||Pt;d&&(o=Ct(s,1,0,u,h,f,d));const y=_t()+h,m=y+u;ee(()=>ve(s,!1,"start")),"inert"in s&&(c=s.inert,s.inert=!0),kt(g=>{if(r){if(g>=m)return b(0,1),ve(s,!1,"end"),--a.r||B(a.c),!1;if(g>=y){const R=f((g-y)/u);b(1-R,R)}}return r})}return ce(i)?Ot().then(()=>{i=i(n),l()}):l(),{end(h){h&&"inert"in s&&(s.inert=c),h&&i.tick&&i.tick(1,0),r&&(o&&Ee(s,o),r=!1)}}}function Ge(s,e){const t=e.token={};function n(i,r,o,a){if(e.token!==t)return;e.resolved=a;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=a);const l=i&&(e.current=i)(c);let h=!1;e.block&&(e.blocks?e.blocks.forEach((u,f)=>{f!==r&&u&&(ne(),T(u,1,1,()=>{e.blocks[f]===u&&(e.blocks[f]=null)}),se())}):e.block.d(1),l.c(),S(l,1),l.m(e.mount(),e.anchor),h=!0),e.block=l,e.blocks&&(e.blocks[r]=l),h&&Ue()}if(Lt(s)){const i=le();if(s.then(r=>{U(i),n(e.then,1,e.value,r),U(null)},r=>{if(U(i),n(e.catch,2,e.error,r),U(null),!e.hasCatch)throw r}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,s),!0;e.resolved=s}}function tn(s,e,t){const n=e.slice(),{resolved:i}=s;s.current===s.then&&(n[s.value]=i),s.current===s.catch&&(n[s.error]=i),s.block.p(n,t)}function Ve(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Je(s,e){const t={},n={},i={$$scope:1};let r=s.length;for(;r--;){const o=s[r],a=e[r];if(a){for(const c in o)c in a||(n[c]=1);for(const c in a)i[c]||(t[c]=a[c],i[c]=1);s[r]=a}else for(const c in o)i[c]=1}for(const o in n)o in t||(t[o]=void 0);return t}function fe(s){return typeof s=="object"&&s!==null?s:{}}function te(s){s&&s.c()}function M(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),ee(()=>{const r=s.$$.on_mount.map(bt).filter(ce);s.$$.on_destroy?s.$$.on_destroy.push(...r):B(r),s.$$.on_mount=[]}),i.forEach(ee)}function z(s,e){const t=s.$$;t.fragment!==null&&(Xt(t.after_update),B(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function nn(s,e){s.$$.dirty[0]===-1&&(Q.push(s),Qt(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function ue(s,e,t,n,i,r,o=null,a=[-1]){const c=ae;U(s);const l=s.$$={fragment:null,ctx:[],props:r,update:w,not_equal:i,bound:Fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Fe(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(l.root);let h=!1;if(l.ctx=t?t(s,e.props||{},(u,f,...b)=>{const d=b.length?b[0]:f;return l.ctx&&i(l.ctx[u],l.ctx[u]=d)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](d),h&&nn(s,u)),f}):[],l.update(),h=!0,B(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const u=Mt(e.target);l.fragment&&l.fragment.l(u),u.forEach(k)}else l.fragment&&l.fragment.c();e.intro&&S(s.$$.fragment),M(s,e.target,e.anchor),Ue()}U(c)}class he{constructor(){ke(this,"$$");ke(this,"$$set")}$destroy(){z(this,1),this.$destroy=w}$on(e,t){if(!ce(t))return w;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!$t(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const sn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(sn);const Qe={},Ae={},rn={},Tt=/^:(.+)/,Ye=4,on=3,an=2,cn=1,ln=1,xe=s=>s.replace(/(^\/+|\/+$)/g,"").split("/"),Oe=s=>s.replace(/(^\/+|\/+$)/g,""),un=(s,e)=>{const t=s.default?0:xe(s.path).reduce((n,i)=>(n+=Ye,i===""?n+=ln:Tt.test(i)?n+=an:i[0]==="*"?n-=Ye+cn:n+=on,n),0);return{route:s,score:t,index:e}},hn=s=>s.map(un).sort((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index),Xe=(s,e)=>{let t,n;const[i]=e.split("?"),r=xe(i),o=r[0]==="",a=hn(s);for(let c=0,l=a.length;c<l;c++){const h=a[c].route;let u=!1;if(h.default){n={route:h,params:{},uri:e};continue}const f=xe(h.path),b={},d=Math.max(r.length,f.length);let y=0;for(;y<d;y++){const m=f[y],g=r[y];if(m&&m[0]==="*"){const O=m==="*"?"*":m.slice(1);b[O]=r.slice(y).map(decodeURIComponent).join("/");break}if(typeof g>"u"){u=!0;break}const R=Tt.exec(m);if(R&&!o){const O=decodeURIComponent(g);b[R[1]]=O}else if(m!==g){u=!0;break}}if(!u){t={route:h,params:b,uri:"/"+r.slice(0,y).join("/")};break}}return t||n||null},Ze=(s,e)=>`${Oe(e==="/"?s:`${Oe(s)}/${Oe(e)}`)}/`,Et=()=>typeof window<"u"&&"document"in window&&"location"in window,dn=s=>({params:s&4}),et=s=>({params:s[2]});function tt(s){let e,t,n,i;const r=[pn,fn],o=[];function a(c,l){return c[0]?0:1}return e=a(s),t=o[e]=r[e](s),{c(){t.c(),n=W()},m(c,l){o[e].m(c,l),P(c,n,l),i=!0},p(c,l){let h=e;e=a(c),e===h?o[e].p(c,l):(ne(),T(o[h],1,1,()=>{o[h]=null}),se(),t=o[e],t?t.p(c,l):(t=o[e]=r[e](c),t.c()),S(t,1),t.m(n.parentNode,n))},i(c){i||(S(t),i=!0)},o(c){T(t),i=!1},d(c){c&&k(n),o[e].d(c)}}}function fn(s){let e;const t=s[8].default,n=je(t,s,s[7],et);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),e=!0},p(i,r){n&&n.p&&(!e||r&132)&&Le(n,t,i,i[7],e?qe(t,i[7],r,dn):Ne(i[7]),et)},i(i){e||(S(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function pn(s){let e,t,n,i={ctx:s,current:null,token:null,hasCatch:!1,pending:gn,then:bn,catch:mn,value:12,blocks:[,,,]};return Ge(t=s[0],i),{c(){e=W(),i.block.c()},m(r,o){P(r,e,o),i.block.m(r,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(r,o){s=r,i.ctx=s,o&1&&t!==(t=s[0])&&Ge(t,i)||tn(i,s,o)},i(r){n||(S(i.block),n=!0)},o(r){for(let o=0;o<3;o+=1){const a=i.blocks[o];T(a)}n=!1},d(r){r&&k(e),i.block.d(r),i.token=null,i=null}}}function mn(s){return{c:w,m:w,p:w,i:w,o:w,d:w}}function bn(s){var a;let e,t,n;const i=[s[2],s[3]];var r=((a=s[12])==null?void 0:a.default)||s[12];function o(c,l){let h={};if(l!==void 0&&l&12)h=Je(i,[l&4&&fe(c[2]),l&8&&fe(c[3])]);else for(let u=0;u<i.length;u+=1)h=ye(h,i[u]);return{props:h}}return r&&(e=Ke(r,o(s))),{c(){e&&te(e.$$.fragment),t=W()},m(c,l){e&&M(e,c,l),P(c,t,l),n=!0},p(c,l){var h;if(l&1&&r!==(r=((h=c[12])==null?void 0:h.default)||c[12])){if(e){ne();const u=e;T(u.$$.fragment,1,0,()=>{z(u,1)}),se()}r?(e=Ke(r,o(c,l)),te(e.$$.fragment),S(e.$$.fragment,1),M(e,t.parentNode,t)):e=null}else if(r){const u=l&12?Je(i,[l&4&&fe(c[2]),l&8&&fe(c[3])]):{};e.$set(u)}},i(c){n||(e&&S(e.$$.fragment,c),n=!0)},o(c){e&&T(e.$$.fragment,c),n=!1},d(c){c&&k(t),e&&z(e,c)}}}function gn(s){return{c:w,m:w,p:w,i:w,o:w,d:w}}function yn(s){let e,t,n=s[1]&&s[1].route===s[5]&&tt(s);return{c(){n&&n.c(),e=W()},m(i,r){n&&n.m(i,r),P(i,e,r),t=!0},p(i,[r]){i[1]&&i[1].route===i[5]?n?(n.p(i,r),r&2&&S(n,1)):(n=tt(i),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(ne(),T(n,1,1,()=>{n=null}),se())},i(i){t||(S(n),t=!0)},o(i){T(n),t=!1},d(i){i&&k(e),n&&n.d(i)}}}function wn(s,e,t){let n,{$$slots:i={},$$scope:r}=e,{path:o=""}=e,{component:a=null}=e,c={},l={};const{registerRoute:h,unregisterRoute:u,activeRoute:f}=Re(Ae);oe(s,f,d=>t(1,n=d));const b={path:o,default:o===""};return h(b),Vt(()=>{u(b)}),s.$$set=d=>{t(11,e=ye(ye({},e),Be(d))),"path"in d&&t(6,o=d.path),"component"in d&&t(0,a=d.component),"$$scope"in d&&t(7,r=d.$$scope)},s.$$.update=()=>{if(n&&n.route===b){t(2,c=n.params);const{component:d,path:y,...m}=e;t(3,l=m),d&&(d.toString().startsWith("class ")?t(0,a=d):t(0,a=d())),Et()&&!n.preserveScroll&&(window==null||window.scrollTo(0,0))}},e=Be(e),[a,n,c,l,f,b,o,r,i]}class nt extends he{constructor(e){super(),ue(this,e,wn,yn,K,{path:6,component:0})}}const J=[];function _n(s,e){return{subscribe:Y(s,e).subscribe}}function Y(s,e=w){let t;const n=new Set;function i(a){if(K(s,a)&&(s=a,t)){const c=!J.length;for(const l of n)l[1](),J.push(l,s);if(c){for(let l=0;l<J.length;l+=2)J[l][0](J[l+1]);J.length=0}}}function r(a){i(a(s))}function o(a,c=w){const l=[a,c];return n.add(l),n.size===1&&(t=e(i,r)||w),a(s),()=>{n.delete(l),n.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:o}}function vn(s,e,t){const n=!Array.isArray(s),i=n?[s]:s;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return _n(t,(o,a)=>{let c=!1;const l=[];let h=0,u=w;const f=()=>{if(h)return;u();const d=e(n?l[0]:l,o,a);r?o(d):u=ce(d)?d:w},b=i.map((d,y)=>gt(d,m=>{l[y]=m,h&=~(1<<y),c&&f()},()=>{h|=1<<y}));return c=!0,f(),function(){B(b),u(),c=!1}})}const Pe=s=>({...s.location,state:s.history.state,key:s.history.state&&s.history.state.key||"initial"}),kn=s=>{const e=[];let t=Pe(s);return{get location(){return t},listen(n){e.push(n);const i=()=>{t=Pe(s),n({location:t,action:"POP"})};return s.addEventListener("popstate",i),()=>{s.removeEventListener("popstate",i);const r=e.indexOf(n);e.splice(r,1)}},navigate(n,{state:i,replace:r=!1,preserveScroll:o=!1}={}){i={...i,key:Date.now()+""};try{r?s.history.replaceState(i,"",n):s.history.pushState(i,"",n)}catch{s.location[r?"replace":"assign"](n)}t=Pe(s),e.forEach(a=>a({location:t,action:"PUSH",preserveScroll:o})),document.activeElement.blur()}}},Sn=(s="/")=>{let e=0;const t=[{pathname:s,search:""}],n=[];return{get location(){return t[e]},addEventListener(i,r){},removeEventListener(i,r){},history:{get entries(){return t},get index(){return e},get state(){return n[e]},pushState(i,r,o){const[a,c=""]=o.split("?");e++,t.push({pathname:a,search:c}),n.push(i)},replaceState(i,r,o){const[a,c=""]=o.split("?");t[e]={pathname:a,search:c},n[e]=i}}}},Cn=kn(Et()?window:Sn()),On=s=>({route:s&4,location:s&2}),st=s=>({route:s[2]&&s[2].uri,location:s[1]}),Pn=s=>({route:s&4,location:s&2}),it=s=>({route:s[2]&&s[2].uri,location:s[1]});function Tn(s){let e;const t=s[15].default,n=je(t,s,s[14],st);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),e=!0},p(i,r){n&&n.p&&(!e||r&16390)&&Le(n,t,i,i[14],e?qe(t,i[14],r,On):Ne(i[14]),st)},i(i){e||(S(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function En(s){let e=s[1].pathname,t,n,i=rt(s);return{c(){i.c(),t=W()},m(r,o){i.m(r,o),P(r,t,o),n=!0},p(r,o){o&2&&K(e,e=r[1].pathname)?(ne(),T(i,1,1,w),se(),i=rt(r),i.c(),S(i,1),i.m(t.parentNode,t)):i.p(r,o)},i(r){n||(S(i),n=!0)},o(r){T(i),n=!1},d(r){r&&k(t),i.d(r)}}}function rt(s){let e,t,n,i;const r=s[15].default,o=je(r,s,s[14],it);return{c(){e=C("div"),o&&o.c()},m(a,c){P(a,e,c),o&&o.m(e,null),i=!0},p(a,c){o&&o.p&&(!i||c&16390)&&Le(o,r,a,a[14],i?qe(r,a[14],c,Pn):Ne(a[14]),it)},i(a){i||(S(o,a),a&&ee(()=>{i&&(n&&n.end(1),t=Zt(e,s[3],{}),t.start())}),i=!0)},o(a){T(o,a),t&&t.invalidate(),a&&(n=en(e,s[3],{})),i=!1},d(a){a&&k(e),o&&o.d(a),a&&n&&n.end()}}}function Rn(s){let e,t,n,i;const r=[En,Tn],o=[];function a(c,l){return c[0]?0:1}return e=a(s),t=o[e]=r[e](s),{c(){t.c(),n=W()},m(c,l){o[e].m(c,l),P(c,n,l),i=!0},p(c,[l]){let h=e;e=a(c),e===h?o[e].p(c,l):(ne(),T(o[h],1,1,()=>{o[h]=null}),se(),t=o[e],t?t.p(c,l):(t=o[e]=r[e](c),t.c()),S(t,1),t.m(n.parentNode,n))},i(c){i||(S(t),i=!0)},o(c){T(t),i=!1},d(c){c&&k(n),o[e].d(c)}}}function In(s,e,t){let n,i,r,o,{$$slots:a={},$$scope:c}=e,{basepath:l="/"}=e,{url:h=null}=e,{viewtransition:u=null}=e,{history:f=Cn}=e;const b=(p,v,A)=>{const x=u(A);return typeof(x==null?void 0:x.fn)=="function"?x.fn(p,x):x};Se(rn,f);const d=Re(Qe),y=Re(Ae),m=Y([]);oe(s,m,p=>t(12,i=p));const g=Y(null);oe(s,g,p=>t(2,o=p));let R=!1;const O=d||Y(h?{pathname:h}:f.location);oe(s,O,p=>t(1,n=p));const I=y?y.routerBase:Y({path:l,uri:l});oe(s,I,p=>t(13,r=p));const D=vn([I,g],([p,v])=>{if(!v)return p;const{path:A}=p,{route:x,uri:xt}=v;return{path:x.default?A:x.path.replace(/\*.*$/,""),uri:xt}}),$=p=>{const{path:v}=r;let{path:A}=p;if(p._path=A,p.path=Ze(v,A),typeof window>"u"){if(R)return;const x=Xe([p],n.pathname);x&&(g.set(x),R=!0)}else m.update(x=>[...x,p])},ie=p=>{m.update(v=>v.filter(A=>A!==p))};let G=!1;return d||(Gt(()=>f.listen(v=>{t(11,G=v.preserveScroll||!1),O.set(v.location)})),Se(Qe,O)),Se(Ae,{activeRoute:g,base:I,routerBase:D,registerRoute:$,unregisterRoute:ie}),s.$$set=p=>{"basepath"in p&&t(8,l=p.basepath),"url"in p&&t(9,h=p.url),"viewtransition"in p&&t(0,u=p.viewtransition),"history"in p&&t(10,f=p.history),"$$scope"in p&&t(14,c=p.$$scope)},s.$$.update=()=>{if(s.$$.dirty&8192){const{path:p}=r;m.update(v=>v.map(A=>Object.assign(A,{path:Ze(p,A._path)})))}if(s.$$.dirty&6146){const p=Xe(i,n.pathname);g.set({...p,preserveScroll:G})}},[u,n,o,b,m,g,O,I,l,h,f,G,i,r,c,a]}class An extends he{constructor(e){super(),ue(this,e,In,Rn,K,{basepath:8,url:9,viewtransition:0,history:10})}}const xn="/assets/GlyphBlank-516a65ac.png",jn="/assets/TaikoHeart-cb083bcf.png",qn="/assets/Milestones-e342f2f8.png";function Ln(s){let e,t,n,i,r,o,a,c;return{c(){e=C("a"),e.innerHTML=`<div class="text-center relative"><img src="${xn}" class="taikoImg mx-auto h-64" alt=""/></div> <h1 class="font-bold text-3xl text-[#ffad12]">dojo node</h1> <div class="absolute text-sm font-semibold bottom-8 opacity-80 text-[#ffad12]">click to enter</div>`,t=q(),n=C("img"),r=q(),o=C("div"),o.innerHTML=`<div class="w-full md:w-1/3 p-4"><h2 class="md:hidden text-lg font-normal mb-10 text-center text-[#1c7f3f]">milestone <span class="block md:block font-bold">01</span></h2> <ul><li class="mb-5 milestone done svelte-zkpmub"><span class="mr-2">🥋</span>
        Support testnet alpha-5</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>
        Look into development to support and switch between different nodes on different
        layers easily (L1/L2/L3)</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Draft overview for Proposer/Prover rewards visually and functionally
        (charts/metrics)</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>
        Build online presence and branding.</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Bug fixes for minor issues, fine tuning existing dashboard</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Increase documentation. Providing useful information for operators
        around VPS access, networkwide access, docker vs systemwide stats</li></ul></div> <div class="w-full md:w-1/3 p-4"><h2 class="md:hidden text-lg font-normal mb-10 text-center text-[#1c7f3f]">milestone <span class="block md:block font-bold">02</span></h2> <ul><li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Build a dedicated desktop app (for the dashboard only) and/or integrate
        into taiko’s GUI app</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Implement overview of Proposer/Prover rewards (charts/metrics)</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Deploy custom website with installation guides and visual
        instructions/tutorials.</li> <li class="mb-5 milestone done svelte-zkpmub"><span class="mr-2">🥋</span>

        Implement and host a ‘preview’ of the dashboard where any taiko node
        runner can enter their IP address and see basic node stats such as
        syncing progress</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Focus on research for new features to integrate based on latest taiko
        developments</li></ul></div> <div class="w-full md:w-1/3 p-4"><h2 class="md:hidden text-lg font-normal mb-10 text-center text-[#1c7f3f]">milestone <span class="block md:block font-bold">03</span></h2> <ul><li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Build Discord (or operate one inside Taiko) for community support
        (node/dashboard runners), updates, bug fixes</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Take on feature requests from the community and implement into latest
        version</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>
        Develop and implement alternative design formats</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">🥋</span>

        Create and distribute digital content around what nodes are, their
        importance in securing a blockchain, and why we want to enable everyday
        people to run one. Increase education with established branding</li></ul></div>`,a=q(),c=C("div"),c.innerHTML=`<p>made with <img class="w-3 inline align-baseline" src="${jn}" alt="Taiko heart icon"/> by</p> <p>wolfez and helios</p> <div class="flex items-center justify-center mt-2"><a href="https://github.com/wolfderechter/taiko-node-dashboard"><span class="github-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.20-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.20-.82 2.20-.82.44 1.10.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.20 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></span></a></div>`,E(e,"href","http://dashboard.dojonode.xyz"),E(e,"class","flex flex-col relative items-center pt-4 md:pt-4"),Nt(n.src,i=qn)||E(n,"src",i),E(n,"class","mt-8 hidden md:block"),E(n,"alt",""),E(o,"class","flex flex-col items-baseline space-y-8 md:space-y-0 md:flex-row md:justify-center md:space-x-16 mt-8 md:mt-0 w-[90%] m-auto text-[#a52519] font-medium"),E(c,"class","footer text-center svelte-zkpmub")},m(l,h){P(l,e,h),P(l,t,h),P(l,n,h),P(l,r,h),P(l,o,h),P(l,a,h),P(l,c,h)},p:w,i:w,o:w,d(l){l&&(k(e),k(t),k(n),k(r),k(o),k(a),k(c))}}}class Nn extends he{constructor(e){super(),ue(this,e,null,Ln,K,{})}}function $n(s){try{return localStorage.getItem(s)}catch(e){return console.error(`Error getting "${s}" from localStorage:`,e),null}}const Un={Original:"original",Light:"light",Dark:"dark",Paper:"paper"};let ot=$n("theme");const Dn=Y(ot||Un.Paper);class N extends Error{constructor(e){var t,n,i,r;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,N.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof N||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(r=(i=(n=this.originalError)==null?void 0:n.cause)==null?void 0:i.message)!=null&&r.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const pe=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Fn(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},e||{}).decode||Bn;let i=0;for(;i<s.length;){const r=s.indexOf("=",i);if(r===-1)break;let o=s.indexOf(";",i);if(o===-1)o=s.length;else if(o<r){i=s.lastIndexOf(";",r-1)+1;continue}const a=s.slice(i,r).trim();if(t[a]===void 0){let c=s.slice(r+1,o).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[a]=n(c)}catch{t[a]=c}}i=o+1}return t}function at(s,e,t){const n=Object.assign({},t||{}),i=n.encode||Mn;if(!pe.test(s))throw new TypeError("argument name is invalid");const r=i(e);if(r&&!pe.test(r))throw new TypeError("argument val is invalid");let o=s+"="+r;if(n.maxAge!=null){const a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!pe.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!pe.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function Bn(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function Mn(s){return encodeURIComponent(s)}let Rt;function ge(s){if(s)try{const e=decodeURIComponent(Rt(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function It(s,e=0){let t=ge(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}Rt=typeof atob=="function"?atob:s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,r=0,o="";n=e.charAt(r++);~n&&(t=i%4?64*t+n:n,i++%4)?o+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};const ct="pb_auth";class zn{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!It(this.token)}get isAdmin(){return ge(this.token).type==="admin"}get isAuthRecord(){return ge(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=ct){const n=Fn(e||"")[t]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=ct){var c,l;const n={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=ge(this.token);n.expires=i!=null&&i.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},n,e);const r={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let o=at(t,JSON.stringify(r),e);const a=typeof Blob<"u"?new Blob([o]).size:o.length;if(r.model&&a>4096){r.model={id:(c=r==null?void 0:r.model)==null?void 0:c.id,email:(l=r==null?void 0:r.model)==null?void 0:l.email};const h=["collectionId","username","verified"];for(const u in this.model)h.includes(u)&&(r.model[u]=this.model[u]);o=at(t,JSON.stringify(r),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Kn extends zn{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class H{constructor(e){this.client=e}}class Wn extends H{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,i,r,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:i,duration:r}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class De extends H{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(i=>{var r;return i.items=((r=i.items)==null?void 0:r.map(o=>this.decode(o)))||[],i})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var i;if(!((i=n==null?void 0:n.items)!=null&&i.length))throw new N({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],i=async r=>this.getList(r,e||500,t).then(o=>{const a=o.items;return n=n.concat(a),a.length==o.perPage?i(r+1):n});return i(1)}}function j(s,e,t,n){const i=n!==void 0;return i||t!==void 0?i?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function Te(s){var e;(e=s._resetAutoRefresh)==null||e.call(s)}class Hn extends De{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(i=>{var r,o;return((r=this.client.authStore.model)==null?void 0:r.id)===i.id&&((o=this.client.authStore.model)==null?void 0:o.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,r;return n&&((i=this.client.authStore.model)==null?void 0:i.id)===e&&((r=this.client.authStore.model)==null?void 0:r.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,n,i){let r={method:"POST",body:{identity:e,password:t}};r=j("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",r,n,i);const o=r.autoRefreshThreshold;delete r.autoRefreshThreshold,r.autoRefresh||Te(this.client);let a=await this.client.send(this.baseCrudPath+"/auth-with-password",r);return a=this.authResponse(a),o&&function(l,h,u,f){Te(l);const b=l.beforeSend,d=l.authStore.model,y=l.authStore.onChange((m,g)=>{(!m||(g==null?void 0:g.id)!=(d==null?void 0:d.id)||(g!=null&&g.collectionId||d!=null&&d.collectionId)&&(g==null?void 0:g.collectionId)!=(d==null?void 0:d.collectionId))&&Te(l)});l._resetAutoRefresh=function(){y(),l.beforeSend=b,delete l._resetAutoRefresh},l.beforeSend=async(m,g)=>{var D;const R=l.authStore.token;if((D=g.query)!=null&&D.autoRefresh)return b?b(m,g):{url:m,sendOptions:g};let O=l.authStore.isValid;if(O&&It(l.authStore.token,h))try{await u()}catch{O=!1}O||await f();const I=g.headers||{};for(let $ in I)if($.toLowerCase()=="authorization"&&R==I[$]&&l.authStore.token){I[$]=l.authStore.token;break}return g.headers=I,b?b(m,g):{url:m,sendOptions:g}}}(this.client,o,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},r))),a}authRefresh(e,t){let n={method:"POST"};return n=j("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=j("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=j("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,i,r),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}class At extends H{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t){var i;if(!e)throw new Error("topic must be set.");const n=function(r){const o=r;let a;try{a=JSON.parse(o==null?void 0:o.data)}catch{}t(a||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(n),this.isConnected?this.subscriptions[e].length===1?await this.submitSubscriptions():(i=this.eventSource)==null||i.addEventListener(e,n):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,n)}async unsubscribe(e){var t;if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)==null||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||await this.submitSubscriptions():this.disconnect()}}async unsubscribeByPrefix(e){var n;let t=!1;for(let i in this.subscriptions)if(i.startsWith(e)){t=!0;for(let r of this.subscriptions[i])(n=this.eventSource)==null||n.removeEventListener(i,r);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var i;if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let n=!1;for(let r=this.subscriptions[e].length-1;r>=0;r--)this.subscriptions[e][r]===t&&(n=!0,delete this.subscriptions[e][r],this.subscriptions[e].splice(r,1),(i=this.eventSource)==null||i.removeEventListener(e,t));n&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||await this.submitSubscriptions():this.disconnect())}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let i in this.subscriptions)if((n=this.subscriptions[i])!=null&&n.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,await this.submitSubscriptions()}).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new N(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class Gn extends De{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribeOne(e,t){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)}async subscribe(e,t){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)}async unsubscribe(e){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(i=>{var r,o,a;return((r=this.client.authStore.model)==null?void 0:r.id)!==(i==null?void 0:i.id)||((o=this.client.authStore.model)==null?void 0:o.collectionId)!==this.collectionIdOrName&&((a=this.client.authStore.model)==null?void 0:a.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,r,o;return!n||((i=this.client.authStore.model)==null?void 0:i.id)!==e||((r=this.client.authStore.model)==null?void 0:r.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)==null?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,i){let r={method:"POST",body:{identity:e,password:t}};return r=j("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/auth-with-password",r).then(o=>this.authResponse(o))}authWithOAuth2Code(e,t,n,i,r,o,a){let c={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:i,createData:r}};return c=j("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",c,o,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(l=>this.authResponse(l))}async authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(await this.listAuthMethods()).authProviders.find(c=>c.name===t.provider);if(!n)throw new N(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),r=new At(this.client);let o=null;function a(){o==null||o.close(),r.unsubscribe()}return t.urlCallback||(o=lt(void 0)),new Promise(async(c,l)=>{var h;try{await r.subscribe("@oauth2",async d=>{const y=r.clientId;try{if(!d.state||y!==d.state)throw new Error("State parameters don't match.");const m=Object.assign({},t);delete m.provider,delete m.scopes,delete m.createData,delete m.urlCallback;const g=await this.authWithOAuth2Code(n.name,d.code,n.codeVerifier,i,t.createData,m);c(g)}catch(m){l(new N(m))}a()});const u={state:r.clientId};(h=t.scopes)!=null&&h.length&&(u.scope=t.scopes.join(" "));const f=this._replaceQueryParams(n.authUrl+i,u);await(t.urlCallback||function(d){o?o.location.href=d:o=lt(d)})(f)}catch(u){a(),l(new N(u))}})}authRefresh(e,t){let n={method:"POST"};return n=j("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=j("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=j("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,i,r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}requestVerification(e,t,n){let i={method:"POST",body:{email:e}};return i=j("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}confirmVerification(e,t,n){let i={method:"POST",body:{token:e}};return i=j("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>!0)}requestEmailChange(e,t,n){let i={method:"POST",body:{newEmail:e}};return i=j("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}confirmEmailChange(e,t,n,i){let r={method:"POST",body:{token:e,password:t}};return r=j("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",r).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const r={},o=i.split("&");for(const a of o){if(a=="")continue;const c=a.split("=");r[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let a in t)t.hasOwnProperty(a)&&(t[a]==null?delete r[a]:r[a]=t[a]);i="";for(let a in r)r.hasOwnProperty(a)&&(i!=""&&(i+="&"),i+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(r[a].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function lt(s){if(typeof window>"u"||!(window!=null&&window.open))throw new N(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,t=t>i?i:t;let r=n/2-e/2,o=i/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+o+",left="+r+",resizable,menubar=no")}class Vn extends De{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,n){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)}}class Jn extends H{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class Qn extends H{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Yn extends H{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let r=this.client.buildUrl(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const o=new URLSearchParams(n);r+=(r.includes("?")?"&":"?")+o}return r}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Xn extends H{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const Zn=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class es{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new Kn,this.admins=new Hn(this),this.collections=new Vn(this),this.files=new Yn(this),this.logs=new Jn(this),this.settings=new Wn(this),this.realtime=new At(this),this.health=new Qn(this),this.backups=new Xn(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Gn(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let n in t){let i=t[n];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+n+"}",i)}return e}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var n;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(n=window.location.origin)!=null&&n.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(n,t));i.url!==void 0||i.options!==void 0?(n=i.url||n,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(async i=>{let r={};try{r=await i.json()}catch{}if(this.afterSend&&(r=await this.afterSend(i,r)),i.status>=400)throw new N({url:i.url,status:i.status,data:r});return r}).catch(i=>{throw new N(i)})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)Zn.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const i=Array.isArray(e[n])?e[n]:[e[n]];for(let r of i)t.append(n,r)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let i of n)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const i=e[n],r=encodeURIComponent(n);if(Array.isArray(i))for(const o of i)t.push(r+"="+encodeURIComponent(o));else i instanceof Date?t.push(r+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(i))):t.push(r+"="+encodeURIComponent(i))}return t.join("&")}}function ut(s,e,t){const n=s.slice();return n[9]=e[t],n}function ht(s){let e,t=Ve(s[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=dt(ut(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=W()},m(i,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,r);P(i,e,r)},p(i,r){if(r&1){t=Ve(i[0]);let o;for(o=0;o<t.length;o+=1){const a=ut(i,t,o);n[o]?n[o].p(a,r):(n[o]=dt(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){i&&k(e),Ft(n,i)}}}function dt(s){let e,t=s[9].url+"",n,i,r=s[9].minimumGas+"",o,a,c=s[9].currentCapacity+"",l,h;return{c(){e=C("li"),n=L(t),i=L(" -- minimum proof fee of "),o=L(r),a=L(` -- current capacity
          is `),l=L(c),h=q()},m(u,f){P(u,e,f),_(e,n),_(e,i),_(e,o),_(e,a),_(e,l),_(e,h)},p(u,f){f&1&&t!==(t=u[9].url+"")&&me(n,t),f&1&&r!==(r=u[9].minimumGas+"")&&me(o,r),f&1&&c!==(c=u[9].currentCapacity+"")&&me(l,c)},d(u){u&&k(e)}}}function ts(s){let e,t,n,i,r,o,a,c,l,h,u,f,b,d,y,m,g,R,O,I=s[0].filter(ft).map(pt).join(",")+"",D,$,ie,G,p=s[0].length>0&&ht(s);return{c(){e=C("div"),t=C("h1"),t.textContent="Prover market page",n=q(),i=C("form"),r=C("h1"),r.textContent="Add new prover endpoint",o=q(),a=C("input"),c=q(),l=C("button"),l.textContent="Add",h=q(),u=C("ul"),p&&p.c(),f=q(),b=C("div"),d=C("h1"),d.textContent="One liner of prover endpoints that currently have capacity:",y=q(),m=C("pre"),g=L("      "),R=C("code"),O=L("PROVER_ENDPOINTS="),D=L(I),$=L(`
    `),E(t,"class","text-3xl mb-4"),E(r,"class","text-xl"),E(a,"class","my-3 py-1 text-center"),E(a,"placeholder","http://192.168.20.1:9876"),E(l,"class","bg-slate-500 text-white px-4 py-2 rounded mt-2"),E(i,"class","flex flex-col my-16"),E(d,"class","text-lg"),E(m,"class","bg-gray-800 text-white pt-6 rounded pr-16"),E(b,"class","p-4 rounded-lg"),E(e,"class","flex flex-col justify-center items-center mt-16")},m(v,A){P(v,e,A),_(e,t),_(e,n),_(e,i),_(i,r),_(i,o),_(i,a),ze(a,s[1]),_(i,c),_(i,l),_(e,h),_(e,u),p&&p.m(u,null),_(e,f),_(e,b),_(b,d),_(b,y),_(b,m),_(m,g),_(m,R),_(R,O),_(R,D),_(m,$),ie||(G=[Me(a,"input",s[3]),Me(i,"submit",Bt(s[2]))],ie=!0)},p(v,[A]){A&2&&a.value!==v[1]&&ze(a,v[1]),v[0].length>0?p?p.p(v,A):(p=ht(v),p.c(),p.m(u,null)):p&&(p.d(1),p=null),A&1&&I!==(I=v[0].filter(ft).map(pt).join(",")+"")&&me(D,I)},i:w,o:w,d(v){v&&k(e),p&&p.d(),ie=!1,B(G)}}}async function ns(s){try{const e=await fetch(`${s.url}/status`);if(e.ok){const t=await e.json();return{url:s.url,minimumGas:t.minProofFee,currentCapacity:t.currentCapacity}}else throw new Error(`Request failed with status: ${e.status}`)}catch(e){console.error(e)}}const ft=s=>s.currentCapacity>0,pt=s=>s.url;function ss(s,e,t){let n=[],i=[],r;const o=new es({}.VITE_PB_URI);async function a(){await o.collection("users").authWithPassword({}.VITE_PB_USER,{}.VITE_PB_PASSWORD),n=[],n=await o.collection("prover_endpoints").getFullList({sort:"-created"}),c()}a();async function c(){t(0,i=[]);for(const f of n){const b=await ns(f);b!=null&&t(0,i=[...i,b])}i.sort((f,b)=>b.currentCapacity-f.currentCapacity)}async function l(){try{if(t(1,r=r.replace(/\/+$/,"")),h(r))return;const f=await o.collection("prover_endpoints").create({url:r});a(),t(1,r="")}catch(f){console.error(f)}}function h(f){return i.find(b=>b.url===f)!==void 0}function u(){r=this.value,t(1,r)}return[i,r,l,u]}class is extends he{constructor(e){super(),ue(this,e,ss,ts,K,{})}}function rs(s){let e,t;return e=new Nn({}),{c(){te(e.$$.fragment)},m(n,i){M(e,n,i),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){z(e,n)}}}function os(s){let e,t,n,i,r;return t=new nt({props:{path:"/",$$slots:{default:[rs]},$$scope:{ctx:s}}}),i=new nt({props:{path:"provers",component:is}}),{c(){e=C("div"),te(t.$$.fragment),n=q(),te(i.$$.fragment)},m(o,a){P(o,e,a),M(t,e,null),_(e,n),M(i,e,null),r=!0},p(o,a){const c={};a&8&&(c.$$scope={dirty:a,ctx:o}),t.$set(c)},i(o){r||(S(t.$$.fragment,o),S(i.$$.fragment,o),r=!0)},o(o){T(t.$$.fragment,o),T(i.$$.fragment,o),r=!1},d(o){o&&k(e),z(t),z(i)}}}function as(s){let e,t,n;return t=new An({props:{url:s[0],$$slots:{default:[os]},$$scope:{ctx:s}}}),{c(){e=C("main"),te(t.$$.fragment),E(e,"class","px-2 md:px-6")},m(i,r){P(i,e,r),M(t,e,null),n=!0},p(i,[r]){const o={};r&1&&(o.url=i[0]),r&8&&(o.$$scope={dirty:r,ctx:i}),t.$set(o)},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){T(t.$$.fragment,i),n=!1},d(i){i&&k(e),z(t)}}}function cs(s,e,t){let{url:n=""}=e;const i=document.body;return Dn.subscribe(r=>{i.setAttribute("data-theme",r)}),s.$$set=r=>{"url"in r&&t(0,n=r.url)},[n]}class ls extends he{constructor(e){super(),ue(this,e,cs,as,K,{url:0})}}new ls({target:document.getElementById("app")});
