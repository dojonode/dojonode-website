var Ft=Object.defineProperty;var Mt=(s,e,t)=>e in s?Ft(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Re=(s,e,t)=>(Mt(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function k(){}const wt=s=>s;function V(s,e){for(const t in e)s[t]=e[t];return s}function Kt(s){return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"}function _t(s){return s()}function He(){return Object.create(null)}function W(s){s.forEach(_t)}function pe(s){return typeof s=="function"}function H(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let me;function Bt(s,e){return s===e?!0:(me||(me=document.createElement("a")),me.href=e,s===me.href)}function $t(s){return Object.keys(s).length===0}function vt(s,...e){if(s==null){for(const n of e)n(void 0);return k}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function z(s,e,t){s.$$.on_destroy.push(vt(e,t))}function Oe(s,e,t,n){if(s){const i=St(s,e,t,n);return s[0](i)}}function St(s,e,t,n){return s[1]&&n?V(t.ctx.slice(),s[1](n(e))):t.ctx}function Pe(s,e,t,n){if(s[2]&&n){const i=s[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(e.dirty.length,i.length);for(let c=0;c<o;c+=1)r[c]=e.dirty[c]|i[c];return r}return e.dirty|i}return e.dirty}function Te(s,e,t,n,i,r){if(i){const o=St(e,t,n,r);s.p(o,i)}}function Ee(s){if(s.ctx.length>32){const e=[],t=s.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Ne(s){const e={};for(const t in s)t[0]!=="$"&&(e[t]=s[t]);return e}function Ge(s,e){const t={};e=new Set(e);for(const n in s)!e.has(n)&&n[0]!=="$"&&(t[n]=s[n]);return t}const kt=typeof window<"u";let Ct=kt?()=>window.performance.now():()=>Date.now(),Be=kt?s=>requestAnimationFrame(s):k;const ne=new Set;function Ot(s){ne.forEach(e=>{e.c(s)||(ne.delete(e),e.f())}),ne.size!==0&&Be(Ot)}function Pt(s){let e;return ne.size===0&&Be(Ot),{promise:new Promise(t=>{ne.add(e={c:s,f:t})}),abort(){ne.delete(e)}}}function w(s,e){s.appendChild(e)}function Tt(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function Wt(s){const e=C("style");return e.textContent="/* empty */",Ht(Tt(s),e),e.sheet}function Ht(s,e){return w(s.head||s,e),e.sheet}function R(s,e,t){s.insertBefore(e,t||null)}function P(s){s.parentNode&&s.parentNode.removeChild(s)}function Gt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function C(s){return document.createElement(s)}function D(s){return document.createTextNode(s)}function L(){return D(" ")}function Q(){return D("")}function Ue(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function zt(s){return function(e){return e.preventDefault(),s.call(this,e)}}function x(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}const Vt=["width","height"];function ze(s,e){const t=Object.getOwnPropertyDescriptors(s.__proto__);for(const n in e)e[n]==null?s.removeAttribute(n):n==="style"?s.style.cssText=e[n]:n==="__value"?s.value=s[n]=e[n]:t[n]&&t[n].set&&Vt.indexOf(n)===-1?s[n]=e[n]:x(s,n,e[n])}function Jt(s){return Array.from(s.childNodes)}function ye(s,e){e=""+e,s.data!==e&&(s.data=e)}function Ve(s,e){s.value=e??""}function Et(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}function Je(s,e){return new s(e)}const ve=new Map;let Se=0;function Qt(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function Yt(s,e){const t={stylesheet:Wt(e),rules:{}};return ve.set(s,t),t}function Rt(s,e,t,n,i,r,o,c=0){const a=16.666/n;let l=`{
`;for(let p=0;p<=1;p+=a){const f=e+(t-e)*r(p);l+=p*100+`%{${o(f,1-f)}}
`}const u=l+`100% {${o(t,1-t)}}
}`,h=`__svelte_${Qt(u)}_${c}`,b=Tt(s),{stylesheet:g,rules:d}=ve.get(b)||Yt(b,s);d[h]||(d[h]=!0,g.insertRule(`@keyframes ${h} ${u}`,g.cssRules.length));const y=s.style.animation||"";return s.style.animation=`${y?`${y}, `:""}${h} ${n}ms linear ${i}ms 1 both`,Se+=1,h}function De(s,e){const t=(s.style.animation||"").split(", "),n=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-n.length;i&&(s.style.animation=n.join(", "),Se-=i,Se||Xt())}function Xt(){Be(()=>{Se||(ve.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&P(e)}),ve.clear())})}let de;function M(s){de=s}function oe(){if(!de)throw new Error("Function called outside component initialization");return de}function Zt(s){oe().$$.on_mount.push(s)}function en(s){oe().$$.on_destroy.push(s)}function tn(){const s=oe();return(e,t,{cancelable:n=!1}={})=>{const i=s.$$.callbacks[e];if(i){const r=Et(e,t,{cancelable:n});return i.slice().forEach(o=>{o.call(s,r)}),!r.defaultPrevented}return!0}}function Ie(s,e){return oe().$$.context.set(s,e),e}function se(s){return oe().$$.context.get(s)}const ee=[],Qe=[];let ie=[];const Ye=[],nn=Promise.resolve();let Fe=!1;function sn(){Fe||(Fe=!0,nn.then($e))}function re(s){ie.push(s)}const xe=new Set;let X=0;function $e(){if(X!==0)return;const s=de;do{try{for(;X<ee.length;){const e=ee[X];X++,M(e),rn(e.$$)}}catch(e){throw ee.length=0,X=0,e}for(M(null),ee.length=0,X=0;Qe.length;)Qe.pop()();for(let e=0;e<ie.length;e+=1){const t=ie[e];xe.has(t)||(xe.add(t),t())}ie.length=0}while(ee.length);for(;Ye.length;)Ye.pop()();Fe=!1,xe.clear(),M(s)}function rn(s){if(s.fragment!==null){s.update(),W(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(re)}}function on(s){const e=[],t=[];ie.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ie=e}let he;function It(){return he||(he=Promise.resolve(),he.then(()=>{he=null})),he}function ke(s,e,t){s.dispatchEvent(Et(`${e?"intro":"outro"}${t}`))}const we=new Set;let K;function ae(){K={r:0,c:[],p:K}}function ce(){K.r||W(K.c),K=K.p}function T(s,e){s&&s.i&&(we.delete(s),s.i(e))}function I(s,e,t,n){if(s&&s.o){if(we.has(s))return;we.add(s),K.c.push(()=>{we.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}const xt={duration:0};function an(s,e,t){const n={direction:"in"};let i=e(s,t,n),r=!1,o,c,a=0;function l(){o&&De(s,o)}function u(){const{delay:b=0,duration:g=300,easing:d=wt,tick:y=k,css:p}=i||xt;p&&(o=Rt(s,0,1,g,b,d,p,a++)),y(0,1);const f=Ct()+b,_=f+g;c&&c.abort(),r=!0,re(()=>ke(s,!0,"start")),c=Pt(v=>{if(r){if(v>=_)return y(1,0),ke(s,!0,"end"),l(),r=!1;if(v>=f){const E=d((v-f)/g);y(E,1-E)}}return r})}let h=!1;return{start(){h||(h=!0,De(s),pe(i)?(i=i(n),It().then(u)):u())},invalidate(){h=!1},end(){r&&(l(),r=!1)}}}function cn(s,e,t){const n={direction:"out"};let i=e(s,t,n),r=!0,o;const c=K;c.r+=1;let a;function l(){const{delay:u=0,duration:h=300,easing:b=wt,tick:g=k,css:d}=i||xt;d&&(o=Rt(s,1,0,h,u,b,d));const y=Ct()+u,p=y+h;re(()=>ke(s,!1,"start")),"inert"in s&&(a=s.inert,s.inert=!0),Pt(f=>{if(r){if(f>=p)return g(0,1),ke(s,!1,"end"),--c.r||W(c.c),!1;if(f>=y){const _=b((f-y)/h);g(1-_,_)}}return r})}return pe(i)?It().then(()=>{i=i(n),l()}):l(),{end(u){u&&"inert"in s&&(s.inert=a),u&&i.tick&&i.tick(1,0),r&&(o&&De(s,o),r=!1)}}}function Xe(s,e){const t=e.token={};function n(i,r,o,c){if(e.token!==t)return;e.resolved=c;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=c);const l=i&&(e.current=i)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,b)=>{b!==r&&h&&(ae(),I(h,1,1,()=>{e.blocks[b]===h&&(e.blocks[b]=null)}),ce())}):e.block.d(1),l.c(),T(l,1),l.m(e.mount(),e.anchor),u=!0),e.block=l,e.blocks&&(e.blocks[r]=l),u&&$e()}if(Kt(s)){const i=oe();if(s.then(r=>{M(i),n(e.then,1,e.value,r),M(null)},r=>{if(M(i),n(e.catch,2,e.error,r),M(null),!e.hasCatch)throw r}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,s),!0;e.resolved=s}}function ln(s,e,t){const n=e.slice(),{resolved:i}=s;s.current===s.then&&(n[s.value]=i),s.current===s.catch&&(n[s.error]=i),s.block.p(n,t)}function Ze(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Me(s,e){const t={},n={},i={$$scope:1};let r=s.length;for(;r--;){const o=s[r],c=e[r];if(c){for(const a in o)a in c||(n[a]=1);for(const a in c)i[a]||(t[a]=c[a],i[a]=1);s[r]=c}else for(const a in o)i[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}function be(s){return typeof s=="object"&&s!==null?s:{}}function J(s){s&&s.c()}function B(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),re(()=>{const r=s.$$.on_mount.map(_t).filter(pe);s.$$.on_destroy?s.$$.on_destroy.push(...r):W(r),s.$$.on_mount=[]}),i.forEach(re)}function $(s,e){const t=s.$$;t.fragment!==null&&(on(t.after_update),W(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function un(s,e){s.$$.dirty[0]===-1&&(ee.push(s),sn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function le(s,e,t,n,i,r,o=null,c=[-1]){const a=de;M(s);const l=s.$$={fragment:null,ctx:[],props:r,update:k,not_equal:i,bound:He(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:He(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};o&&o(l.root);let u=!1;if(l.ctx=t?t(s,e.props||{},(h,b,...g)=>{const d=g.length?g[0]:b;return l.ctx&&i(l.ctx[h],l.ctx[h]=d)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](d),u&&un(s,h)),b}):[],l.update(),u=!0,W(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const h=Jt(e.target);l.fragment&&l.fragment.l(h),h.forEach(P)}else l.fragment&&l.fragment.c();e.intro&&T(s.$$.fragment),B(s,e.target,e.anchor),$e()}M(a)}class ue{constructor(){Re(this,"$$");Re(this,"$$set")}$destroy(){$(this,1),this.$destroy=k}$on(e,t){if(!pe(t))return k;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!$t(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const hn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(hn);const Ke={},Ce={},At={},jt=/^:(.+)/,et=4,dn=3,fn=2,pn=1,mn=1,fe=s=>s.replace(/(^\/+|\/+$)/g,"").split("/"),Ae=s=>s.replace(/(^\/+|\/+$)/g,""),bn=(s,e)=>{const t=s.default?0:fe(s.path).reduce((n,i)=>(n+=et,i===""?n+=mn:jt.test(i)?n+=fn:i[0]==="*"?n-=et+pn:n+=dn,n),0);return{route:s,score:t,index:e}},gn=s=>s.map(bn).sort((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index),tt=(s,e)=>{let t,n;const[i]=e.split("?"),r=fe(i),o=r[0]==="",c=gn(s);for(let a=0,l=c.length;a<l;a++){const u=c[a].route;let h=!1;if(u.default){n={route:u,params:{},uri:e};continue}const b=fe(u.path),g={},d=Math.max(r.length,b.length);let y=0;for(;y<d;y++){const p=b[y],f=r[y];if(p&&p[0]==="*"){const v=p==="*"?"*":p.slice(1);g[v]=r.slice(y).map(decodeURIComponent).join("/");break}if(typeof f>"u"){h=!0;break}const _=jt.exec(p);if(_&&!o){const v=decodeURIComponent(f);g[_[1]]=v}else if(p!==f){h=!0;break}}if(!h){t={route:u,params:g,uri:"/"+r.slice(0,y).join("/")};break}}return t||n||null},je=(s,e)=>s+(e?`?${e}`:""),yn=(s,e)=>{if(s.startsWith("/"))return s;const[t,n]=s.split("?"),[i]=e.split("?"),r=fe(t),o=fe(i);if(r[0]==="")return je(i,n);if(!r[0].startsWith(".")){const l=o.concat(r).join("/");return je((i==="/"?"":"/")+l,n)}const c=o.concat(r),a=[];return c.forEach(l=>{l===".."?a.pop():l!=="."&&a.push(l)}),je("/"+a.join("/"),n)},nt=(s,e)=>`${Ae(e==="/"?s:`${Ae(s)}/${Ae(e)}`)}/`,wn=s=>!s.defaultPrevented&&s.button===0&&!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey),Lt=()=>typeof window<"u"&&"document"in window&&"location"in window,_n=s=>({active:s&4}),st=s=>({active:!!s[2]});function vn(s){let e,t,n,i;const r=s[17].default,o=Oe(r,s,s[16],st);let c=[{href:s[0]},{"aria-current":s[2]},s[1],s[6]],a={};for(let l=0;l<c.length;l+=1)a=V(a,c[l]);return{c(){e=C("a"),o&&o.c(),ze(e,a)},m(l,u){R(l,e,u),o&&o.m(e,null),t=!0,n||(i=Ue(e,"click",s[5]),n=!0)},p(l,[u]){o&&o.p&&(!t||u&65540)&&Te(o,r,l,l[16],t?Pe(r,l[16],u,_n):Ee(l[16]),st),ze(e,a=Me(c,[(!t||u&1)&&{href:l[0]},(!t||u&4)&&{"aria-current":l[2]},u&2&&l[1],u&64&&l[6]]))},i(l){t||(T(o,l),t=!0)},o(l){I(o,l),t=!1},d(l){l&&P(e),o&&o.d(l),n=!1,i()}}}function Sn(s,e,t){let n;const i=["to","replace","state","getProps","preserveScroll"];let r=Ge(e,i),o,c,{$$slots:a={},$$scope:l}=e,{to:u="#"}=e,{replace:h=!1}=e,{state:b={}}=e,{getProps:g=()=>({})}=e,{preserveScroll:d=!1}=e;const y=se(Ke);z(s,y,S=>t(14,o=S));const{base:p}=se(Ce);z(s,p,S=>t(15,c=S));const{navigate:f}=se(At),_=tn();let v,E,q,U;const G=S=>{if(_("click",S),wn(S)){S.preventDefault();const m=o.pathname===v||h;f(v,{state:b,replace:m,preserveScroll:d})}};return s.$$set=S=>{e=V(V({},e),Ne(S)),t(6,r=Ge(e,i)),"to"in S&&t(7,u=S.to),"replace"in S&&t(8,h=S.replace),"state"in S&&t(9,b=S.state),"getProps"in S&&t(10,g=S.getProps),"preserveScroll"in S&&t(11,d=S.preserveScroll),"$$scope"in S&&t(16,l=S.$$scope)},s.$$.update=()=>{s.$$.dirty&32896&&t(0,v=u==="/"?c.uri:yn(u,c.uri)),s.$$.dirty&16385&&t(12,E=o.pathname.startsWith(v)),s.$$.dirty&16385&&t(13,q=v===o.pathname),s.$$.dirty&8192&&t(2,n=q?"page":void 0),t(1,U=g({location:o,href:v,isPartiallyCurrent:E,isCurrent:q,existingProps:r}))},[v,U,n,y,p,G,r,u,h,b,g,d,E,q,o,c,l,a]}class kn extends ue{constructor(e){super(),le(this,e,Sn,vn,H,{to:7,replace:8,state:9,getProps:10,preserveScroll:11})}}const Cn=s=>({params:s&4}),it=s=>({params:s[2]});function rt(s){let e,t,n,i;const r=[Pn,On],o=[];function c(a,l){return a[0]?0:1}return e=c(s),t=o[e]=r[e](s),{c(){t.c(),n=Q()},m(a,l){o[e].m(a,l),R(a,n,l),i=!0},p(a,l){let u=e;e=c(a),e===u?o[e].p(a,l):(ae(),I(o[u],1,1,()=>{o[u]=null}),ce(),t=o[e],t?t.p(a,l):(t=o[e]=r[e](a),t.c()),T(t,1),t.m(n.parentNode,n))},i(a){i||(T(t),i=!0)},o(a){I(t),i=!1},d(a){a&&P(n),o[e].d(a)}}}function On(s){let e;const t=s[8].default,n=Oe(t,s,s[7],it);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),e=!0},p(i,r){n&&n.p&&(!e||r&132)&&Te(n,t,i,i[7],e?Pe(t,i[7],r,Cn):Ee(i[7]),it)},i(i){e||(T(n,i),e=!0)},o(i){I(n,i),e=!1},d(i){n&&n.d(i)}}}function Pn(s){let e,t,n,i={ctx:s,current:null,token:null,hasCatch:!1,pending:Rn,then:En,catch:Tn,value:12,blocks:[,,,]};return Xe(t=s[0],i),{c(){e=Q(),i.block.c()},m(r,o){R(r,e,o),i.block.m(r,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(r,o){s=r,i.ctx=s,o&1&&t!==(t=s[0])&&Xe(t,i)||ln(i,s,o)},i(r){n||(T(i.block),n=!0)},o(r){for(let o=0;o<3;o+=1){const c=i.blocks[o];I(c)}n=!1},d(r){r&&P(e),i.block.d(r),i.token=null,i=null}}}function Tn(s){return{c:k,m:k,p:k,i:k,o:k,d:k}}function En(s){var c;let e,t,n;const i=[s[2],s[3]];var r=((c=s[12])==null?void 0:c.default)||s[12];function o(a,l){let u={};if(l!==void 0&&l&12)u=Me(i,[l&4&&be(a[2]),l&8&&be(a[3])]);else for(let h=0;h<i.length;h+=1)u=V(u,i[h]);return{props:u}}return r&&(e=Je(r,o(s))),{c(){e&&J(e.$$.fragment),t=Q()},m(a,l){e&&B(e,a,l),R(a,t,l),n=!0},p(a,l){var u;if(l&1&&r!==(r=((u=a[12])==null?void 0:u.default)||a[12])){if(e){ae();const h=e;I(h.$$.fragment,1,0,()=>{$(h,1)}),ce()}r?(e=Je(r,o(a,l)),J(e.$$.fragment),T(e.$$.fragment,1),B(e,t.parentNode,t)):e=null}else if(r){const h=l&12?Me(i,[l&4&&be(a[2]),l&8&&be(a[3])]):{};e.$set(h)}},i(a){n||(e&&T(e.$$.fragment,a),n=!0)},o(a){e&&I(e.$$.fragment,a),n=!1},d(a){a&&P(t),e&&$(e,a)}}}function Rn(s){return{c:k,m:k,p:k,i:k,o:k,d:k}}function In(s){let e,t,n=s[1]&&s[1].route===s[5]&&rt(s);return{c(){n&&n.c(),e=Q()},m(i,r){n&&n.m(i,r),R(i,e,r),t=!0},p(i,[r]){i[1]&&i[1].route===i[5]?n?(n.p(i,r),r&2&&T(n,1)):(n=rt(i),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(ae(),I(n,1,1,()=>{n=null}),ce())},i(i){t||(T(n),t=!0)},o(i){I(n),t=!1},d(i){i&&P(e),n&&n.d(i)}}}function xn(s,e,t){let n,{$$slots:i={},$$scope:r}=e,{path:o=""}=e,{component:c=null}=e,a={},l={};const{registerRoute:u,unregisterRoute:h,activeRoute:b}=se(Ce);z(s,b,d=>t(1,n=d));const g={path:o,default:o===""};return u(g),en(()=>{h(g)}),s.$$set=d=>{t(11,e=V(V({},e),Ne(d))),"path"in d&&t(6,o=d.path),"component"in d&&t(0,c=d.component),"$$scope"in d&&t(7,r=d.$$scope)},s.$$.update=()=>{if(n&&n.route===g){t(2,a=n.params);const{component:d,path:y,...p}=e;t(3,l=p),d&&(d.toString().startsWith("class ")?t(0,c=d):t(0,c=d())),Lt()&&!n.preserveScroll&&(window==null||window.scrollTo(0,0))}},e=Ne(e),[c,n,a,l,b,g,o,r,i]}class ot extends ue{constructor(e){super(),le(this,e,xn,In,H,{path:6,component:0})}}const Z=[];function An(s,e){return{subscribe:te(s,e).subscribe}}function te(s,e=k){let t;const n=new Set;function i(c){if(H(s,c)&&(s=c,t)){const a=!Z.length;for(const l of n)l[1](),Z.push(l,s);if(a){for(let l=0;l<Z.length;l+=2)Z[l][0](Z[l+1]);Z.length=0}}}function r(c){i(c(s))}function o(c,a=k){const l=[c,a];return n.add(l),n.size===1&&(t=e(i,r)||k),c(s),()=>{n.delete(l),n.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:o}}function jn(s,e,t){const n=!Array.isArray(s),i=n?[s]:s;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return An(t,(o,c)=>{let a=!1;const l=[];let u=0,h=k;const b=()=>{if(u)return;h();const d=e(n?l[0]:l,o,c);r?o(d):h=pe(d)?d:k},g=i.map((d,y)=>vt(d,p=>{l[y]=p,u&=~(1<<y),a&&b()},()=>{u|=1<<y}));return a=!0,b(),function(){W(g),h(),a=!1}})}const Le=s=>({...s.location,state:s.history.state,key:s.history.state&&s.history.state.key||"initial"}),Ln=s=>{const e=[];let t=Le(s);return{get location(){return t},listen(n){e.push(n);const i=()=>{t=Le(s),n({location:t,action:"POP"})};return s.addEventListener("popstate",i),()=>{s.removeEventListener("popstate",i);const r=e.indexOf(n);e.splice(r,1)}},navigate(n,{state:i,replace:r=!1,preserveScroll:o=!1}={}){i={...i,key:Date.now()+""};try{r?s.history.replaceState(i,"",n):s.history.pushState(i,"",n)}catch{s.location[r?"replace":"assign"](n)}t=Le(s),e.forEach(c=>c({location:t,action:"PUSH",preserveScroll:o})),document.activeElement.blur()}}},qn=(s="/")=>{let e=0;const t=[{pathname:s,search:""}],n=[];return{get location(){return t[e]},addEventListener(i,r){},removeEventListener(i,r){},history:{get entries(){return t},get index(){return e},get state(){return n[e]},pushState(i,r,o){const[c,a=""]=o.split("?");e++,t.push({pathname:c,search:a}),n.push(i)},replaceState(i,r,o){const[c,a=""]=o.split("?");t[e]={pathname:c,search:a},n[e]=i}}}},Nn=Ln(Lt()?window:qn()),Un=s=>({route:s&4,location:s&2}),at=s=>({route:s[2]&&s[2].uri,location:s[1]}),Dn=s=>({route:s&4,location:s&2}),ct=s=>({route:s[2]&&s[2].uri,location:s[1]});function Fn(s){let e;const t=s[15].default,n=Oe(t,s,s[14],at);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),e=!0},p(i,r){n&&n.p&&(!e||r&16390)&&Te(n,t,i,i[14],e?Pe(t,i[14],r,Un):Ee(i[14]),at)},i(i){e||(T(n,i),e=!0)},o(i){I(n,i),e=!1},d(i){n&&n.d(i)}}}function Mn(s){let e=s[1].pathname,t,n,i=lt(s);return{c(){i.c(),t=Q()},m(r,o){i.m(r,o),R(r,t,o),n=!0},p(r,o){o&2&&H(e,e=r[1].pathname)?(ae(),I(i,1,1,k),ce(),i=lt(r),i.c(),T(i,1),i.m(t.parentNode,t)):i.p(r,o)},i(r){n||(T(i),n=!0)},o(r){I(i),n=!1},d(r){r&&P(t),i.d(r)}}}function lt(s){let e,t,n,i;const r=s[15].default,o=Oe(r,s,s[14],ct);return{c(){e=C("div"),o&&o.c()},m(c,a){R(c,e,a),o&&o.m(e,null),i=!0},p(c,a){o&&o.p&&(!i||a&16390)&&Te(o,r,c,c[14],i?Pe(r,c[14],a,Dn):Ee(c[14]),ct)},i(c){i||(T(o,c),c&&re(()=>{i&&(n&&n.end(1),t=an(e,s[3],{}),t.start())}),i=!0)},o(c){I(o,c),t&&t.invalidate(),c&&(n=cn(e,s[3],{})),i=!1},d(c){c&&P(e),o&&o.d(c),c&&n&&n.end()}}}function Kn(s){let e,t,n,i;const r=[Mn,Fn],o=[];function c(a,l){return a[0]?0:1}return e=c(s),t=o[e]=r[e](s),{c(){t.c(),n=Q()},m(a,l){o[e].m(a,l),R(a,n,l),i=!0},p(a,[l]){let u=e;e=c(a),e===u?o[e].p(a,l):(ae(),I(o[u],1,1,()=>{o[u]=null}),ce(),t=o[e],t?t.p(a,l):(t=o[e]=r[e](a),t.c()),T(t,1),t.m(n.parentNode,n))},i(a){i||(T(t),i=!0)},o(a){I(t),i=!1},d(a){a&&P(n),o[e].d(a)}}}function Bn(s,e,t){let n,i,r,o,{$$slots:c={},$$scope:a}=e,{basepath:l="/"}=e,{url:u=null}=e,{viewtransition:h=null}=e,{history:b=Nn}=e;const g=(m,O,A)=>{const j=h(A);return typeof(j==null?void 0:j.fn)=="function"?j.fn(m,j):j};Ie(At,b);const d=se(Ke),y=se(Ce),p=te([]);z(s,p,m=>t(12,i=m));const f=te(null);z(s,f,m=>t(2,o=m));let _=!1;const v=d||te(u?{pathname:u}:b.location);z(s,v,m=>t(1,n=m));const E=y?y.routerBase:te({path:l,uri:l});z(s,E,m=>t(13,r=m));const q=jn([E,f],([m,O])=>{if(!O)return m;const{path:A}=m,{route:j,uri:Dt}=O;return{path:j.default?A:j.path.replace(/\*.*$/,""),uri:Dt}}),U=m=>{const{path:O}=r;let{path:A}=m;if(m._path=A,m.path=nt(O,A),typeof window>"u"){if(_)return;const j=tt([m],n.pathname);j&&(f.set(j),_=!0)}else p.update(j=>[...j,m])},G=m=>{p.update(O=>O.filter(A=>A!==m))};let S=!1;return d||(Zt(()=>b.listen(O=>{t(11,S=O.preserveScroll||!1),v.set(O.location)})),Ie(Ke,v)),Ie(Ce,{activeRoute:f,base:E,routerBase:q,registerRoute:U,unregisterRoute:G}),s.$$set=m=>{"basepath"in m&&t(8,l=m.basepath),"url"in m&&t(9,u=m.url),"viewtransition"in m&&t(0,h=m.viewtransition),"history"in m&&t(10,b=m.history),"$$scope"in m&&t(14,a=m.$$scope)},s.$$.update=()=>{if(s.$$.dirty&8192){const{path:m}=r;p.update(O=>O.map(A=>Object.assign(A,{path:nt(m,A._path)})))}if(s.$$.dirty&6146){const m=tt(i,n.pathname);f.set({...m,preserveScroll:S})}},[h,n,o,g,p,f,v,E,l,u,b,S,i,r,a,c]}class $n extends ue{constructor(e){super(),le(this,e,Bn,Kn,H,{basepath:8,url:9,viewtransition:0,history:10})}}const Wn="/assets/GlyphBlank-516a65ac.png",Hn="/assets/TaikoHeart-cb083bcf.png",Gn="/assets/Milestones-e342f2f8.png";function zn(s){let e;return{c(){e=D("---")},m(t,n){R(t,e,n)},d(t){t&&P(e)}}}function Vn(s){let e,t,n,i,r,o,c,a,l,u,h,b,g,d,y,p;return l=new kn({props:{to:"/provers",$$slots:{default:[zn]},$$scope:{ctx:s}}}),{c(){e=C("a"),e.innerHTML=`<div class="text-center relative"><img src="${Wn}" class="taikoImg mx-auto h-64" alt=""/></div> <h1 class="font-bold text-3xl text-[#ffad12]">dojo node</h1> <div class="absolute text-sm font-semibold bottom-8 opacity-80 text-[#ffad12]">click to enter</div>`,t=L(),n=C("img"),r=L(),o=C("div"),o.innerHTML=`<div class="w-full md:w-1/3 p-4"><h2 class="md:hidden text-lg font-normal mb-10 text-center text-[#1c7f3f]">milestone <span class="block md:block font-bold">01</span></h2> <ul><li class="mb-5 milestone done svelte-13xepnn"><span class="mr-2">🥋</span>
        Support testnet alpha-5</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>
        Look into development to support and switch between different nodes on different
        layers easily (L1/L2/L3)</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Draft overview for Proposer/Prover rewards visually and functionally
        (charts/metrics)</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>
        Build online presence and branding.</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Bug fixes for minor issues, fine tuning existing dashboard</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Increase documentation. Providing useful information for operators
        around VPS access, networkwide access, docker vs systemwide stats</li></ul></div> <div class="w-full md:w-1/3 p-4"><h2 class="md:hidden text-lg font-normal mb-10 text-center text-[#1c7f3f]">milestone <span class="block md:block font-bold">02</span></h2> <ul><li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Build a dedicated desktop app (for the dashboard only) and/or integrate
        into taiko’s GUI app</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Implement overview of Proposer/Prover rewards (charts/metrics)</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Deploy custom website with installation guides and visual
        instructions/tutorials.</li> <li class="mb-5 milestone done svelte-13xepnn"><span class="mr-2">🥋</span>

        Implement and host a ‘preview’ of the dashboard where any taiko node
        runner can enter their IP address and see basic node stats such as
        syncing progress</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Focus on research for new features to integrate based on latest taiko
        developments</li></ul></div> <div class="w-full md:w-1/3 p-4"><h2 class="md:hidden text-lg font-normal mb-10 text-center text-[#1c7f3f]">milestone <span class="block md:block font-bold">03</span></h2> <ul><li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Build Discord (or operate one inside Taiko) for community support
        (node/dashboard runners), updates, bug fixes</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Take on feature requests from the community and implement into latest
        version</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>
        Develop and implement alternative design formats</li> <li class="mb-5 milestone svelte-13xepnn"><span class="mr-2">🥋</span>

        Create and distribute digital content around what nodes are, their
        importance in securing a blockchain, and why we want to enable everyday
        people to run one. Increase education with established branding</li></ul></div>`,c=L(),a=C("div"),J(l.$$.fragment),u=L(),h=C("p"),h.innerHTML=`made with <img class="w-3 inline align-baseline" src="${Hn}" alt="Taiko heart icon"/> by`,b=L(),g=C("p"),g.textContent="wolfez and helios",d=L(),y=C("div"),y.innerHTML='<a href="https://github.com/wolfderechter/taiko-node-dashboard" target="_blank"><span class="github-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.20-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.20-.82 2.20-.82.44 1.10.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.20 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></span></a>',x(e,"href","http://dashboard.dojonode.xyz"),x(e,"class","flex flex-col relative items-center pt-4 md:pt-4"),Bt(n.src,i=Gn)||x(n,"src",i),x(n,"class","mt-8 hidden md:block"),x(n,"alt",""),x(o,"class","flex flex-col items-baseline space-y-8 md:space-y-0 md:flex-row md:justify-center md:space-x-16 mt-8 md:mt-0 w-[90%] m-auto text-[#a52519] font-medium"),x(y,"class","flex items-center justify-center mt-2"),x(a,"class","footer text-center svelte-13xepnn")},m(f,_){R(f,e,_),R(f,t,_),R(f,n,_),R(f,r,_),R(f,o,_),R(f,c,_),R(f,a,_),B(l,a,null),w(a,u),w(a,h),w(a,b),w(a,g),w(a,d),w(a,y),p=!0},p(f,[_]){const v={};_&1&&(v.$$scope={dirty:_,ctx:f}),l.$set(v)},i(f){p||(T(l.$$.fragment,f),p=!0)},o(f){I(l.$$.fragment,f),p=!1},d(f){f&&(P(e),P(t),P(n),P(r),P(o),P(c),P(a)),$(l)}}}class Jn extends ue{constructor(e){super(),le(this,e,null,Vn,H,{})}}function Qn(s){try{return localStorage.getItem(s)}catch(e){return console.error(`Error getting "${s}" from localStorage:`,e),null}}const Yn={Original:"original",Light:"light",Dark:"dark",Paper:"paper"};let ut=Qn("theme");const Xn=te(ut||Yn.Paper);class F extends Error{constructor(e){var t,n,i,r;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,F.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof F||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(r=(i=(n=this.originalError)==null?void 0:n.cause)==null?void 0:i.message)!=null&&r.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const ge=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Zn(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},e||{}).decode||es;let i=0;for(;i<s.length;){const r=s.indexOf("=",i);if(r===-1)break;let o=s.indexOf(";",i);if(o===-1)o=s.length;else if(o<r){i=s.lastIndexOf(";",r-1)+1;continue}const c=s.slice(i,r).trim();if(t[c]===void 0){let a=s.slice(r+1,o).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1));try{t[c]=n(a)}catch{t[c]=a}}i=o+1}return t}function ht(s,e,t){const n=Object.assign({},t||{}),i=n.encode||ts;if(!ge.test(s))throw new TypeError("argument name is invalid");const r=i(e);if(r&&!ge.test(r))throw new TypeError("argument val is invalid");let o=s+"="+r;if(n.maxAge!=null){const c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(c)}if(n.domain){if(!ge.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!ge.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function es(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function ts(s){return encodeURIComponent(s)}let qt;function _e(s){if(s)try{const e=decodeURIComponent(qt(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Nt(s,e=0){let t=_e(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}qt=typeof atob=="function"?atob:s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,r=0,o="";n=e.charAt(r++);~n&&(t=i%4?64*t+n:n,i++%4)?o+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};const dt="pb_auth";class ns{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Nt(this.token)}get isAdmin(){return _e(this.token).type==="admin"}get isAuthRecord(){return _e(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=dt){const n=Zn(e||"")[t]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=dt){var a,l;const n={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=_e(this.token);n.expires=i!=null&&i.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},n,e);const r={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let o=ht(t,JSON.stringify(r),e);const c=typeof Blob<"u"?new Blob([o]).size:o.length;if(r.model&&c>4096){r.model={id:(a=r==null?void 0:r.model)==null?void 0:a.id,email:(l=r==null?void 0:r.model)==null?void 0:l.email};const u=["collectionId","username","verified"];for(const h in this.model)u.includes(h)&&(r.model[h]=this.model[h]);o=ht(t,JSON.stringify(r),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class ss extends ns{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class Y{constructor(e){this.client=e}}class is extends Y{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,i,r,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:i,duration:r}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class We extends Y{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(i=>{var r;return i.items=((r=i.items)==null?void 0:r.map(o=>this.decode(o)))||[],i})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var i;if(!((i=n==null?void 0:n.items)!=null&&i.length))throw new F({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],i=async r=>this.getList(r,e||500,t).then(o=>{const c=o.items;return n=n.concat(c),c.length==o.perPage?i(r+1):n});return i(1)}}function N(s,e,t,n){const i=n!==void 0;return i||t!==void 0?i?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function qe(s){var e;(e=s._resetAutoRefresh)==null||e.call(s)}class rs extends We{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(i=>{var r,o;return((r=this.client.authStore.model)==null?void 0:r.id)===i.id&&((o=this.client.authStore.model)==null?void 0:o.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,r;return n&&((i=this.client.authStore.model)==null?void 0:i.id)===e&&((r=this.client.authStore.model)==null?void 0:r.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,n,i){let r={method:"POST",body:{identity:e,password:t}};r=N("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",r,n,i);const o=r.autoRefreshThreshold;delete r.autoRefreshThreshold,r.autoRefresh||qe(this.client);let c=await this.client.send(this.baseCrudPath+"/auth-with-password",r);return c=this.authResponse(c),o&&function(l,u,h,b){qe(l);const g=l.beforeSend,d=l.authStore.model,y=l.authStore.onChange((p,f)=>{(!p||(f==null?void 0:f.id)!=(d==null?void 0:d.id)||(f!=null&&f.collectionId||d!=null&&d.collectionId)&&(f==null?void 0:f.collectionId)!=(d==null?void 0:d.collectionId))&&qe(l)});l._resetAutoRefresh=function(){y(),l.beforeSend=g,delete l._resetAutoRefresh},l.beforeSend=async(p,f)=>{var q;const _=l.authStore.token;if((q=f.query)!=null&&q.autoRefresh)return g?g(p,f):{url:p,sendOptions:f};let v=l.authStore.isValid;if(v&&Nt(l.authStore.token,u))try{await h()}catch{v=!1}v||await b();const E=f.headers||{};for(let U in E)if(U.toLowerCase()=="authorization"&&_==E[U]&&l.authStore.token){E[U]=l.authStore.token;break}return f.headers=E,g?g(p,f):{url:p,sendOptions:f}}}(this.client,o,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},r))),c}authRefresh(e,t){let n={method:"POST"};return n=N("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=N("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=N("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,i,r),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}class Ut extends Y{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t){var i;if(!e)throw new Error("topic must be set.");const n=function(r){const o=r;let c;try{c=JSON.parse(o==null?void 0:o.data)}catch{}t(c||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(n),this.isConnected?this.subscriptions[e].length===1?await this.submitSubscriptions():(i=this.eventSource)==null||i.addEventListener(e,n):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,n)}async unsubscribe(e){var t;if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)==null||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||await this.submitSubscriptions():this.disconnect()}}async unsubscribeByPrefix(e){var n;let t=!1;for(let i in this.subscriptions)if(i.startsWith(e)){t=!0;for(let r of this.subscriptions[i])(n=this.eventSource)==null||n.removeEventListener(i,r);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var i;if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let n=!1;for(let r=this.subscriptions[e].length-1;r>=0;r--)this.subscriptions[e][r]===t&&(n=!0,delete this.subscriptions[e][r],this.subscriptions[e].splice(r,1),(i=this.eventSource)==null||i.removeEventListener(e,t));n&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||await this.submitSubscriptions():this.disconnect())}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let i in this.subscriptions)if((n=this.subscriptions[i])!=null&&n.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,await this.submitSubscriptions()}).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new F(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class os extends We{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribeOne(e,t){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)}async subscribe(e,t){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)}async unsubscribe(e){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(i=>{var r,o,c;return((r=this.client.authStore.model)==null?void 0:r.id)!==(i==null?void 0:i.id)||((o=this.client.authStore.model)==null?void 0:o.collectionId)!==this.collectionIdOrName&&((c=this.client.authStore.model)==null?void 0:c.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,r,o;return!n||((i=this.client.authStore.model)==null?void 0:i.id)!==e||((r=this.client.authStore.model)==null?void 0:r.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)==null?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,i){let r={method:"POST",body:{identity:e,password:t}};return r=N("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/auth-with-password",r).then(o=>this.authResponse(o))}authWithOAuth2Code(e,t,n,i,r,o,c){let a={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:i,createData:r}};return a=N("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",a,o,c),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",a).then(l=>this.authResponse(l))}async authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(await this.listAuthMethods()).authProviders.find(a=>a.name===t.provider);if(!n)throw new F(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),r=new Ut(this.client);let o=null;function c(){o==null||o.close(),r.unsubscribe()}return t.urlCallback||(o=ft(void 0)),new Promise(async(a,l)=>{var u;try{await r.subscribe("@oauth2",async d=>{const y=r.clientId;try{if(!d.state||y!==d.state)throw new Error("State parameters don't match.");const p=Object.assign({},t);delete p.provider,delete p.scopes,delete p.createData,delete p.urlCallback;const f=await this.authWithOAuth2Code(n.name,d.code,n.codeVerifier,i,t.createData,p);a(f)}catch(p){l(new F(p))}c()});const h={state:r.clientId};(u=t.scopes)!=null&&u.length&&(h.scope=t.scopes.join(" "));const b=this._replaceQueryParams(n.authUrl+i,h);await(t.urlCallback||function(d){o?o.location.href=d:o=ft(d)})(b)}catch(h){c(),l(new F(h))}})}authRefresh(e,t){let n={method:"POST"};return n=N("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=N("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=N("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,i,r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}requestVerification(e,t,n){let i={method:"POST",body:{email:e}};return i=N("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}confirmVerification(e,t,n){let i={method:"POST",body:{token:e}};return i=N("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>!0)}requestEmailChange(e,t,n){let i={method:"POST",body:{newEmail:e}};return i=N("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}confirmEmailChange(e,t,n,i){let r={method:"POST",body:{token:e,password:t}};return r=N("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",r).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const r={},o=i.split("&");for(const c of o){if(c=="")continue;const a=c.split("=");r[decodeURIComponent(a[0].replace(/\+/g," "))]=decodeURIComponent((a[1]||"").replace(/\+/g," "))}for(let c in t)t.hasOwnProperty(c)&&(t[c]==null?delete r[c]:r[c]=t[c]);i="";for(let c in r)r.hasOwnProperty(c)&&(i!=""&&(i+="&"),i+=encodeURIComponent(c.replace(/%20/g,"+"))+"="+encodeURIComponent(r[c].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function ft(s){if(typeof window>"u"||!(window!=null&&window.open))throw new F(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,t=t>i?i:t;let r=n/2-e/2,o=i/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+o+",left="+r+",resizable,menubar=no")}class as extends We{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,n){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)}}class cs extends Y{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class ls extends Y{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class us extends Y{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let r=this.client.buildUrl(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const o=new URLSearchParams(n);r+=(r.includes("?")?"&":"?")+o}return r}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class hs extends Y{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const ds=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class fs{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new ss,this.admins=new rs(this),this.collections=new as(this),this.files=new us(this),this.logs=new cs(this),this.settings=new is(this),this.realtime=new Ut(this),this.health=new ls(this),this.backups=new hs(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new os(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let n in t){let i=t[n];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+n+"}",i)}return e}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var n;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(n=window.location.origin)!=null&&n.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(n,t));i.url!==void 0||i.options!==void 0?(n=i.url||n,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(async i=>{let r={};try{r=await i.json()}catch{}if(this.afterSend&&(r=await this.afterSend(i,r)),i.status>=400)throw new F({url:i.url,status:i.status,data:r});return r}).catch(i=>{throw new F(i)})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)ds.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const i=Array.isArray(e[n])?e[n]:[e[n]];for(let r of i)t.append(n,r)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let i of n)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const i=e[n],r=encodeURIComponent(n);if(Array.isArray(i))for(const o of i)t.push(r+"="+encodeURIComponent(o));else i instanceof Date?t.push(r+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(i))):t.push(r+"="+encodeURIComponent(i))}return t.join("&")}}function pt(s,e,t){const n=s.slice();return n[8]=e[t],n}function mt(s){let e,t=Ze(s[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=bt(pt(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=Q()},m(i,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,r);R(i,e,r)},p(i,r){if(r&1){t=Ze(i[0]);let o;for(o=0;o<t.length;o+=1){const c=pt(i,t,o);n[o]?n[o].p(c,r):(n[o]=bt(c),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){i&&P(e),Gt(n,i)}}}function bt(s){let e,t=s[8].url+"",n,i,r=s[8].minimumGas+"",o,c,a=s[8].currentCapacity+"",l,u;return{c(){e=C("li"),n=D(t),i=D(" -- minimum proof fee of "),o=D(r),c=D(` -- current capacity
          is `),l=D(a),u=L()},m(h,b){R(h,e,b),w(e,n),w(e,i),w(e,o),w(e,c),w(e,l),w(e,u)},p(h,b){b&1&&t!==(t=h[8].url+"")&&ye(n,t),b&1&&r!==(r=h[8].minimumGas+"")&&ye(o,r),b&1&&a!==(a=h[8].currentCapacity+"")&&ye(l,a)},d(h){h&&P(e)}}}function ps(s){let e,t,n,i,r,o,c,a,l,u,h,b,g,d,y,p,f,_,v,E=s[0].filter(gt).map(yt).join(",")+"",q,U,G,S,m=s[0].length>0&&mt(s);return{c(){e=C("div"),t=C("h1"),t.textContent="Prover market page",n=L(),i=C("form"),r=C("h1"),r.textContent="Add new prover endpoint",o=L(),c=C("input"),a=L(),l=C("button"),l.textContent="Add",u=L(),h=C("ul"),m&&m.c(),b=L(),g=C("div"),d=C("h1"),d.textContent="One liner of prover endpoints that currently have capacity:",y=L(),p=C("pre"),f=D("      "),_=C("code"),v=D("PROVER_ENDPOINTS="),q=D(E),U=D(`
    `),x(t,"class","text-3xl mb-4"),x(r,"class","text-xl"),x(c,"class","my-3 py-1 text-center"),x(c,"placeholder","http://192.168.20.1:9876"),x(l,"class","bg-slate-500 text-white px-4 py-2 rounded mt-2"),x(i,"class","flex flex-col my-16"),x(d,"class","text-lg"),x(p,"class","bg-gray-800 text-white pt-6 rounded pr-16"),x(g,"class","p-4 rounded-lg"),x(e,"class","flex flex-col justify-center items-center mt-16")},m(O,A){R(O,e,A),w(e,t),w(e,n),w(e,i),w(i,r),w(i,o),w(i,c),Ve(c,s[1]),w(i,a),w(i,l),w(e,u),w(e,h),m&&m.m(h,null),w(e,b),w(e,g),w(g,d),w(g,y),w(g,p),w(p,f),w(p,_),w(_,v),w(_,q),w(p,U),G||(S=[Ue(c,"input",s[3]),Ue(i,"submit",zt(s[2]))],G=!0)},p(O,[A]){A&2&&c.value!==O[1]&&Ve(c,O[1]),O[0].length>0?m?m.p(O,A):(m=mt(O),m.c(),m.m(h,null)):m&&(m.d(1),m=null),A&1&&E!==(E=O[0].filter(gt).map(yt).join(",")+"")&&ye(q,E)},i:k,o:k,d(O){O&&P(e),m&&m.d(),G=!1,W(S)}}}const gt=s=>s.currentCapacity>0,yt=s=>s.url;function ms(s,e,t){let n=[],i;const r=new fs("https://provers.dojonode.xyz");async function o(){await r.collection("users").authWithPassword("dojonode","testing12345"),t(0,n=await r.send("/validProvers",{})),n.sort((u,h)=>h.currentCapacity-u.currentCapacity)}o();async function c(){try{if(t(1,i=i.replace(/\/+$/,"")),a(i))return;await r.collection("prover_endpoints").create({url:i}),o(),t(1,i="")}catch(u){console.error(u)}}function a(u){return n.find(h=>h.url===u)!==void 0}function l(){i=this.value,t(1,i)}return[n,i,c,l]}class bs extends ue{constructor(e){super(),le(this,e,ms,ps,H,{})}}function gs(s){let e,t;return e=new Jn({}),{c(){J(e.$$.fragment)},m(n,i){B(e,n,i),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function ys(s){let e,t,n,i,r;return t=new ot({props:{path:"/",$$slots:{default:[gs]},$$scope:{ctx:s}}}),i=new ot({props:{path:"provers",component:bs}}),{c(){e=C("div"),J(t.$$.fragment),n=L(),J(i.$$.fragment)},m(o,c){R(o,e,c),B(t,e,null),w(e,n),B(i,e,null),r=!0},p(o,c){const a={};c&4&&(a.$$scope={dirty:c,ctx:o}),t.$set(a)},i(o){r||(T(t.$$.fragment,o),T(i.$$.fragment,o),r=!0)},o(o){I(t.$$.fragment,o),I(i.$$.fragment,o),r=!1},d(o){o&&P(e),$(t),$(i)}}}function ws(s){let e,t,n;return t=new $n({props:{url:s[0],$$slots:{default:[ys]},$$scope:{ctx:s}}}),{c(){e=C("main"),J(t.$$.fragment),x(e,"class","px-2 md:px-6")},m(i,r){R(i,e,r),B(t,e,null),n=!0},p(i,[r]){const o={};r&1&&(o.url=i[0]),r&4&&(o.$$scope={dirty:r,ctx:i}),t.$set(o)},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){I(t.$$.fragment,i),n=!1},d(i){i&&P(e),$(t)}}}function _s(s,e,t){let{url:n=""}=e;const i=document.body;return Xn.subscribe(r=>{i.setAttribute("data-theme",r)}),s.$$set=r=>{"url"in r&&t(0,n=r.url)},[n]}class vs extends ue{constructor(e){super(),le(this,e,_s,ws,H,{url:0})}}new vs({target:document.getElementById("app")});
