var Ft=Object.defineProperty;var Bt=(s,e,t)=>e in s?Ft(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Re=(s,e,t)=>(Bt(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function w(){}const _t=s=>s;function J(s,e){for(const t in e)s[t]=e[t];return s}function Mt(s){return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"}function kt(s){return s()}function We(){return Object.create(null)}function W(s){s.forEach(kt)}function pe(s){return typeof s=="function"}function H(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let me;function zt(s,e){return s===e?!0:(me||(me=document.createElement("a")),me.href=e,s===me.href)}function Kt(s){return Object.keys(s).length===0}function vt(s,...e){if(s==null){for(const n of e)n(void 0);return w}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function V(s,e,t){s.$$.on_destroy.push(vt(e,t))}function Oe(s,e,t,n){if(s){const i=St(s,e,t,n);return s[0](i)}}function St(s,e,t,n){return s[1]&&n?J(t.ctx.slice(),s[1](n(e))):t.ctx}function Pe(s,e,t,n){if(s[2]&&n){const i=s[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],o=Math.max(e.dirty.length,i.length);for(let c=0;c<o;c+=1)r[c]=e.dirty[c]|i[c];return r}return e.dirty|i}return e.dirty}function Te(s,e,t,n,i,r){if(i){const o=St(e,t,n,r);s.p(o,i)}}function Ee(s){if(s.ctx.length>32){const e=[],t=s.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Ne(s){const e={};for(const t in s)t[0]!=="$"&&(e[t]=s[t]);return e}function He(s,e){const t={};e=new Set(e);for(const n in s)!e.has(n)&&n[0]!=="$"&&(t[n]=s[n]);return t}const Ct=typeof window<"u";let Ot=Ct?()=>window.performance.now():()=>Date.now(),Me=Ct?s=>requestAnimationFrame(s):w;const ne=new Set;function Pt(s){ne.forEach(e=>{e.c(s)||(ne.delete(e),e.f())}),ne.size!==0&&Me(Pt)}function Tt(s){let e;return ne.size===0&&Me(Pt),{promise:new Promise(t=>{ne.add(e={c:s,f:t})}),abort(){ne.delete(e)}}}function k(s,e){s.appendChild(e)}function Et(s){if(!s)return document;const e=s.getRootNode?s.getRootNode():s.ownerDocument;return e&&e.host?e:s.ownerDocument}function Wt(s){const e=O("style");return e.textContent="/* empty */",Ht(Et(s),e),e.sheet}function Ht(s,e){return k(s.head||s,e),e.sheet}function C(s,e,t){s.insertBefore(e,t||null)}function v(s){s.parentNode&&s.parentNode.removeChild(s)}function Gt(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function O(s){return document.createElement(s)}function D(s){return document.createTextNode(s)}function L(){return D(" ")}function Q(){return D("")}function Ue(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function Vt(s){return function(e){return e.preventDefault(),s.call(this,e)}}function I(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}const Jt=["width","height"];function Ge(s,e){const t=Object.getOwnPropertyDescriptors(s.__proto__);for(const n in e)e[n]==null?s.removeAttribute(n):n==="style"?s.style.cssText=e[n]:n==="__value"?s.value=s[n]=e[n]:t[n]&&t[n].set&&Jt.indexOf(n)===-1?s[n]=e[n]:I(s,n,e[n])}function Qt(s){return Array.from(s.childNodes)}function ye(s,e){e=""+e,s.data!==e&&(s.data=e)}function Ve(s,e){s.value=e??""}function Rt(s,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:n})}function Je(s,e){return new s(e)}const ke=new Map;let ve=0;function Yt(s){let e=5381,t=s.length;for(;t--;)e=(e<<5)-e^s.charCodeAt(t);return e>>>0}function Xt(s,e){const t={stylesheet:Wt(e),rules:{}};return ke.set(s,t),t}function It(s,e,t,n,i,r,o,c=0){const a=16.666/n;let l=`{
`;for(let b=0;b<=1;b+=a){const g=e+(t-e)*r(b);l+=b*100+`%{${o(g,1-g)}}
`}const u=l+`100% {${o(t,1-t)}}
}`,h=`__svelte_${Yt(u)}_${c}`,d=Et(s),{stylesheet:p,rules:f}=ke.get(d)||Xt(d,s);f[h]||(f[h]=!0,p.insertRule(`@keyframes ${h} ${u}`,p.cssRules.length));const y=s.style.animation||"";return s.style.animation=`${y?`${y}, `:""}${h} ${n}ms linear ${i}ms 1 both`,ve+=1,h}function De(s,e){const t=(s.style.animation||"").split(", "),n=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),i=t.length-n.length;i&&(s.style.animation=n.join(", "),ve-=i,ve||Zt())}function Zt(){Me(()=>{ve||(ke.forEach(s=>{const{ownerNode:e}=s.stylesheet;e&&v(e)}),ke.clear())})}let de;function F(s){de=s}function oe(){if(!de)throw new Error("Function called outside component initialization");return de}function en(s){oe().$$.on_mount.push(s)}function tn(s){oe().$$.on_destroy.push(s)}function nn(){const s=oe();return(e,t,{cancelable:n=!1}={})=>{const i=s.$$.callbacks[e];if(i){const r=Rt(e,t,{cancelable:n});return i.slice().forEach(o=>{o.call(s,r)}),!r.defaultPrevented}return!0}}function Ie(s,e){return oe().$$.context.set(s,e),e}function se(s){return oe().$$.context.get(s)}const ee=[],Qe=[];let ie=[];const Ye=[],sn=Promise.resolve();let $e=!1;function rn(){$e||($e=!0,sn.then(ze))}function re(s){ie.push(s)}const Ae=new Set;let X=0;function ze(){if(X!==0)return;const s=de;do{try{for(;X<ee.length;){const e=ee[X];X++,F(e),on(e.$$)}}catch(e){throw ee.length=0,X=0,e}for(F(null),ee.length=0,X=0;Qe.length;)Qe.pop()();for(let e=0;e<ie.length;e+=1){const t=ie[e];Ae.has(t)||(Ae.add(t),t())}ie.length=0}while(ee.length);for(;Ye.length;)Ye.pop()();$e=!1,Ae.clear(),F(s)}function on(s){if(s.fragment!==null){s.update(),W(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(re)}}function cn(s){const e=[],t=[];ie.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),ie=e}let he;function At(){return he||(he=Promise.resolve(),he.then(()=>{he=null})),he}function Se(s,e,t){s.dispatchEvent(Rt(`${e?"intro":"outro"}${t}`))}const we=new Set;let z;function ce(){z={r:0,c:[],p:z}}function ae(){z.r||W(z.c),z=z.p}function P(s,e){s&&s.i&&(we.delete(s),s.i(e))}function E(s,e,t,n){if(s&&s.o){if(we.has(s))return;we.add(s),z.c.push(()=>{we.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}const xt={duration:0};function an(s,e,t){const n={direction:"in"};let i=e(s,t,n),r=!1,o,c,a=0;function l(){o&&De(s,o)}function u(){const{delay:d=0,duration:p=300,easing:f=_t,tick:y=w,css:b}=i||xt;b&&(o=It(s,0,1,p,d,f,b,a++)),y(0,1);const g=Ot()+d,A=g+p;c&&c.abort(),r=!0,re(()=>Se(s,!0,"start")),c=Tt(S=>{if(r){if(S>=A)return y(1,0),Se(s,!0,"end"),l(),r=!1;if(S>=g){const R=f((S-g)/p);y(R,1-R)}}return r})}let h=!1;return{start(){h||(h=!0,De(s),pe(i)?(i=i(n),At().then(u)):u())},invalidate(){h=!1},end(){r&&(l(),r=!1)}}}function ln(s,e,t){const n={direction:"out"};let i=e(s,t,n),r=!0,o;const c=z;c.r+=1;let a;function l(){const{delay:u=0,duration:h=300,easing:d=_t,tick:p=w,css:f}=i||xt;f&&(o=It(s,1,0,h,u,d,f));const y=Ot()+u,b=y+h;re(()=>Se(s,!1,"start")),"inert"in s&&(a=s.inert,s.inert=!0),Tt(g=>{if(r){if(g>=b)return p(0,1),Se(s,!1,"end"),--c.r||W(c.c),!1;if(g>=y){const A=d((g-y)/h);p(1-A,A)}}return r})}return pe(i)?At().then(()=>{i=i(n),l()}):l(),{end(u){u&&"inert"in s&&(s.inert=a),u&&i.tick&&i.tick(1,0),r&&(o&&De(s,o),r=!1)}}}function Xe(s,e){const t=e.token={};function n(i,r,o,c){if(e.token!==t)return;e.resolved=c;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=c);const l=i&&(e.current=i)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,d)=>{d!==r&&h&&(ce(),E(h,1,1,()=>{e.blocks[d]===h&&(e.blocks[d]=null)}),ae())}):e.block.d(1),l.c(),P(l,1),l.m(e.mount(),e.anchor),u=!0),e.block=l,e.blocks&&(e.blocks[r]=l),u&&ze()}if(Mt(s)){const i=oe();if(s.then(r=>{F(i),n(e.then,1,e.value,r),F(null)},r=>{if(F(i),n(e.catch,2,e.error,r),F(null),!e.hasCatch)throw r}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,s),!0;e.resolved=s}}function un(s,e,t){const n=e.slice(),{resolved:i}=s;s.current===s.then&&(n[s.value]=i),s.current===s.catch&&(n[s.error]=i),s.block.p(n,t)}function Ze(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Fe(s,e){const t={},n={},i={$$scope:1};let r=s.length;for(;r--;){const o=s[r],c=e[r];if(c){for(const a in o)a in c||(n[a]=1);for(const a in c)i[a]||(t[a]=c[a],i[a]=1);s[r]=c}else for(const a in o)i[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}function be(s){return typeof s=="object"&&s!==null?s:{}}function K(s){s&&s.c()}function B(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),re(()=>{const r=s.$$.on_mount.map(kt).filter(pe);s.$$.on_destroy?s.$$.on_destroy.push(...r):W(r),s.$$.on_mount=[]}),i.forEach(re)}function M(s,e){const t=s.$$;t.fragment!==null&&(cn(t.after_update),W(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function hn(s,e){s.$$.dirty[0]===-1&&(ee.push(s),rn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function le(s,e,t,n,i,r,o=null,c=[-1]){const a=de;F(s);const l=s.$$={fragment:null,ctx:[],props:r,update:w,not_equal:i,bound:We(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:We(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};o&&o(l.root);let u=!1;if(l.ctx=t?t(s,e.props||{},(h,d,...p)=>{const f=p.length?p[0]:d;return l.ctx&&i(l.ctx[h],l.ctx[h]=f)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](f),u&&hn(s,h)),d}):[],l.update(),u=!0,W(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const h=Qt(e.target);l.fragment&&l.fragment.l(h),h.forEach(v)}else l.fragment&&l.fragment.c();e.intro&&P(s.$$.fragment),B(s,e.target,e.anchor),ze()}F(a)}class ue{constructor(){Re(this,"$$");Re(this,"$$set")}$destroy(){M(this,1),this.$destroy=w}$on(e,t){if(!pe(t))return w;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const dn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(dn);const Be={},Ce={},jt={},Lt=/^:(.+)/,et=4,fn=3,pn=2,mn=1,bn=1,fe=s=>s.replace(/(^\/+|\/+$)/g,"").split("/"),xe=s=>s.replace(/(^\/+|\/+$)/g,""),gn=(s,e)=>{const t=s.default?0:fe(s.path).reduce((n,i)=>(n+=et,i===""?n+=bn:Lt.test(i)?n+=pn:i[0]==="*"?n-=et+mn:n+=fn,n),0);return{route:s,score:t,index:e}},yn=s=>s.map(gn).sort((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index),tt=(s,e)=>{let t,n;const[i]=e.split("?"),r=fe(i),o=r[0]==="",c=yn(s);for(let a=0,l=c.length;a<l;a++){const u=c[a].route;let h=!1;if(u.default){n={route:u,params:{},uri:e};continue}const d=fe(u.path),p={},f=Math.max(r.length,d.length);let y=0;for(;y<f;y++){const b=d[y],g=r[y];if(b&&b[0]==="*"){const S=b==="*"?"*":b.slice(1);p[S]=r.slice(y).map(decodeURIComponent).join("/");break}if(typeof g>"u"){h=!0;break}const A=Lt.exec(b);if(A&&!o){const S=decodeURIComponent(g);p[A[1]]=S}else if(b!==g){h=!0;break}}if(!h){t={route:u,params:p,uri:"/"+r.slice(0,y).join("/")};break}}return t||n||null},je=(s,e)=>s+(e?`?${e}`:""),wn=(s,e)=>{if(s.startsWith("/"))return s;const[t,n]=s.split("?"),[i]=e.split("?"),r=fe(t),o=fe(i);if(r[0]==="")return je(i,n);if(!r[0].startsWith(".")){const l=o.concat(r).join("/");return je((i==="/"?"":"/")+l,n)}const c=o.concat(r),a=[];return c.forEach(l=>{l===".."?a.pop():l!=="."&&a.push(l)}),je("/"+a.join("/"),n)},nt=(s,e)=>`${xe(e==="/"?s:`${xe(s)}/${xe(e)}`)}/`,_n=s=>!s.defaultPrevented&&s.button===0&&!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey),qt=()=>typeof window<"u"&&"document"in window&&"location"in window,kn=s=>({active:s&4}),st=s=>({active:!!s[2]});function vn(s){let e,t,n,i;const r=s[17].default,o=Oe(r,s,s[16],st);let c=[{href:s[0]},{"aria-current":s[2]},s[1],s[6]],a={};for(let l=0;l<c.length;l+=1)a=J(a,c[l]);return{c(){e=O("a"),o&&o.c(),Ge(e,a)},m(l,u){C(l,e,u),o&&o.m(e,null),t=!0,n||(i=Ue(e,"click",s[5]),n=!0)},p(l,[u]){o&&o.p&&(!t||u&65540)&&Te(o,r,l,l[16],t?Pe(r,l[16],u,kn):Ee(l[16]),st),Ge(e,a=Fe(c,[(!t||u&1)&&{href:l[0]},(!t||u&4)&&{"aria-current":l[2]},u&2&&l[1],u&64&&l[6]]))},i(l){t||(P(o,l),t=!0)},o(l){E(o,l),t=!1},d(l){l&&v(e),o&&o.d(l),n=!1,i()}}}function Sn(s,e,t){let n;const i=["to","replace","state","getProps","preserveScroll"];let r=He(e,i),o,c,{$$slots:a={},$$scope:l}=e,{to:u="#"}=e,{replace:h=!1}=e,{state:d={}}=e,{getProps:p=()=>({})}=e,{preserveScroll:f=!1}=e;const y=se(Be);V(s,y,_=>t(14,o=_));const{base:b}=se(Ce);V(s,b,_=>t(15,c=_));const{navigate:g}=se(jt),A=nn();let S,R,q,U;const G=_=>{if(A("click",_),_n(_)){_.preventDefault();const m=o.pathname===S||h;g(S,{state:d,replace:m,preserveScroll:f})}};return s.$$set=_=>{e=J(J({},e),Ne(_)),t(6,r=He(e,i)),"to"in _&&t(7,u=_.to),"replace"in _&&t(8,h=_.replace),"state"in _&&t(9,d=_.state),"getProps"in _&&t(10,p=_.getProps),"preserveScroll"in _&&t(11,f=_.preserveScroll),"$$scope"in _&&t(16,l=_.$$scope)},s.$$.update=()=>{s.$$.dirty&32896&&t(0,S=u==="/"?c.uri:wn(u,c.uri)),s.$$.dirty&16385&&t(12,R=o.pathname.startsWith(S)),s.$$.dirty&16385&&t(13,q=S===o.pathname),s.$$.dirty&8192&&t(2,n=q?"page":void 0),t(1,U=p({location:o,href:S,isPartiallyCurrent:R,isCurrent:q,existingProps:r}))},[S,U,n,y,b,G,r,u,h,d,p,f,R,q,o,c,l,a]}class it extends ue{constructor(e){super(),le(this,e,Sn,vn,H,{to:7,replace:8,state:9,getProps:10,preserveScroll:11})}}const Cn=s=>({params:s&4}),rt=s=>({params:s[2]});function ot(s){let e,t,n,i;const r=[Pn,On],o=[];function c(a,l){return a[0]?0:1}return e=c(s),t=o[e]=r[e](s),{c(){t.c(),n=Q()},m(a,l){o[e].m(a,l),C(a,n,l),i=!0},p(a,l){let u=e;e=c(a),e===u?o[e].p(a,l):(ce(),E(o[u],1,1,()=>{o[u]=null}),ae(),t=o[e],t?t.p(a,l):(t=o[e]=r[e](a),t.c()),P(t,1),t.m(n.parentNode,n))},i(a){i||(P(t),i=!0)},o(a){E(t),i=!1},d(a){a&&v(n),o[e].d(a)}}}function On(s){let e;const t=s[8].default,n=Oe(t,s,s[7],rt);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),e=!0},p(i,r){n&&n.p&&(!e||r&132)&&Te(n,t,i,i[7],e?Pe(t,i[7],r,Cn):Ee(i[7]),rt)},i(i){e||(P(n,i),e=!0)},o(i){E(n,i),e=!1},d(i){n&&n.d(i)}}}function Pn(s){let e,t,n,i={ctx:s,current:null,token:null,hasCatch:!1,pending:Rn,then:En,catch:Tn,value:12,blocks:[,,,]};return Xe(t=s[0],i),{c(){e=Q(),i.block.c()},m(r,o){C(r,e,o),i.block.m(r,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(r,o){s=r,i.ctx=s,o&1&&t!==(t=s[0])&&Xe(t,i)||un(i,s,o)},i(r){n||(P(i.block),n=!0)},o(r){for(let o=0;o<3;o+=1){const c=i.blocks[o];E(c)}n=!1},d(r){r&&v(e),i.block.d(r),i.token=null,i=null}}}function Tn(s){return{c:w,m:w,p:w,i:w,o:w,d:w}}function En(s){var c;let e,t,n;const i=[s[2],s[3]];var r=((c=s[12])==null?void 0:c.default)||s[12];function o(a,l){let u={};if(l!==void 0&&l&12)u=Fe(i,[l&4&&be(a[2]),l&8&&be(a[3])]);else for(let h=0;h<i.length;h+=1)u=J(u,i[h]);return{props:u}}return r&&(e=Je(r,o(s))),{c(){e&&K(e.$$.fragment),t=Q()},m(a,l){e&&B(e,a,l),C(a,t,l),n=!0},p(a,l){var u;if(l&1&&r!==(r=((u=a[12])==null?void 0:u.default)||a[12])){if(e){ce();const h=e;E(h.$$.fragment,1,0,()=>{M(h,1)}),ae()}r?(e=Je(r,o(a,l)),K(e.$$.fragment),P(e.$$.fragment,1),B(e,t.parentNode,t)):e=null}else if(r){const h=l&12?Fe(i,[l&4&&be(a[2]),l&8&&be(a[3])]):{};e.$set(h)}},i(a){n||(e&&P(e.$$.fragment,a),n=!0)},o(a){e&&E(e.$$.fragment,a),n=!1},d(a){a&&v(t),e&&M(e,a)}}}function Rn(s){return{c:w,m:w,p:w,i:w,o:w,d:w}}function In(s){let e,t,n=s[1]&&s[1].route===s[5]&&ot(s);return{c(){n&&n.c(),e=Q()},m(i,r){n&&n.m(i,r),C(i,e,r),t=!0},p(i,[r]){i[1]&&i[1].route===i[5]?n?(n.p(i,r),r&2&&P(n,1)):(n=ot(i),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(ce(),E(n,1,1,()=>{n=null}),ae())},i(i){t||(P(n),t=!0)},o(i){E(n),t=!1},d(i){i&&v(e),n&&n.d(i)}}}function An(s,e,t){let n,{$$slots:i={},$$scope:r}=e,{path:o=""}=e,{component:c=null}=e,a={},l={};const{registerRoute:u,unregisterRoute:h,activeRoute:d}=se(Ce);V(s,d,f=>t(1,n=f));const p={path:o,default:o===""};return u(p),tn(()=>{h(p)}),s.$$set=f=>{t(11,e=J(J({},e),Ne(f))),"path"in f&&t(6,o=f.path),"component"in f&&t(0,c=f.component),"$$scope"in f&&t(7,r=f.$$scope)},s.$$.update=()=>{if(n&&n.route===p){t(2,a=n.params);const{component:f,path:y,...b}=e;t(3,l=b),f&&(f.toString().startsWith("class ")?t(0,c=f):t(0,c=f())),qt()&&!n.preserveScroll&&(window==null||window.scrollTo(0,0))}},e=Ne(e),[c,n,a,l,d,p,o,r,i]}class ct extends ue{constructor(e){super(),le(this,e,An,In,H,{path:6,component:0})}}const Z=[];function xn(s,e){return{subscribe:te(s,e).subscribe}}function te(s,e=w){let t;const n=new Set;function i(c){if(H(s,c)&&(s=c,t)){const a=!Z.length;for(const l of n)l[1](),Z.push(l,s);if(a){for(let l=0;l<Z.length;l+=2)Z[l][0](Z[l+1]);Z.length=0}}}function r(c){i(c(s))}function o(c,a=w){const l=[c,a];return n.add(l),n.size===1&&(t=e(i,r)||w),c(s),()=>{n.delete(l),n.size===0&&t&&(t(),t=null)}}return{set:i,update:r,subscribe:o}}function jn(s,e,t){const n=!Array.isArray(s),i=n?[s]:s;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return xn(t,(o,c)=>{let a=!1;const l=[];let u=0,h=w;const d=()=>{if(u)return;h();const f=e(n?l[0]:l,o,c);r?o(f):h=pe(f)?f:w},p=i.map((f,y)=>vt(f,b=>{l[y]=b,u&=~(1<<y),a&&d()},()=>{u|=1<<y}));return a=!0,d(),function(){W(p),h(),a=!1}})}const Le=s=>({...s.location,state:s.history.state,key:s.history.state&&s.history.state.key||"initial"}),Ln=s=>{const e=[];let t=Le(s);return{get location(){return t},listen(n){e.push(n);const i=()=>{t=Le(s),n({location:t,action:"POP"})};return s.addEventListener("popstate",i),()=>{s.removeEventListener("popstate",i);const r=e.indexOf(n);e.splice(r,1)}},navigate(n,{state:i,replace:r=!1,preserveScroll:o=!1}={}){i={...i,key:Date.now()+""};try{r?s.history.replaceState(i,"",n):s.history.pushState(i,"",n)}catch{s.location[r?"replace":"assign"](n)}t=Le(s),e.forEach(c=>c({location:t,action:"PUSH",preserveScroll:o})),document.activeElement.blur()}}},qn=(s="/")=>{let e=0;const t=[{pathname:s,search:""}],n=[];return{get location(){return t[e]},addEventListener(i,r){},removeEventListener(i,r){},history:{get entries(){return t},get index(){return e},get state(){return n[e]},pushState(i,r,o){const[c,a=""]=o.split("?");e++,t.push({pathname:c,search:a}),n.push(i)},replaceState(i,r,o){const[c,a=""]=o.split("?");t[e]={pathname:c,search:a},n[e]=i}}}},Nn=Ln(qt()?window:qn()),Un=s=>({route:s&4,location:s&2}),at=s=>({route:s[2]&&s[2].uri,location:s[1]}),Dn=s=>({route:s&4,location:s&2}),lt=s=>({route:s[2]&&s[2].uri,location:s[1]});function $n(s){let e;const t=s[15].default,n=Oe(t,s,s[14],at);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),e=!0},p(i,r){n&&n.p&&(!e||r&16390)&&Te(n,t,i,i[14],e?Pe(t,i[14],r,Un):Ee(i[14]),at)},i(i){e||(P(n,i),e=!0)},o(i){E(n,i),e=!1},d(i){n&&n.d(i)}}}function Fn(s){let e=s[1].pathname,t,n,i=ut(s);return{c(){i.c(),t=Q()},m(r,o){i.m(r,o),C(r,t,o),n=!0},p(r,o){o&2&&H(e,e=r[1].pathname)?(ce(),E(i,1,1,w),ae(),i=ut(r),i.c(),P(i,1),i.m(t.parentNode,t)):i.p(r,o)},i(r){n||(P(i),n=!0)},o(r){E(i),n=!1},d(r){r&&v(t),i.d(r)}}}function ut(s){let e,t,n,i;const r=s[15].default,o=Oe(r,s,s[14],lt);return{c(){e=O("div"),o&&o.c()},m(c,a){C(c,e,a),o&&o.m(e,null),i=!0},p(c,a){o&&o.p&&(!i||a&16390)&&Te(o,r,c,c[14],i?Pe(r,c[14],a,Dn):Ee(c[14]),lt)},i(c){i||(P(o,c),c&&re(()=>{i&&(n&&n.end(1),t=an(e,s[3],{}),t.start())}),i=!0)},o(c){E(o,c),t&&t.invalidate(),c&&(n=ln(e,s[3],{})),i=!1},d(c){c&&v(e),o&&o.d(c),c&&n&&n.end()}}}function Bn(s){let e,t,n,i;const r=[Fn,$n],o=[];function c(a,l){return a[0]?0:1}return e=c(s),t=o[e]=r[e](s),{c(){t.c(),n=Q()},m(a,l){o[e].m(a,l),C(a,n,l),i=!0},p(a,[l]){let u=e;e=c(a),e===u?o[e].p(a,l):(ce(),E(o[u],1,1,()=>{o[u]=null}),ae(),t=o[e],t?t.p(a,l):(t=o[e]=r[e](a),t.c()),P(t,1),t.m(n.parentNode,n))},i(a){i||(P(t),i=!0)},o(a){E(t),i=!1},d(a){a&&v(n),o[e].d(a)}}}function Mn(s,e,t){let n,i,r,o,{$$slots:c={},$$scope:a}=e,{basepath:l="/"}=e,{url:u=null}=e,{viewtransition:h=null}=e,{history:d=Nn}=e;const p=(m,T,x)=>{const j=h(x);return typeof(j==null?void 0:j.fn)=="function"?j.fn(m,j):j};Ie(jt,d);const f=se(Be),y=se(Ce),b=te([]);V(s,b,m=>t(12,i=m));const g=te(null);V(s,g,m=>t(2,o=m));let A=!1;const S=f||te(u?{pathname:u}:d.location);V(s,S,m=>t(1,n=m));const R=y?y.routerBase:te({path:l,uri:l});V(s,R,m=>t(13,r=m));const q=jn([R,g],([m,T])=>{if(!T)return m;const{path:x}=m,{route:j,uri:$t}=T;return{path:j.default?x:j.path.replace(/\*.*$/,""),uri:$t}}),U=m=>{const{path:T}=r;let{path:x}=m;if(m._path=x,m.path=nt(T,x),typeof window>"u"){if(A)return;const j=tt([m],n.pathname);j&&(g.set(j),A=!0)}else b.update(j=>[...j,m])},G=m=>{b.update(T=>T.filter(x=>x!==m))};let _=!1;return f||(en(()=>d.listen(T=>{t(11,_=T.preserveScroll||!1),S.set(T.location)})),Ie(Be,S)),Ie(Ce,{activeRoute:g,base:R,routerBase:q,registerRoute:U,unregisterRoute:G}),s.$$set=m=>{"basepath"in m&&t(8,l=m.basepath),"url"in m&&t(9,u=m.url),"viewtransition"in m&&t(0,h=m.viewtransition),"history"in m&&t(10,d=m.history),"$$scope"in m&&t(14,a=m.$$scope)},s.$$.update=()=>{if(s.$$.dirty&8192){const{path:m}=r;b.update(T=>T.map(x=>Object.assign(x,{path:nt(m,x._path)})))}if(s.$$.dirty&6146){const m=tt(i,n.pathname);g.set({...m,preserveScroll:_})}},[h,n,o,p,b,g,S,R,l,u,d,_,i,r,a,c]}class zn extends ue{constructor(e){super(),le(this,e,Mn,Bn,H,{basepath:8,url:9,viewtransition:0,history:10})}}const Kn="/assets/GlyphBlank-516a65ac.png",Wn="/assets/TaikoHeart-cb083bcf.png",Hn="/assets/Milestones-e342f2f8.png";function Gn(s){let e,t,n,i,r;return{c(){e=O("div"),e.innerHTML=`<img src="${Kn}" class="taikoImg mx-auto h-64" alt=""/>`,t=L(),n=O("h1"),n.textContent="dojo node",i=L(),r=O("div"),r.textContent="click to enter",I(e,"class","text-center relative"),I(n,"class","font-bold text-3xl text-[#ffad12]"),I(r,"class","absolute text-sm font-semibold bottom-8 opacity-80 text-[#ffad12]")},m(o,c){C(o,e,c),C(o,t,c),C(o,n,c),C(o,i,c),C(o,r,c)},p:w,d(o){o&&(v(e),v(t),v(n),v(i),v(r))}}}function Vn(s){let e;return{c(){e=O("h1"),e.textContent="prover market",I(e,"class","font-bold text-2xl text-[#ffad12]")},m(t,n){C(t,e,n)},p:w,d(t){t&&v(e)}}}function Jn(s){let e,t,n,i,r,o,c,a,l,u,h;return e=new it({props:{to:"/dashboard",class:"flex flex-col relative items-center pt-4 md:pt-4",$$slots:{default:[Gn]},$$scope:{ctx:s}}}),n=new it({props:{to:"/provers",class:"flex flex-col relative items-center pt-4 md:pt-4",$$slots:{default:[Vn]},$$scope:{ctx:s}}}),{c(){K(e.$$.fragment),t=L(),K(n.$$.fragment),i=L(),r=O("img"),c=L(),a=O("div"),a.innerHTML=`<div class="w-full md:w-1/3 p-4"><h2 class="md:hidden text-lg font-normal mb-10 text-center text-[#1c7f3f]">milestone <span class="block md:block font-bold">01</span></h2> <ul><li class="mb-5 milestone done svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>
        Support testnet alpha-5</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>
        Look into development to support and switch between different nodes on different
        layers easily (L1/L2/L3)</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Draft overview for Proposer/Prover rewards visually and functionally
        (charts/metrics)</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>
        Build online presence and branding.</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Bug fixes for minor issues, fine tuning existing dashboard</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Increase documentation. Providing useful information for operators
        around VPS access, networkwide access, docker vs systemwide stats</li></ul></div> <div class="w-full md:w-1/3 p-4"><h2 class="md:hidden text-lg font-normal mb-10 text-center text-[#1c7f3f]">milestone <span class="block md:block font-bold">02</span></h2> <ul><li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Build a dedicated desktop app (for the dashboard only) and/or integrate
        into taikoâ€™s GUI app</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Implement overview of Proposer/Prover rewards (charts/metrics)</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Deploy custom website with installation guides and visual
        instructions/tutorials.</li> <li class="mb-5 milestone done svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Implement and host a â€˜previewâ€™ of the dashboard where any taiko node
        runner can enter their IP address and see basic node stats such as
        syncing progress</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Focus on research for new features to integrate based on latest taiko
        developments</li></ul></div> <div class="w-full md:w-1/3 p-4"><h2 class="md:hidden text-lg font-normal mb-10 text-center text-[#1c7f3f]">milestone <span class="block md:block font-bold">03</span></h2> <ul><li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Build Discord (or operate one inside Taiko) for community support
        (node/dashboard runners), updates, bug fixes</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Take on feature requests from the community and implement into latest
        version</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>
        Develop and implement alternative design formats</li> <li class="mb-5 milestone svelte-zkpmub"><span class="mr-2">ðŸ¥‹</span>

        Create and distribute digital content around what nodes are, their
        importance in securing a blockchain, and why we want to enable everyday
        people to run one. Increase education with established branding</li></ul></div>`,l=L(),u=O("div"),u.innerHTML=`<p>made with <img class="w-3 inline align-baseline" src="${Wn}" alt="Taiko heart icon"/> by</p> <p>wolfez and helios</p> <div class="flex items-center justify-center mt-2"><a href="https://github.com/wolfderechter/taiko-node-dashboard"><span class="github-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.20-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.20-.82 2.20-.82.44 1.10.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.20 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></span></a></div>`,zt(r.src,o=Hn)||I(r,"src",o),I(r,"class","mt-8 hidden md:block"),I(r,"alt",""),I(a,"class","flex flex-col items-baseline space-y-8 md:space-y-0 md:flex-row md:justify-center md:space-x-16 mt-8 md:mt-0 w-[90%] m-auto text-[#a52519] font-medium"),I(u,"class","footer text-center svelte-zkpmub")},m(d,p){B(e,d,p),C(d,t,p),B(n,d,p),C(d,i,p),C(d,r,p),C(d,c,p),C(d,a,p),C(d,l,p),C(d,u,p),h=!0},p(d,[p]){const f={};p&1&&(f.$$scope={dirty:p,ctx:d}),e.$set(f);const y={};p&1&&(y.$$scope={dirty:p,ctx:d}),n.$set(y)},i(d){h||(P(e.$$.fragment,d),P(n.$$.fragment,d),h=!0)},o(d){E(e.$$.fragment,d),E(n.$$.fragment,d),h=!1},d(d){d&&(v(t),v(i),v(r),v(c),v(a),v(l),v(u)),M(e,d),M(n,d)}}}class Qn extends ue{constructor(e){super(),le(this,e,null,Jn,H,{})}}function Yn(s){try{return localStorage.getItem(s)}catch(e){return console.error(`Error getting "${s}" from localStorage:`,e),null}}const Xn={Original:"original",Light:"light",Dark:"dark",Paper:"paper"};let ht=Yn("theme");const Zn=te(ht||Xn.Paper);class $ extends Error{constructor(e){var t,n,i,r;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,$.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof $||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(r=(i=(n=this.originalError)==null?void 0:n.cause)==null?void 0:i.message)!=null&&r.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const ge=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function es(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},e||{}).decode||ts;let i=0;for(;i<s.length;){const r=s.indexOf("=",i);if(r===-1)break;let o=s.indexOf(";",i);if(o===-1)o=s.length;else if(o<r){i=s.lastIndexOf(";",r-1)+1;continue}const c=s.slice(i,r).trim();if(t[c]===void 0){let a=s.slice(r+1,o).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1));try{t[c]=n(a)}catch{t[c]=a}}i=o+1}return t}function dt(s,e,t){const n=Object.assign({},t||{}),i=n.encode||ns;if(!ge.test(s))throw new TypeError("argument name is invalid");const r=i(e);if(r&&!ge.test(r))throw new TypeError("argument val is invalid");let o=s+"="+r;if(n.maxAge!=null){const c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(c)}if(n.domain){if(!ge.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!ge.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function ts(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function ns(s){return encodeURIComponent(s)}let Nt;function _e(s){if(s)try{const e=decodeURIComponent(Nt(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Ut(s,e=0){let t=_e(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}Nt=typeof atob=="function"?atob:s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,r=0,o="";n=e.charAt(r++);~n&&(t=i%4?64*t+n:n,i++%4)?o+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};const ft="pb_auth";class ss{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Ut(this.token)}get isAdmin(){return _e(this.token).type==="admin"}get isAuthRecord(){return _e(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=ft){const n=es(e||"")[t]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=ft){var a,l;const n={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=_e(this.token);n.expires=i!=null&&i.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},n,e);const r={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let o=dt(t,JSON.stringify(r),e);const c=typeof Blob<"u"?new Blob([o]).size:o.length;if(r.model&&c>4096){r.model={id:(a=r==null?void 0:r.model)==null?void 0:a.id,email:(l=r==null?void 0:r.model)==null?void 0:l.email};const u=["collectionId","username","verified"];for(const h in this.model)u.includes(h)&&(r.model[h]=this.model[h]);o=dt(t,JSON.stringify(r),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class is extends ss{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class Y{constructor(e){this.client=e}}class rs extends Y{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,i,r,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:i,duration:r}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class Ke extends Y{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(i=>{var r;return i.items=((r=i.items)==null?void 0:r.map(o=>this.decode(o)))||[],i})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var i;if(!((i=n==null?void 0:n.items)!=null&&i.length))throw new $({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],i=async r=>this.getList(r,e||500,t).then(o=>{const c=o.items;return n=n.concat(c),c.length==o.perPage?i(r+1):n});return i(1)}}function N(s,e,t,n){const i=n!==void 0;return i||t!==void 0?i?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function qe(s){var e;(e=s._resetAutoRefresh)==null||e.call(s)}class os extends Ke{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(i=>{var r,o;return((r=this.client.authStore.model)==null?void 0:r.id)===i.id&&((o=this.client.authStore.model)==null?void 0:o.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,r;return n&&((i=this.client.authStore.model)==null?void 0:i.id)===e&&((r=this.client.authStore.model)==null?void 0:r.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,n,i){let r={method:"POST",body:{identity:e,password:t}};r=N("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",r,n,i);const o=r.autoRefreshThreshold;delete r.autoRefreshThreshold,r.autoRefresh||qe(this.client);let c=await this.client.send(this.baseCrudPath+"/auth-with-password",r);return c=this.authResponse(c),o&&function(l,u,h,d){qe(l);const p=l.beforeSend,f=l.authStore.model,y=l.authStore.onChange((b,g)=>{(!b||(g==null?void 0:g.id)!=(f==null?void 0:f.id)||(g!=null&&g.collectionId||f!=null&&f.collectionId)&&(g==null?void 0:g.collectionId)!=(f==null?void 0:f.collectionId))&&qe(l)});l._resetAutoRefresh=function(){y(),l.beforeSend=p,delete l._resetAutoRefresh},l.beforeSend=async(b,g)=>{var q;const A=l.authStore.token;if((q=g.query)!=null&&q.autoRefresh)return p?p(b,g):{url:b,sendOptions:g};let S=l.authStore.isValid;if(S&&Ut(l.authStore.token,u))try{await h()}catch{S=!1}S||await d();const R=g.headers||{};for(let U in R)if(U.toLowerCase()=="authorization"&&A==R[U]&&l.authStore.token){R[U]=l.authStore.token;break}return g.headers=R,p?p(b,g):{url:b,sendOptions:g}}}(this.client,o,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},r))),c}authRefresh(e,t){let n={method:"POST"};return n=N("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=N("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=N("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,i,r),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}class Dt extends Y{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t){var i;if(!e)throw new Error("topic must be set.");const n=function(r){const o=r;let c;try{c=JSON.parse(o==null?void 0:o.data)}catch{}t(c||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(n),this.isConnected?this.subscriptions[e].length===1?await this.submitSubscriptions():(i=this.eventSource)==null||i.addEventListener(e,n):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,n)}async unsubscribe(e){var t;if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)==null||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||await this.submitSubscriptions():this.disconnect()}}async unsubscribeByPrefix(e){var n;let t=!1;for(let i in this.subscriptions)if(i.startsWith(e)){t=!0;for(let r of this.subscriptions[i])(n=this.eventSource)==null||n.removeEventListener(i,r);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var i;if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let n=!1;for(let r=this.subscriptions[e].length-1;r>=0;r--)this.subscriptions[e][r]===t&&(n=!0,delete this.subscriptions[e][r],this.subscriptions[e].splice(r,1),(i=this.eventSource)==null||i.removeEventListener(e,t));n&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||await this.submitSubscriptions():this.disconnect())}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let i in this.subscriptions)if((n=this.subscriptions[i])!=null&&n.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,await this.submitSubscriptions()}).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new $(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class cs extends Ke{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribeOne(e,t){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)}async subscribe(e,t){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)}async unsubscribe(e){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(i=>{var r,o,c;return((r=this.client.authStore.model)==null?void 0:r.id)!==(i==null?void 0:i.id)||((o=this.client.authStore.model)==null?void 0:o.collectionId)!==this.collectionIdOrName&&((c=this.client.authStore.model)==null?void 0:c.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,r,o;return!n||((i=this.client.authStore.model)==null?void 0:i.id)!==e||((r=this.client.authStore.model)==null?void 0:r.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)==null?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,i){let r={method:"POST",body:{identity:e,password:t}};return r=N("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/auth-with-password",r).then(o=>this.authResponse(o))}authWithOAuth2Code(e,t,n,i,r,o,c){let a={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:i,createData:r}};return a=N("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",a,o,c),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",a).then(l=>this.authResponse(l))}async authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(await this.listAuthMethods()).authProviders.find(a=>a.name===t.provider);if(!n)throw new $(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),r=new Dt(this.client);let o=null;function c(){o==null||o.close(),r.unsubscribe()}return t.urlCallback||(o=pt(void 0)),new Promise(async(a,l)=>{var u;try{await r.subscribe("@oauth2",async f=>{const y=r.clientId;try{if(!f.state||y!==f.state)throw new Error("State parameters don't match.");const b=Object.assign({},t);delete b.provider,delete b.scopes,delete b.createData,delete b.urlCallback;const g=await this.authWithOAuth2Code(n.name,f.code,n.codeVerifier,i,t.createData,b);a(g)}catch(b){l(new $(b))}c()});const h={state:r.clientId};(u=t.scopes)!=null&&u.length&&(h.scope=t.scopes.join(" "));const d=this._replaceQueryParams(n.authUrl+i,h);await(t.urlCallback||function(f){o?o.location.href=f:o=pt(f)})(d)}catch(h){c(),l(new $(h))}})}authRefresh(e,t){let n={method:"POST"};return n=N("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=N("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=N("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,i,r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}requestVerification(e,t,n){let i={method:"POST",body:{email:e}};return i=N("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}confirmVerification(e,t,n){let i={method:"POST",body:{token:e}};return i=N("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>!0)}requestEmailChange(e,t,n){let i={method:"POST",body:{newEmail:e}};return i=N("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}confirmEmailChange(e,t,n,i){let r={method:"POST",body:{token:e,password:t}};return r=N("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",r,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",r).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const r={},o=i.split("&");for(const c of o){if(c=="")continue;const a=c.split("=");r[decodeURIComponent(a[0].replace(/\+/g," "))]=decodeURIComponent((a[1]||"").replace(/\+/g," "))}for(let c in t)t.hasOwnProperty(c)&&(t[c]==null?delete r[c]:r[c]=t[c]);i="";for(let c in r)r.hasOwnProperty(c)&&(i!=""&&(i+="&"),i+=encodeURIComponent(c.replace(/%20/g,"+"))+"="+encodeURIComponent(r[c].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function pt(s){if(typeof window>"u"||!(window!=null&&window.open))throw new $(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,t=t>i?i:t;let r=n/2-e/2,o=i/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+o+",left="+r+",resizable,menubar=no")}class as extends Ke{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,n){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)}}class ls extends Y{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class us extends Y{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class hs extends Y{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let r=this.client.buildUrl(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const o=new URLSearchParams(n);r+=(r.includes("?")?"&":"?")+o}return r}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class ds extends Y{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const fs=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class ps{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new is,this.admins=new os(this),this.collections=new as(this),this.files=new hs(this),this.logs=new ls(this),this.settings=new rs(this),this.realtime=new Dt(this),this.health=new us(this),this.backups=new ds(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new cs(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let n in t){let i=t[n];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+n+"}",i)}return e}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var n;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(n=window.location.origin)!=null&&n.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(n,t));i.url!==void 0||i.options!==void 0?(n=i.url||n,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(async i=>{let r={};try{r=await i.json()}catch{}if(this.afterSend&&(r=await this.afterSend(i,r)),i.status>=400)throw new $({url:i.url,status:i.status,data:r});return r}).catch(i=>{throw new $(i)})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)fs.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const i=Array.isArray(e[n])?e[n]:[e[n]];for(let r of i)t.append(n,r)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let i of n)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const i=e[n],r=encodeURIComponent(n);if(Array.isArray(i))for(const o of i)t.push(r+"="+encodeURIComponent(o));else i instanceof Date?t.push(r+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(i))):t.push(r+"="+encodeURIComponent(i))}return t.join("&")}}function mt(s,e,t){const n=s.slice();return n[9]=e[t],n}function bt(s){let e,t=Ze(s[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=gt(mt(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=Q()},m(i,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,r);C(i,e,r)},p(i,r){if(r&1){t=Ze(i[0]);let o;for(o=0;o<t.length;o+=1){const c=mt(i,t,o);n[o]?n[o].p(c,r):(n[o]=gt(c),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){i&&v(e),Gt(n,i)}}}function gt(s){let e,t=s[9].url+"",n,i,r=s[9].minimumGas+"",o,c,a=s[9].currentCapacity+"",l,u;return{c(){e=O("li"),n=D(t),i=D(" -- minimum proof fee of "),o=D(r),c=D(` -- current capacity
          is `),l=D(a),u=L()},m(h,d){C(h,e,d),k(e,n),k(e,i),k(e,o),k(e,c),k(e,l),k(e,u)},p(h,d){d&1&&t!==(t=h[9].url+"")&&ye(n,t),d&1&&r!==(r=h[9].minimumGas+"")&&ye(o,r),d&1&&a!==(a=h[9].currentCapacity+"")&&ye(l,a)},d(h){h&&v(e)}}}function ms(s){let e,t,n,i,r,o,c,a,l,u,h,d,p,f,y,b,g,A,S,R=s[0].filter(yt).map(wt).join(",")+"",q,U,G,_,m=s[0].length>0&&bt(s);return{c(){e=O("div"),t=O("h1"),t.textContent="Prover market page",n=L(),i=O("form"),r=O("h1"),r.textContent="Add new prover endpoint",o=L(),c=O("input"),a=L(),l=O("button"),l.textContent="Add",u=L(),h=O("ul"),m&&m.c(),d=L(),p=O("div"),f=O("h1"),f.textContent="One liner of prover endpoints that currently have capacity:",y=L(),b=O("pre"),g=D("      "),A=O("code"),S=D("PROVER_ENDPOINTS="),q=D(R),U=D(`
    `),I(t,"class","text-3xl mb-4"),I(r,"class","text-xl"),I(c,"class","my-3 py-1 text-center"),I(c,"placeholder","http://192.168.20.1:9876"),I(l,"class","bg-slate-500 text-white px-4 py-2 rounded mt-2"),I(i,"class","flex flex-col my-16"),I(f,"class","text-lg"),I(b,"class","bg-gray-800 text-white pt-6 rounded pr-16"),I(p,"class","p-4 rounded-lg"),I(e,"class","flex flex-col justify-center items-center mt-16")},m(T,x){C(T,e,x),k(e,t),k(e,n),k(e,i),k(i,r),k(i,o),k(i,c),Ve(c,s[1]),k(i,a),k(i,l),k(e,u),k(e,h),m&&m.m(h,null),k(e,d),k(e,p),k(p,f),k(p,y),k(p,b),k(b,g),k(b,A),k(A,S),k(A,q),k(b,U),G||(_=[Ue(c,"input",s[3]),Ue(i,"submit",Vt(s[2]))],G=!0)},p(T,[x]){x&2&&c.value!==T[1]&&Ve(c,T[1]),T[0].length>0?m?m.p(T,x):(m=bt(T),m.c(),m.m(h,null)):m&&(m.d(1),m=null),x&1&&R!==(R=T[0].filter(yt).map(wt).join(",")+"")&&ye(q,R)},i:w,o:w,d(T){T&&v(e),m&&m.d(),G=!1,W(_)}}}async function bs(s){try{const e=await fetch(`${s.url}/status`);if(e.ok){const t=await e.json();return{url:s.url,minimumGas:t.minProofFee,currentCapacity:t.currentCapacity}}else throw new Error(`Request failed with status: ${e.status}`)}catch(e){console.error(e)}}const yt=s=>s.currentCapacity>0,wt=s=>s.url;function gs(s,e,t){let n=[],i=[],r;const o=new ps({}.VITE_PB_URI);async function c(){await o.collection("users").authWithPassword({}.VITE_PB_USER,{}.VITE_PB_PASSWORD),n=[],n=await o.collection("prover_endpoints").getFullList({sort:"-created"}),a()}c();async function a(){t(0,i=[]);for(const d of n){const p=await bs(d);p!=null&&t(0,i=[...i,p])}i.sort((d,p)=>p.currentCapacity-d.currentCapacity)}async function l(){try{if(t(1,r=r.replace(/\/+$/,"")),u(r))return;const d=await o.collection("prover_endpoints").create({url:r});c(),t(1,r="")}catch(d){console.error(d)}}function u(d){return i.find(p=>p.url===d)!==void 0}function h(){r=this.value,t(1,r)}return[i,r,l,h]}class ys extends ue{constructor(e){super(),le(this,e,gs,ms,H,{})}}function ws(s){let e,t;return e=new Qn({}),{c(){K(e.$$.fragment)},m(n,i){B(e,n,i),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){E(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function _s(s){let e,t,n,i,r;return t=new ct({props:{path:"/",$$slots:{default:[ws]},$$scope:{ctx:s}}}),i=new ct({props:{path:"provers",component:ys}}),{c(){e=O("div"),K(t.$$.fragment),n=L(),K(i.$$.fragment)},m(o,c){C(o,e,c),B(t,e,null),k(e,n),B(i,e,null),r=!0},p(o,c){const a={};c&8&&(a.$$scope={dirty:c,ctx:o}),t.$set(a)},i(o){r||(P(t.$$.fragment,o),P(i.$$.fragment,o),r=!0)},o(o){E(t.$$.fragment,o),E(i.$$.fragment,o),r=!1},d(o){o&&v(e),M(t),M(i)}}}function ks(s){let e,t,n;return t=new zn({props:{url:s[0],$$slots:{default:[_s]},$$scope:{ctx:s}}}),{c(){e=O("main"),K(t.$$.fragment),I(e,"class","px-2 md:px-6")},m(i,r){C(i,e,r),B(t,e,null),n=!0},p(i,[r]){const o={};r&1&&(o.url=i[0]),r&8&&(o.$$scope={dirty:r,ctx:i}),t.$set(o)},i(i){n||(P(t.$$.fragment,i),n=!0)},o(i){E(t.$$.fragment,i),n=!1},d(i){i&&v(e),M(t)}}}function vs(s,e,t){let{url:n=""}=e;const i=document.body;return Zn.subscribe(r=>{i.setAttribute("data-theme",r)}),s.$$set=r=>{"url"in r&&t(0,n=r.url)},[n]}class Ss extends ue{constructor(e){super(),le(this,e,vs,ks,H,{url:0})}}new Ss({target:document.getElementById("app")});
